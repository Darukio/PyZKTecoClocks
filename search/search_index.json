{"config":{"lang":["es"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"USAGE/","title":"Gu\u00eda de Uso de PyZKTecoClocks","text":""},{"location":"USAGE/#tabla-de-contenidos","title":"Tabla de Contenidos","text":"<ol> <li>Introducci\u00f3n</li> <li>Interfaz de usuario</li> <li>Programa Reloj de Asistencias</li> <li>Acciones principales<ul> <li>Lista de acciones</li> <li>Modificar dispositivos</li> <li>Reiniciar dispositivos</li> <li>Probar conexiones</li> <li>Actualizar hora</li> <li>Obtener marcaciones</li> </ul> </li> <li>Configuraci\u00f3n en acciones principales</li> <li>Acciones de configuraci\u00f3n del men\u00fa contextual</li> <li>Otras acciones</li> <li>Servicio Reloj de Asistencias</li> <li>Acciones principales del servicio</li> <li>Configuraci\u00f3n del servicio</li> <li>Comportamiento del servicio</li> <li>Carpetas generadas</li> <li>Archivos generados</li> <li>Por el usuario</li> <li>Por el programa y el servicio</li> <li>Logs</li> <li>Archivo de configuraci\u00f3n <code>config.ini</code></li> <li>Resumen de par\u00e1metros</li> <li>Attendance_status</li> <li>Cpu_config</li> <li>Device_config</li> <li>Program_config</li> <li>Network_config</li> </ol>"},{"location":"USAGE/#introduccion","title":"Introducci\u00f3n","text":"<p>Este documento describe c\u00f3mo utilizar las herramientas Programa Reloj de Asistencias y Servicio Reloj de Asistencias del proyecto PyZKTecoClocks. Aqu\u00ed encontrar\u00e1s:</p> <ul> <li>Descripci\u00f3n de las interfaces de usuario.</li> <li>Detalle de cada acci\u00f3n disponible.</li> <li>Explicaci\u00f3n de la configuraci\u00f3n y de los archivos generados.</li> <li>Estructura de las carpetas y logs.</li> </ul>"},{"location":"USAGE/#interfaz-de-usuario","title":"Interfaz de usuario","text":"<p>El proyecto cuenta con dos aplicaciones independientes, cada uno con su propia interfaz de bandeja. Al hacer clic derecho sobre el \u00edcono, se despliega un men\u00fa contextual con acciones propias del ejecutable.</p> <p>Ver apartados Programa Reloj de Asistencias y Servicio Reloj de Asistencias para m\u00e1s informaci\u00f3n.</p>"},{"location":"USAGE/#programa-reloj-de-asistencias","title":"Programa Reloj de Asistencias","text":"<p>Para usar el programa, ejecutar <code>Programa Reloj de Asistencias.exe</code>. Para ello, aseg\u00farese de tener en el directorio ra\u00edz donde se encuentran los ejecutables, los archivos <code>config.ini</code> (ver Archivo de configuraci\u00f3n) y <code>info_devices.txt</code> (ver Archivos generados por el usuario).</p>"},{"location":"USAGE/#acciones-principales","title":"Acciones principales","text":"<p>El men\u00fa contextual del programa ofrece cinco acciones principales que abren ventanas con tablas interactivas y controles de ejecuci\u00f3n.</p>"},{"location":"USAGE/#lista-de-acciones","title":"Lista de acciones","text":"Acci\u00f3n Descripci\u00f3n breve Modificar dispositivos Edita <code>info_devices.txt</code> desde una tabla interactiva. Reiniciar dispositivos Env\u00eda comando de reinicio y muestra progreso con barra y alertas. Probar conexiones Verifica conexi\u00f3n, marcaciones, serie, plataforma y firmware. Actualizar hora Sincroniza la hora de los dispositivos seleccionados. Obtener marcaciones Descarga registros y sincroniza hora, con gesti\u00f3n de errores. <p>Cada acci\u00f3n incluye Tiempo de Espera y Reintentos (ver Configuraci\u00f3n en acciones principales) y utiliza variables de <code>config.ini</code> (ver Archivo de configuraci\u00f3n). Adem\u00e1s, genera archivos de log mensuales en la carpeta <code>logs/</code> (ver Carpetas generadas).</p>"},{"location":"USAGE/#modificar-dispositivos","title":"Modificar dispositivos","text":"<p>Abre una ventana en la que permite modificar el archivo <code>info_devices.txt</code> a trav\u00e9s de una tabla que contiene los dispositivos configurados para las acciones de:</p> <ul> <li>Reiniciar dispositivos</li> <li>Probar conexiones</li> <li>Actualizar hora</li> <li>Obtener marcaciones</li> </ul> <p>La tabla es interactiva: al hacer doble clic sobre cualquier campo, se habilita la edici\u00f3n in situ, pero no se guardan los cambios en tiempo real en el archivo.</p> <p>Botones disponibles:</p> <ul> <li>Cargar: recarga desde <code>info_devices.txt</code> todos los dispositivos y actualiza la tabla.</li> <li>Modificar: guarda en <code>info_devices.txt</code> los cambios realizados en la tabla.</li> <li>Agregar: abre un formulario para incluir un nuevo dispositivo; solicita:<ul> <li>Distrito  </li> <li>Modelo  </li> <li>Punto de marcaci\u00f3n  </li> <li>IP  </li> <li>Tipo de comunicaci\u00f3n (TCP o UDP)</li> </ul> </li> <li>Activar todo: marca la casilla \"Activo\" para todos los dispositivos listados, de modo que aparezcan y est\u00e9n disponibles en las dem\u00e1s ventanas de acciones.</li> <li>Desactivar todo: desmarca la casilla \"Activo\" para todos los dispositivos listados, de modo que queden ocultos y no se incluyan en las dem\u00e1s acciones.</li> </ul>"},{"location":"USAGE/#reiniciar-dispositivos","title":"Reiniciar dispositivos","text":"<p>Abre una ventana con:</p> <ul> <li> <p>Inputs:</p> <ul> <li>Tiempo de Espera  </li> <li>Reintentos</li> </ul> <p>(Ver Configuraci\u00f3n en acciones principales).</p> </li> <li> <p>Tabla interactiva de dispositivos activos (selecci\u00f3n mediante clic izquierdo).</p> </li> <li>Botones disponibles:<ul> <li>Reiniciar dispositivos: env\u00eda el comando de reinicio a cada dispositivo seleccionado; se muestra:<ul> <li>Barra de progreso verde indicando avance.  </li> <li>Conteo \u201cdispositivos finalizados / total activos\u201d.</li> <li>Al finalizar, ventana emergente con listado de dispositivos cuya conexi\u00f3n fall\u00f3.</li> </ul> </li> <li>Seleccionar todo: marca todos los dispositivos para reinicio.  </li> <li>Deseleccionar todo: desmarca todos.</li> </ul> </li> </ul> <p>Esta acci\u00f3n utiliza las variables del <code>config.ini</code>:</p> <ul> <li><code>threads_pool_max_size</code> </li> <li><code>retry_connection</code> </li> <li><code>timeout</code></li> </ul> <p>(Ver Archivo de configuraci\u00f3n).</p>"},{"location":"USAGE/#probar-conexiones","title":"Probar conexiones","text":"<p>Abre una ventana con:</p> <ul> <li> <p>Inputs:</p> <ul> <li>Tiempo de Espera  </li> <li>Reintentos</li> </ul> <p>(Ver Configuraci\u00f3n en acciones principales).</p> </li> <li> <p>Tabla interactiva de dispositivos activos (selecci\u00f3n mediante clic izquierdo).</p> </li> <li>Botones disponibles:<ul> <li>Probar conexiones: env\u00eda comandos a cada dispositivo seleccionado; despliega:<ul> <li>Barra de progreso verde y conteo \u201cfinalizados / total\u201d.</li> <li>Al completar, la tabla a\u00f1ade las columnas:<ul> <li>Estado de Conexi\u00f3n: \"Conectado\" o \"Error\".  </li> <li>Cant. de Marcaciones: n\u00famero de registros (\"No aplica\" si 0).  </li> <li>N\u00famero de Serie </li> <li>Plataforma </li> <li>Firmware </li> </ul> </li> <li>Coloreado de celdas:<ul> <li>Verde si el valor fue obtenido correctamente.  </li> <li>Gris con leyenda \"No aplica\" si el campo no corresponde.  </li> <li>Rojo si hubo fallo de conexi\u00f3n o de obtenci\u00f3n.</li> </ul> </li> </ul> </li> <li>Seleccionar todo / Deseleccionar todo.</li> </ul> </li> </ul> <p>Esta acci\u00f3n utiliza las variables del <code>config.ini</code>:</p> <ul> <li><code>threads_pool_max_size</code> </li> <li><code>retry_connection</code> </li> <li><code>size_ping_test_connection</code> </li> <li><code>timeout</code></li> </ul> <p>(Ver Archivo de configuraci\u00f3n).</p>"},{"location":"USAGE/#actualizar-hora","title":"Actualizar hora","text":"<p>Abre una ventana con:</p> <ul> <li> <p>Inputs:</p> <ul> <li>Tiempo de Espera  </li> <li>Reintentos</li> </ul> <p>(Ver Configuraci\u00f3n en acciones principales).</p> </li> <li> <p>Tabla interactiva de dispositivos activos (selecci\u00f3n mediante clic izquierdo).</p> </li> <li> <p>Botones disponibles:</p> <ul> <li>Actualizar hora: env\u00eda comando a cada dispositivo seleccionado; muestra barra de progreso.</li> <li> <p>Seleccionar todo / Deseleccionar todo.</p> </li> <li> <p>Al finalizar, la tabla a\u00f1ade:</p> <ul> <li>Estado de Conexi\u00f3n: \"Conectado\" (verde) o \"Error\" (rojo).</li> <li>Estado de Pila: </li> <li>\"Pila funcionando\" (verde)  </li> <li>\"Pila fallando\" (rojo)  </li> <li>\"No aplica\" (gris) si hubo error de conexi\u00f3n.</li> </ul> </li> </ul> </li> </ul> <p>Esta acci\u00f3n utiliza las variables del <code>config.ini</code>:</p> <ul> <li><code>threads_pool_max_size</code> </li> <li><code>retry_connection</code> </li> <li><code>timeout</code></li> </ul> <p>(Ver Archivo de configuraci\u00f3n).</p>"},{"location":"USAGE/#obtener-marcaciones","title":"Obtener marcaciones","text":"<p>Abre una ventana con:</p> <ul> <li> <p>Inputs:</p> <ul> <li>Tiempo de Espera  </li> <li>Reintentos</li> </ul> <p>(Ver Configuraci\u00f3n en acciones principales).</p> </li> <li> <p>Tabla interactiva de dispositivos activos (selecci\u00f3n mediante clic izquierdo).</p> </li> <li>Botones disponibles:<ul> <li>Obtener marcaciones: env\u00eda comandos para descargar marcaciones, sincronizar la hora, actualizar el modelo en el nombre de las carpetas ubicadas en <code>devices/{distrito}/</code>; muestra barra de progreso con conteo.</li> <li>Seleccionar todo / Deseleccionar todo.</li> <li>Reintentar todos / Reintentar fallidos (aparecen si hubo fallos).</li> </ul> </li> </ul> <p>Al terminar, se agrega:</p> <ul> <li>Cant. de Marcaciones: n\u00famero de marcaciones descargadas (verde con cantidad) o \"Conexi\u00f3n fallida\" (rojo).</li> </ul> <p>Gesti\u00f3n de errores de formato:</p> <ul> <li>Dispositivos con registros fuera de rango (m\u00e1s de 3 meses antiguos o fechas futuras al d\u00eda de hoy) mostrar\u00e1n hiperv\u00ednculos a sus archivos.</li> <li>Si \"Eliminar marcaciones\" est\u00e1 activo, permite forzar eliminaci\u00f3n en pr\u00f3xima ejecuci\u00f3n; luego se deshabilita.</li> <li>Si no, solo listar\u00e1 enlaces a archivos afectados.</li> </ul> <p>Archivos de salida diarios: <code>devices/{distrito}/{modelo}-{punto_de_marcacion}/</code> y <code>%ProgramData%/.../Backup/devices/{distrito}/{modelo}-{punto_de_marcacion}/</code> (ver Carpetas generadas).</p>"},{"location":"USAGE/#configuracion-en-acciones-principales","title":"Configuraci\u00f3n en acciones principales","text":"<ul> <li>Tiempo de Espera: modifica <code>timeout</code> (segundos) en <code>config.ini</code>.</li> <li>Reintentos: modifica <code>retry_connection</code> (intentos) en <code>config.ini</code>.</li> </ul>"},{"location":"USAGE/#acciones-de-configuracion-del-menu-contextual","title":"Acciones de configuraci\u00f3n del men\u00fa contextual","text":"<ul> <li>Eliminar marcaciones: edita <code>clear_attendance</code> en <code>config.ini</code>.</li> <li>Iniciar autom\u00e1ticamente: registra programa en inicio del sistema.</li> </ul>"},{"location":"USAGE/#otras-acciones","title":"Otras acciones","text":"<ul> <li>Salir: cierra el programa.</li> </ul>"},{"location":"USAGE/#servicio-reloj-de-asistencias","title":"Servicio Reloj de Asistencias","text":"<p>El servicio se compone de 2 ejecutables: <code>schedulerService.exe</code> y <code>Servicio Reloj de Asistencias.exe</code>.</p> <ul> <li><code>schedulerService.exe</code> es el servicio autom\u00e1tico per se.</li> <li><code>Servicio Reloj de Asistencias.exe</code> es el gestor del servicio. Con \u00e9l, se pueden hacer las acciones tabuladas en la siguiente secci\u00f3n.</li> </ul> <p>Para usar el servicio, ejecutar <code>Servicio Reloj de Asistencias.exe</code>. Para ello, aseg\u00farese de tener en el directorio ra\u00edz donde se encuentran los ejecutables, los archivos <code>config.ini</code> (ver Archivo de configuraci\u00f3n), <code>info_devices.txt</code> y <code>schedule.txt</code> (ver Archivos generados por el usuario).</p>"},{"location":"USAGE/#acciones-principales-del-servicio","title":"Acciones principales del servicio","text":"Acci\u00f3n Descripci\u00f3n Iniciar servicio Arranca el servicio manualmente. Detener servicio Detiene la ejecuci\u00f3n del servicio. Reiniciar servicio Detiene y vuelve a iniciar el servicio. Reinstalar servicio Reinstala el servicio en el sistema. Desinstalar servicio Elimina el servicio del sistema."},{"location":"USAGE/#configuracion-del-servicio","title":"Configuraci\u00f3n del servicio","text":"<ul> <li>Eliminar marcaciones: edita <code>clear_attendance_service</code> en <code>config.ini</code>.</li> <li>Iniciar autom\u00e1ticamente: registra servicio en inicio del sistema.</li> </ul>"},{"location":"USAGE/#comportamiento-del-servicio","title":"Comportamiento del servicio","text":"<ul> <li>Arranca autom\u00e1ticamente al ejecutar el ejecutable.</li> <li>Permanece activo tras cerrar la app, siguiendo <code>schedule.txt</code>.</li> <li>Usa dispositivos activos en <code>info_devices.txt</code>.</li> <li>No elimina marcaciones err\u00f3neas; el programa las procesa en la pr\u00f3xima ejecuci\u00f3n de \u201cObtener marcaciones\u201d.</li> </ul>"},{"location":"USAGE/#carpetas-generadas","title":"Carpetas generadas","text":"Ruta Descripci\u00f3n <code>devices/{distrito}/{modelo}-{punto_de_marcacion}/</code> Marcaciones organizadas por distrito y modelo / punto de marcaci\u00f3n. <code>logs/{a\u00f1o-mes}/</code> Logs mensuales de programa y servicio. <code>%ProgramData%/.../Backup/devices/{distrito}/{modelo}</code> Copia de seguridad de archivos de asistencia."},{"location":"USAGE/#archivos-generados","title":"Archivos generados","text":""},{"location":"USAGE/#por-el-usuario","title":"Por el usuario","text":"<ul> <li>schedule.txt: define horarios de tareas (no modificar t\u00edtulos).</li> </ul> <p><code># Hours for gestionar_marcaciones_dispositivos     ...   # Hours for actualizar_hora_dispositivos     ...</code></p> <ul> <li>info_devices.txt: lista de dispositivos:</li> </ul> <p><code>DISTRITO - MODELO - PUNTO - IP - ID - TCP/UDP - Activado (True/False)</code></p>"},{"location":"USAGE/#por-el-programa-y-el-servicio","title":"Por el programa y el servicio","text":"<ul> <li><code>{name_attendances_file}.txt</code>: archivo global de marcaciones.</li> <li><code>ip_date_file.cro</code>: registros por dispositivo y fecha en <code>devices/{distrito}/{modelo}-{punto_de_marcacion}/</code>.</li> </ul>"},{"location":"USAGE/#logs","title":"Logs","text":"<ul> <li>programa_reloj_de_asistencias_{VERSION}_debug.log: mensajes de depuraci\u00f3n e info.</li> <li>programa_reloj_de_asistencias_{VERSION}_error.log: advertencias y errores.</li> <li>console_log.txt: logs de consola.</li> <li>servicio_reloj_de_asistencias_{VERSION}_debug.txt y _error.txt: logs del servicio.</li> <li>icono_reloj_de_asistencias_{VERSION}_{tipo}.txt: logs del icono del servicio.</li> </ul>"},{"location":"USAGE/#archivo-de-configuracion-configini","title":"Archivo de configuraci\u00f3n <code>config.ini</code>","text":""},{"location":"USAGE/#resumen-de-parametros","title":"Resumen de par\u00e1metros","text":"Secci\u00f3n Par\u00e1metro Tipo Descripci\u00f3n Attendance_status IDs de tipo de marcaci\u00f3n Entero Relaciona ID con tipo de marcaci\u00f3n (face, fingerprint, card). Cpu_config threads_pool_max_size Entero M\u00e1ximo de conexiones paralelas en acciones de red. Device_config clear_attendance Booleano Elimina marcaciones en ejecuci\u00f3n manual. clear_attendance_service Booleano Elimina marcaciones en servicio programado. disable_device Booleano Bloqueo del dispositivo al acceder (no recomendado). Program_config name_attendances_file Cadena Nombre del archivo global de marcaciones. Network_config retry_connection Entero Cantidad de reintentos en operaciones de red. size_ping_test_connection Entero Paquetes enviados en test de conexi\u00f3n. timeout Entero Segundos antes de considerar ca\u00edda de conexi\u00f3n."},{"location":"USAGE/#attendance_status","title":"Attendance_status","text":"<p>Asocia IDs con tipos de marcaci\u00f3n.</p> <p>Ejemplo en <code>config.ini</code>:</p> <pre><code>[Attendance_status]\nstatus_face = 2\nstatus_fingerprint = 1\nstatus_card = 3\n</code></pre>"},{"location":"USAGE/#cpu_config","title":"Cpu_config","text":"<ul> <li><code>threads_pool_max_size</code>: conexiones paralelas.</li> </ul> <p>Ejemplo en <code>config.ini</code>:</p> <pre><code>[Cpu_config]\nthreads_pool_max_size = 50\n</code></pre>"},{"location":"USAGE/#device_config","title":"Device_config","text":"<ul> <li><code>clear_attendance</code>: elimina marcaciones manuales.</li> <li><code>clear_attendance_service</code>: elimina marcaciones en el servicio.</li> <li><code>disable_device</code>: bloquea dispositivo al acceder (no recomendado).</li> </ul> <p>Ejemplo en <code>config.ini</code>:</p> <pre><code>[Device_config]\nclear_attendance = False\nforce_clear_attendance = False\nclear_attendance_service = False\ndisable_device = False\n</code></pre>"},{"location":"USAGE/#program_config","title":"Program_config","text":"<ul> <li><code>name_attendances_file</code>: nombre del archivo global de marcaciones.</li> </ul> <p>Ejemplo en <code>config.ini</code>:</p> <pre><code>[Program_config]\nname_attendances_file = attendances_file\n</code></pre>"},{"location":"USAGE/#network_config","title":"Network_config","text":"<ul> <li><code>retry_connection</code>: reintentos en operaciones de red.</li> <li><code>size_ping_test_connection</code>: paquetes en test de conexi\u00f3n.</li> <li><code>timeout</code>: segundos de espera.</li> </ul> <p>Ejemplo en <code>config.ini</code>:</p> <pre><code>[Network_config]\nretry_connection = 3\nsize_ping_test_connection = 5\ntimeout = 15\n</code></pre> <p>Fin de la documentaci\u00f3n.</p>"}]}