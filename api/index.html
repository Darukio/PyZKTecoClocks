
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="PyZKTecoClocks: GUI for managing ZKTeco clocks, enabling clock time synchronization and attendance data retrieval.
Copyright (C) 2024  Paulo Sebastian Spaciuk (Darukio)
">
      
      
        <meta name="author" content="Paulo Sebastian Spaciuk">
      
      
      
        <link rel="prev" href="../USAGE/">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.12">
    
    
      
        <title>API - PyZKTecoClocks</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2afb09e1.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#referencia-de-la-api" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href=".." title="PyZKTecoClocks" class="md-header__button md-logo" aria-label="PyZKTecoClocks" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            PyZKTecoClocks
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="PyZKTecoClocks" class="md-nav__button md-logo" aria-label="PyZKTecoClocks" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    PyZKTecoClocks
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introducción
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../USAGE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Uso
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#src" class="md-nav__link">
    <span class="md-ellipsis">
      src
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.business_logic" class="md-nav__link">
    <span class="md-ellipsis">
      business_logic
    </span>
  </a>
  
    <nav class="md-nav" aria-label="business_logic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager" class="md-nav__link">
    <span class="md-ellipsis">
      program_manager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="program_manager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.AttendancesManager" class="md-nav__link">
    <span class="md-ellipsis">
      AttendancesManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AttendancesManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.AttendancesManager.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.AttendancesManager.manage_attendances_of_one_device" class="md-nav__link">
    <span class="md-ellipsis">
      manage_attendances_of_one_device
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.AttendancesManager.manage_devices_attendances" class="md-nav__link">
    <span class="md-ellipsis">
      manage_devices_attendances
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.ConnectionsInfo" class="md-nav__link">
    <span class="md-ellipsis">
      ConnectionsInfo
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ConnectionsInfo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.ConnectionsInfo.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.ConnectionsInfo.obtain_connection_info" class="md-nav__link">
    <span class="md-ellipsis">
      obtain_connection_info
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.ConnectionsInfo.obtain_connections_info" class="md-nav__link">
    <span class="md-ellipsis">
      obtain_connections_info
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.HourManager" class="md-nav__link">
    <span class="md-ellipsis">
      HourManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="HourManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.HourManager.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.HourManager.manage_hour_devices" class="md-nav__link">
    <span class="md-ellipsis">
      manage_hour_devices
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.HourManager.update_device_time_of_one_device" class="md-nav__link">
    <span class="md-ellipsis">
      update_device_time_of_one_device
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.ProgressTracker" class="md-nav__link">
    <span class="md-ellipsis">
      ProgressTracker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ProgressTracker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.ProgressTracker.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.ProgressTracker.update" class="md-nav__link">
    <span class="md-ellipsis">
      update
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.RestartManager" class="md-nav__link">
    <span class="md-ellipsis">
      RestartManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RestartManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.RestartManager.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.RestartManager.restart_device" class="md-nav__link">
    <span class="md-ellipsis">
      restart_device
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.RestartManager.restart_devices" class="md-nav__link">
    <span class="md-ellipsis">
      restart_devices
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.ui" class="md-nav__link">
    <span class="md-ellipsis">
      ui
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ui">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.base_dialog" class="md-nav__link">
    <span class="md-ellipsis">
      base_dialog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="base_dialog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.base_dialog.BaseDialog" class="md-nav__link">
    <span class="md-ellipsis">
      BaseDialog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseDialog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.base_dialog.BaseDialog.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.base_dialog.BaseDialog.adjust_size_to_table" class="md-nav__link">
    <span class="md-ellipsis">
      adjust_size_to_table
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.base_dialog.BaseDialog.center_window" class="md-nav__link">
    <span class="md-ellipsis">
      center_window
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.base_select_devices_dialog" class="md-nav__link">
    <span class="md-ellipsis">
      base_select_devices_dialog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="base_select_devices_dialog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.base_select_devices_dialog.SelectDevicesDialog" class="md-nav__link">
    <span class="md-ellipsis">
      SelectDevicesDialog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SelectDevicesDialog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.base_select_devices_dialog.SelectDevicesDialog.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.base_select_devices_dialog.SelectDevicesDialog.cleanup_thread" class="md-nav__link">
    <span class="md-ellipsis">
      cleanup_thread
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.base_select_devices_dialog.SelectDevicesDialog.column_exists" class="md-nav__link">
    <span class="md-ellipsis">
      column_exists
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.base_select_devices_dialog.SelectDevicesDialog.deselect_all_rows" class="md-nav__link">
    <span class="md-ellipsis">
      deselect_all_rows
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.base_select_devices_dialog.SelectDevicesDialog.ensure_column_exists" class="md-nav__link">
    <span class="md-ellipsis">
      ensure_column_exists
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.base_select_devices_dialog.SelectDevicesDialog.get_column_number" class="md-nav__link">
    <span class="md-ellipsis">
      get_column_number
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.base_select_devices_dialog.SelectDevicesDialog.init_ui" class="md-nav__link">
    <span class="md-ellipsis">
      init_ui
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.base_select_devices_dialog.SelectDevicesDialog.load_data" class="md-nav__link">
    <span class="md-ellipsis">
      load_data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.base_select_devices_dialog.SelectDevicesDialog.load_data_into_table" class="md-nav__link">
    <span class="md-ellipsis">
      load_data_into_table
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.base_select_devices_dialog.SelectDevicesDialog.op_terminate" class="md-nav__link">
    <span class="md-ellipsis">
      op_terminate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.base_select_devices_dialog.SelectDevicesDialog.operation_with_selected_ips" class="md-nav__link">
    <span class="md-ellipsis">
      operation_with_selected_ips
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.base_select_devices_dialog.SelectDevicesDialog.select_all_rows" class="md-nav__link">
    <span class="md-ellipsis">
      select_all_rows
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.base_select_devices_dialog.SelectDevicesDialog.update_progress" class="md-nav__link">
    <span class="md-ellipsis">
      update_progress
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager" class="md-nav__link">
    <span class="md-ellipsis">
      icon_manager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="icon_manager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager.MainWindow" class="md-nav__link">
    <span class="md-ellipsis">
      MainWindow
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MainWindow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager.MainWindow.__create_action" class="md-nav__link">
    <span class="md-ellipsis">
      __create_action
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager.MainWindow.__create_tray_icon" class="md-nav__link">
    <span class="md-ellipsis">
      __create_tray_icon
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager.MainWindow.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager.MainWindow.__init_ui" class="md-nav__link">
    <span class="md-ellipsis">
      __init_ui
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager.MainWindow.__opt_exit_icon" class="md-nav__link">
    <span class="md-ellipsis">
      __opt_exit_icon
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager.MainWindow.__opt_fetch_devices_attendances" class="md-nav__link">
    <span class="md-ellipsis">
      __opt_fetch_devices_attendances
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager.MainWindow.__opt_modify_devices" class="md-nav__link">
    <span class="md-ellipsis">
      __opt_modify_devices
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager.MainWindow.__opt_restart_devices" class="md-nav__link">
    <span class="md-ellipsis">
      __opt_restart_devices
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager.MainWindow.__opt_show_logs" class="md-nav__link">
    <span class="md-ellipsis">
      __opt_show_logs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager.MainWindow.__opt_test_connections" class="md-nav__link">
    <span class="md-ellipsis">
      __opt_test_connections
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager.MainWindow.__opt_toggle_checkbox_automatic_init" class="md-nav__link">
    <span class="md-ellipsis">
      __opt_toggle_checkbox_automatic_init
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager.MainWindow.__opt_toggle_checkbox_clear_attendance" class="md-nav__link">
    <span class="md-ellipsis">
      __opt_toggle_checkbox_clear_attendance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager.MainWindow.__opt_update_devices_time" class="md-nav__link">
    <span class="md-ellipsis">
      __opt_update_devices_time
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager.MainWindow.__show_message_information" class="md-nav__link">
    <span class="md-ellipsis">
      __show_message_information
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager.MainWindow.start_timer" class="md-nav__link">
    <span class="md-ellipsis">
      start_timer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager.MainWindow.stop_timer" class="md-nav__link">
    <span class="md-ellipsis">
      stop_timer
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.logs_dialog" class="md-nav__link">
    <span class="md-ellipsis">
      logs_dialog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="logs_dialog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.logs_dialog.LogsDialog" class="md-nav__link">
    <span class="md-ellipsis">
      LogsDialog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LogsDialog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.logs_dialog.LogsDialog.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.logs_dialog.LogsDialog.get_error_logs" class="md-nav__link">
    <span class="md-ellipsis">
      get_error_logs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.logs_dialog.LogsDialog.init_ui" class="md-nav__link">
    <span class="md-ellipsis">
      init_ui
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.logs_dialog.LogsDialog.load_logs" class="md-nav__link">
    <span class="md-ellipsis">
      load_logs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.logs_dialog.LogsDialog.toggle_filter_visibility" class="md-nav__link">
    <span class="md-ellipsis">
      toggle_filter_visibility
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.message_box" class="md-nav__link">
    <span class="md-ellipsis">
      message_box
    </span>
  </a>
  
    <nav class="md-nav" aria-label="message_box">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.message_box.MessageBox" class="md-nav__link">
    <span class="md-ellipsis">
      MessageBox
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MessageBox">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.message_box.MessageBox.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.modify_device_dialog" class="md-nav__link">
    <span class="md-ellipsis">
      modify_device_dialog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="modify_device_dialog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.modify_device_dialog.AddDevicesDialog" class="md-nav__link">
    <span class="md-ellipsis">
      AddDevicesDialog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AddDevicesDialog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.modify_device_dialog.AddDevicesDialog.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.modify_device_dialog.AddDevicesDialog.get_data" class="md-nav__link">
    <span class="md-ellipsis">
      get_data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.modify_device_dialog.AddDevicesDialog.init_ui" class="md-nav__link">
    <span class="md-ellipsis">
      init_ui
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.modify_device_dialog.AddDevicesDialog.on_combobox_changed" class="md-nav__link">
    <span class="md-ellipsis">
      on_combobox_changed
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.modify_device_dialog.ModifyDevicesDialog" class="md-nav__link">
    <span class="md-ellipsis">
      ModifyDevicesDialog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ModifyDevicesDialog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.modify_device_dialog.ModifyDevicesDialog.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.modify_device_dialog.ModifyDevicesDialog.activate_all" class="md-nav__link">
    <span class="md-ellipsis">
      activate_all
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.modify_device_dialog.ModifyDevicesDialog.add_device" class="md-nav__link">
    <span class="md-ellipsis">
      add_device
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.modify_device_dialog.ModifyDevicesDialog.deactivate_all" class="md-nav__link">
    <span class="md-ellipsis">
      deactivate_all
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.modify_device_dialog.ModifyDevicesDialog.init_ui" class="md-nav__link">
    <span class="md-ellipsis">
      init_ui
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.modify_device_dialog.ModifyDevicesDialog.load_data" class="md-nav__link">
    <span class="md-ellipsis">
      load_data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.modify_device_dialog.ModifyDevicesDialog.load_data_and_show" class="md-nav__link">
    <span class="md-ellipsis">
      load_data_and_show
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.modify_device_dialog.ModifyDevicesDialog.load_data_into_table" class="md-nav__link">
    <span class="md-ellipsis">
      load_data_into_table
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.modify_device_dialog.ModifyDevicesDialog.save_data" class="md-nav__link">
    <span class="md-ellipsis">
      save_data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.obtain_attendances_devices_dialog" class="md-nav__link">
    <span class="md-ellipsis">
      obtain_attendances_devices_dialog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="obtain_attendances_devices_dialog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog" class="md-nav__link">
    <span class="md-ellipsis">
      ObtainAttendancesDevicesDialog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ObtainAttendancesDevicesDialog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.check_attendance_files" class="md-nav__link">
    <span class="md-ellipsis">
      check_attendance_files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.extract_date" class="md-nav__link">
    <span class="md-ellipsis">
      extract_date
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.extract_ip" class="md-nav__link">
    <span class="md-ellipsis">
      extract_ip
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.format_file_uri" class="md-nav__link">
    <span class="md-ellipsis">
      format_file_uri
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.init_ui" class="md-nav__link">
    <span class="md-ellipsis">
      init_ui
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.on_retry_failed_connection_clicked" class="md-nav__link">
    <span class="md-ellipsis">
      on_retry_failed_connection_clicked
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.op_terminate" class="md-nav__link">
    <span class="md-ellipsis">
      op_terminate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.operation_with_selected_ips" class="md-nav__link">
    <span class="md-ellipsis">
      operation_with_selected_ips
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.parse_attendance" class="md-nav__link">
    <span class="md-ellipsis">
      parse_attendance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.show_btn_retry_failed_connection" class="md-nav__link">
    <span class="md-ellipsis">
      show_btn_retry_failed_connection
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.operation_thread" class="md-nav__link">
    <span class="md-ellipsis">
      operation_thread
    </span>
  </a>
  
    <nav class="md-nav" aria-label="operation_thread">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.operation_thread.OperationThread" class="md-nav__link">
    <span class="md-ellipsis">
      OperationThread
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OperationThread">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.operation_thread.OperationThread.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.operation_thread.OperationThread.emit_progress" class="md-nav__link">
    <span class="md-ellipsis">
      emit_progress
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.operation_thread.OperationThread.run" class="md-nav__link">
    <span class="md-ellipsis">
      run
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.ping_devices_dialog" class="md-nav__link">
    <span class="md-ellipsis">
      ping_devices_dialog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ping_devices_dialog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.ping_devices_dialog.PingDevicesDialog" class="md-nav__link">
    <span class="md-ellipsis">
      PingDevicesDialog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PingDevicesDialog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.ping_devices_dialog.PingDevicesDialog.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.ping_devices_dialog.PingDevicesDialog.init_ui" class="md-nav__link">
    <span class="md-ellipsis">
      init_ui
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.ping_devices_dialog.PingDevicesDialog.op_terminate" class="md-nav__link">
    <span class="md-ellipsis">
      op_terminate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.restart_devices_dialog" class="md-nav__link">
    <span class="md-ellipsis">
      restart_devices_dialog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="restart_devices_dialog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.restart_devices_dialog.RestartDevicesDialog" class="md-nav__link">
    <span class="md-ellipsis">
      RestartDevicesDialog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RestartDevicesDialog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.restart_devices_dialog.RestartDevicesDialog.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.restart_devices_dialog.RestartDevicesDialog.init_ui" class="md-nav__link">
    <span class="md-ellipsis">
      init_ui
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.restart_devices_dialog.RestartDevicesDialog.op_terminate" class="md-nav__link">
    <span class="md-ellipsis">
      op_terminate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.update_time_device_dialog" class="md-nav__link">
    <span class="md-ellipsis">
      update_time_device_dialog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="update_time_device_dialog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.update_time_device_dialog.UpdateTimeDeviceDialog" class="md-nav__link">
    <span class="md-ellipsis">
      UpdateTimeDeviceDialog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="UpdateTimeDeviceDialog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.update_time_device_dialog.UpdateTimeDeviceDialog.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.update_time_device_dialog.UpdateTimeDeviceDialog.init_ui" class="md-nav__link">
    <span class="md-ellipsis">
      init_ui
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.update_time_device_dialog.UpdateTimeDeviceDialog.load_device_info" class="md-nav__link">
    <span class="md-ellipsis">
      load_device_info
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.update_time_device_dialog.UpdateTimeDeviceDialog.op_terminate" class="md-nav__link">
    <span class="md-ellipsis">
      op_terminate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#src" class="md-nav__link">
    <span class="md-ellipsis">
      src
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.business_logic" class="md-nav__link">
    <span class="md-ellipsis">
      business_logic
    </span>
  </a>
  
    <nav class="md-nav" aria-label="business_logic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager" class="md-nav__link">
    <span class="md-ellipsis">
      program_manager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="program_manager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.AttendancesManager" class="md-nav__link">
    <span class="md-ellipsis">
      AttendancesManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AttendancesManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.AttendancesManager.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.AttendancesManager.manage_attendances_of_one_device" class="md-nav__link">
    <span class="md-ellipsis">
      manage_attendances_of_one_device
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.AttendancesManager.manage_devices_attendances" class="md-nav__link">
    <span class="md-ellipsis">
      manage_devices_attendances
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.ConnectionsInfo" class="md-nav__link">
    <span class="md-ellipsis">
      ConnectionsInfo
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ConnectionsInfo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.ConnectionsInfo.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.ConnectionsInfo.obtain_connection_info" class="md-nav__link">
    <span class="md-ellipsis">
      obtain_connection_info
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.ConnectionsInfo.obtain_connections_info" class="md-nav__link">
    <span class="md-ellipsis">
      obtain_connections_info
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.HourManager" class="md-nav__link">
    <span class="md-ellipsis">
      HourManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="HourManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.HourManager.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.HourManager.manage_hour_devices" class="md-nav__link">
    <span class="md-ellipsis">
      manage_hour_devices
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.HourManager.update_device_time_of_one_device" class="md-nav__link">
    <span class="md-ellipsis">
      update_device_time_of_one_device
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.ProgressTracker" class="md-nav__link">
    <span class="md-ellipsis">
      ProgressTracker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ProgressTracker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.ProgressTracker.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.ProgressTracker.update" class="md-nav__link">
    <span class="md-ellipsis">
      update
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.RestartManager" class="md-nav__link">
    <span class="md-ellipsis">
      RestartManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RestartManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.RestartManager.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.RestartManager.restart_device" class="md-nav__link">
    <span class="md-ellipsis">
      restart_device
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.business_logic.program_manager.RestartManager.restart_devices" class="md-nav__link">
    <span class="md-ellipsis">
      restart_devices
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.ui" class="md-nav__link">
    <span class="md-ellipsis">
      ui
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ui">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.base_dialog" class="md-nav__link">
    <span class="md-ellipsis">
      base_dialog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="base_dialog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.base_dialog.BaseDialog" class="md-nav__link">
    <span class="md-ellipsis">
      BaseDialog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseDialog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.base_dialog.BaseDialog.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.base_dialog.BaseDialog.adjust_size_to_table" class="md-nav__link">
    <span class="md-ellipsis">
      adjust_size_to_table
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.base_dialog.BaseDialog.center_window" class="md-nav__link">
    <span class="md-ellipsis">
      center_window
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.base_select_devices_dialog" class="md-nav__link">
    <span class="md-ellipsis">
      base_select_devices_dialog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="base_select_devices_dialog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.base_select_devices_dialog.SelectDevicesDialog" class="md-nav__link">
    <span class="md-ellipsis">
      SelectDevicesDialog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SelectDevicesDialog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.base_select_devices_dialog.SelectDevicesDialog.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.base_select_devices_dialog.SelectDevicesDialog.cleanup_thread" class="md-nav__link">
    <span class="md-ellipsis">
      cleanup_thread
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.base_select_devices_dialog.SelectDevicesDialog.column_exists" class="md-nav__link">
    <span class="md-ellipsis">
      column_exists
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.base_select_devices_dialog.SelectDevicesDialog.deselect_all_rows" class="md-nav__link">
    <span class="md-ellipsis">
      deselect_all_rows
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.base_select_devices_dialog.SelectDevicesDialog.ensure_column_exists" class="md-nav__link">
    <span class="md-ellipsis">
      ensure_column_exists
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.base_select_devices_dialog.SelectDevicesDialog.get_column_number" class="md-nav__link">
    <span class="md-ellipsis">
      get_column_number
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.base_select_devices_dialog.SelectDevicesDialog.init_ui" class="md-nav__link">
    <span class="md-ellipsis">
      init_ui
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.base_select_devices_dialog.SelectDevicesDialog.load_data" class="md-nav__link">
    <span class="md-ellipsis">
      load_data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.base_select_devices_dialog.SelectDevicesDialog.load_data_into_table" class="md-nav__link">
    <span class="md-ellipsis">
      load_data_into_table
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.base_select_devices_dialog.SelectDevicesDialog.op_terminate" class="md-nav__link">
    <span class="md-ellipsis">
      op_terminate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.base_select_devices_dialog.SelectDevicesDialog.operation_with_selected_ips" class="md-nav__link">
    <span class="md-ellipsis">
      operation_with_selected_ips
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.base_select_devices_dialog.SelectDevicesDialog.select_all_rows" class="md-nav__link">
    <span class="md-ellipsis">
      select_all_rows
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.base_select_devices_dialog.SelectDevicesDialog.update_progress" class="md-nav__link">
    <span class="md-ellipsis">
      update_progress
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager" class="md-nav__link">
    <span class="md-ellipsis">
      icon_manager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="icon_manager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager.MainWindow" class="md-nav__link">
    <span class="md-ellipsis">
      MainWindow
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MainWindow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager.MainWindow.__create_action" class="md-nav__link">
    <span class="md-ellipsis">
      __create_action
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager.MainWindow.__create_tray_icon" class="md-nav__link">
    <span class="md-ellipsis">
      __create_tray_icon
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager.MainWindow.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager.MainWindow.__init_ui" class="md-nav__link">
    <span class="md-ellipsis">
      __init_ui
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager.MainWindow.__opt_exit_icon" class="md-nav__link">
    <span class="md-ellipsis">
      __opt_exit_icon
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager.MainWindow.__opt_fetch_devices_attendances" class="md-nav__link">
    <span class="md-ellipsis">
      __opt_fetch_devices_attendances
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager.MainWindow.__opt_modify_devices" class="md-nav__link">
    <span class="md-ellipsis">
      __opt_modify_devices
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager.MainWindow.__opt_restart_devices" class="md-nav__link">
    <span class="md-ellipsis">
      __opt_restart_devices
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager.MainWindow.__opt_show_logs" class="md-nav__link">
    <span class="md-ellipsis">
      __opt_show_logs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager.MainWindow.__opt_test_connections" class="md-nav__link">
    <span class="md-ellipsis">
      __opt_test_connections
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager.MainWindow.__opt_toggle_checkbox_automatic_init" class="md-nav__link">
    <span class="md-ellipsis">
      __opt_toggle_checkbox_automatic_init
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager.MainWindow.__opt_toggle_checkbox_clear_attendance" class="md-nav__link">
    <span class="md-ellipsis">
      __opt_toggle_checkbox_clear_attendance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager.MainWindow.__opt_update_devices_time" class="md-nav__link">
    <span class="md-ellipsis">
      __opt_update_devices_time
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager.MainWindow.__show_message_information" class="md-nav__link">
    <span class="md-ellipsis">
      __show_message_information
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager.MainWindow.start_timer" class="md-nav__link">
    <span class="md-ellipsis">
      start_timer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.icon_manager.MainWindow.stop_timer" class="md-nav__link">
    <span class="md-ellipsis">
      stop_timer
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.logs_dialog" class="md-nav__link">
    <span class="md-ellipsis">
      logs_dialog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="logs_dialog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.logs_dialog.LogsDialog" class="md-nav__link">
    <span class="md-ellipsis">
      LogsDialog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LogsDialog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.logs_dialog.LogsDialog.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.logs_dialog.LogsDialog.get_error_logs" class="md-nav__link">
    <span class="md-ellipsis">
      get_error_logs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.logs_dialog.LogsDialog.init_ui" class="md-nav__link">
    <span class="md-ellipsis">
      init_ui
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.logs_dialog.LogsDialog.load_logs" class="md-nav__link">
    <span class="md-ellipsis">
      load_logs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.logs_dialog.LogsDialog.toggle_filter_visibility" class="md-nav__link">
    <span class="md-ellipsis">
      toggle_filter_visibility
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.message_box" class="md-nav__link">
    <span class="md-ellipsis">
      message_box
    </span>
  </a>
  
    <nav class="md-nav" aria-label="message_box">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.message_box.MessageBox" class="md-nav__link">
    <span class="md-ellipsis">
      MessageBox
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MessageBox">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.message_box.MessageBox.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.modify_device_dialog" class="md-nav__link">
    <span class="md-ellipsis">
      modify_device_dialog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="modify_device_dialog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.modify_device_dialog.AddDevicesDialog" class="md-nav__link">
    <span class="md-ellipsis">
      AddDevicesDialog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AddDevicesDialog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.modify_device_dialog.AddDevicesDialog.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.modify_device_dialog.AddDevicesDialog.get_data" class="md-nav__link">
    <span class="md-ellipsis">
      get_data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.modify_device_dialog.AddDevicesDialog.init_ui" class="md-nav__link">
    <span class="md-ellipsis">
      init_ui
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.modify_device_dialog.AddDevicesDialog.on_combobox_changed" class="md-nav__link">
    <span class="md-ellipsis">
      on_combobox_changed
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.modify_device_dialog.ModifyDevicesDialog" class="md-nav__link">
    <span class="md-ellipsis">
      ModifyDevicesDialog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ModifyDevicesDialog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.modify_device_dialog.ModifyDevicesDialog.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.modify_device_dialog.ModifyDevicesDialog.activate_all" class="md-nav__link">
    <span class="md-ellipsis">
      activate_all
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.modify_device_dialog.ModifyDevicesDialog.add_device" class="md-nav__link">
    <span class="md-ellipsis">
      add_device
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.modify_device_dialog.ModifyDevicesDialog.deactivate_all" class="md-nav__link">
    <span class="md-ellipsis">
      deactivate_all
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.modify_device_dialog.ModifyDevicesDialog.init_ui" class="md-nav__link">
    <span class="md-ellipsis">
      init_ui
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.modify_device_dialog.ModifyDevicesDialog.load_data" class="md-nav__link">
    <span class="md-ellipsis">
      load_data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.modify_device_dialog.ModifyDevicesDialog.load_data_and_show" class="md-nav__link">
    <span class="md-ellipsis">
      load_data_and_show
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.modify_device_dialog.ModifyDevicesDialog.load_data_into_table" class="md-nav__link">
    <span class="md-ellipsis">
      load_data_into_table
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.modify_device_dialog.ModifyDevicesDialog.save_data" class="md-nav__link">
    <span class="md-ellipsis">
      save_data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.obtain_attendances_devices_dialog" class="md-nav__link">
    <span class="md-ellipsis">
      obtain_attendances_devices_dialog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="obtain_attendances_devices_dialog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog" class="md-nav__link">
    <span class="md-ellipsis">
      ObtainAttendancesDevicesDialog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ObtainAttendancesDevicesDialog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.check_attendance_files" class="md-nav__link">
    <span class="md-ellipsis">
      check_attendance_files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.extract_date" class="md-nav__link">
    <span class="md-ellipsis">
      extract_date
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.extract_ip" class="md-nav__link">
    <span class="md-ellipsis">
      extract_ip
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.format_file_uri" class="md-nav__link">
    <span class="md-ellipsis">
      format_file_uri
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.init_ui" class="md-nav__link">
    <span class="md-ellipsis">
      init_ui
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.on_retry_failed_connection_clicked" class="md-nav__link">
    <span class="md-ellipsis">
      on_retry_failed_connection_clicked
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.op_terminate" class="md-nav__link">
    <span class="md-ellipsis">
      op_terminate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.operation_with_selected_ips" class="md-nav__link">
    <span class="md-ellipsis">
      operation_with_selected_ips
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.parse_attendance" class="md-nav__link">
    <span class="md-ellipsis">
      parse_attendance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.show_btn_retry_failed_connection" class="md-nav__link">
    <span class="md-ellipsis">
      show_btn_retry_failed_connection
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.operation_thread" class="md-nav__link">
    <span class="md-ellipsis">
      operation_thread
    </span>
  </a>
  
    <nav class="md-nav" aria-label="operation_thread">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.operation_thread.OperationThread" class="md-nav__link">
    <span class="md-ellipsis">
      OperationThread
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OperationThread">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.operation_thread.OperationThread.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.operation_thread.OperationThread.emit_progress" class="md-nav__link">
    <span class="md-ellipsis">
      emit_progress
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.operation_thread.OperationThread.run" class="md-nav__link">
    <span class="md-ellipsis">
      run
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.ping_devices_dialog" class="md-nav__link">
    <span class="md-ellipsis">
      ping_devices_dialog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ping_devices_dialog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.ping_devices_dialog.PingDevicesDialog" class="md-nav__link">
    <span class="md-ellipsis">
      PingDevicesDialog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PingDevicesDialog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.ping_devices_dialog.PingDevicesDialog.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.ping_devices_dialog.PingDevicesDialog.init_ui" class="md-nav__link">
    <span class="md-ellipsis">
      init_ui
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.ping_devices_dialog.PingDevicesDialog.op_terminate" class="md-nav__link">
    <span class="md-ellipsis">
      op_terminate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.restart_devices_dialog" class="md-nav__link">
    <span class="md-ellipsis">
      restart_devices_dialog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="restart_devices_dialog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.restart_devices_dialog.RestartDevicesDialog" class="md-nav__link">
    <span class="md-ellipsis">
      RestartDevicesDialog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RestartDevicesDialog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.restart_devices_dialog.RestartDevicesDialog.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.restart_devices_dialog.RestartDevicesDialog.init_ui" class="md-nav__link">
    <span class="md-ellipsis">
      init_ui
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.restart_devices_dialog.RestartDevicesDialog.op_terminate" class="md-nav__link">
    <span class="md-ellipsis">
      op_terminate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.update_time_device_dialog" class="md-nav__link">
    <span class="md-ellipsis">
      update_time_device_dialog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="update_time_device_dialog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.update_time_device_dialog.UpdateTimeDeviceDialog" class="md-nav__link">
    <span class="md-ellipsis">
      UpdateTimeDeviceDialog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="UpdateTimeDeviceDialog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.ui.update_time_device_dialog.UpdateTimeDeviceDialog.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.update_time_device_dialog.UpdateTimeDeviceDialog.init_ui" class="md-nav__link">
    <span class="md-ellipsis">
      init_ui
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.update_time_device_dialog.UpdateTimeDeviceDialog.load_device_info" class="md-nav__link">
    <span class="md-ellipsis">
      load_device_info
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.ui.update_time_device_dialog.UpdateTimeDeviceDialog.op_terminate" class="md-nav__link">
    <span class="md-ellipsis">
      op_terminate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="referencia-de-la-api">Referencia de la API</h1>
<blockquote>
<p>⚠️ <strong>Nota / Note:</strong><br />
Esta página está disponible <em>solo en Inglés</em> temporalmente.
This page is currently available <em>in English only</em>.</p>
<p>Proyecto compatible con Eventlet y GEvent.</p>
</blockquote>


<div class="doc doc-object doc-module">



<a id="src"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">










<div class="doc doc-object doc-module">



<h2 id="src.business_logic" class="doc doc-heading">
            <code>business_logic</code>


</h2>

    <div class="doc doc-contents ">









  <div class="doc doc-children">










<div class="doc doc-object doc-module">



<h3 id="src.business_logic.program_manager" class="doc doc-heading">
            <code>program_manager</code>


</h3>

    <div class="doc doc-contents ">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h4 id="src.business_logic.program_manager.AttendancesManager" class="doc doc-heading">
            <code>AttendancesManager</code>


</h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="src.common.business_logic.attendances_manager.AttendancesManagerBase">AttendancesManagerBase</span></code></p>








              <details class="quote">
                <summary>Source code in <code>src\business_logic\program_manager.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AttendancesManager</span><span class="p">(</span><span class="n">AttendancesManagerBase</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the ProgramManager instance.</span>

<span class="sd">        This constructor sets up the initial state of the ProgramManager by</span>
<span class="sd">        creating a new instance of SharedState and passing it to the parent</span>
<span class="sd">        class initializer.</span>

<span class="sd">        Attributes:</span>
<span class="sd">            state (SharedState): The shared state object used to manage</span>
<span class="sd">            program-wide data and operations.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">SharedState</span><span class="p">()</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">manage_devices_attendances</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">selected_ips</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">emit_progress</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Manages the attendance records for the specified devices.</span>
<span class="sd">        This method processes attendance data for the devices with the given IPs.</span>
<span class="sd">        It also handles configuration settings related to clearing attendance data</span>
<span class="sd">        and updates the configuration file if necessary.</span>

<span class="sd">        Args:</span>
<span class="sd">            selected_ips (list[str]): A list of IP addresses of the devices to manage.</span>
<span class="sd">            emit_progress (Callable, optional): A callable function to emit progress updates. Defaults to None.</span>

<span class="sd">        Returns:</span>
<span class="sd">            (int): The count of attendances processed.</span>

<span class="sd">        Side Effects:</span>
<span class="sd">            - Reads configuration settings from &#39;config.ini&#39;.</span>
<span class="sd">            - Resets the internal state before processing.</span>
<span class="sd">            - Updates the &#39;force_clear_attendance&#39; setting in &#39;config.ini&#39; if it was set to True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit_progress</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="n">emit_progress</span>
        <span class="n">config</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">find_root_directory</span><span class="p">(),</span> <span class="s1">&#39;config.ini&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear_attendance</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">getboolean</span><span class="p">(</span><span class="s1">&#39;Device_config&#39;</span><span class="p">,</span> <span class="s1">&#39;clear_attendance&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">force_clear_attendance</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">getboolean</span><span class="p">(</span><span class="s1">&#39;Device_config&#39;</span><span class="p">,</span> <span class="s1">&#39;force_clear_attendance&#39;</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;force_clear_attendance: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">force_clear_attendance</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
        <span class="n">attendances_count</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">manage_devices_attendances</span><span class="p">(</span><span class="n">selected_ips</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">force_clear_attendance</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">force_clear_attendance</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">config</span><span class="p">[</span><span class="s1">&#39;Device_config&#39;</span><span class="p">][</span><span class="s1">&#39;force_clear_attendance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;False&#39;</span>

            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;config.ini&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">configfile</span><span class="p">:</span>
                <span class="n">config</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">configfile</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">attendances_count</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">manage_attendances_of_one_device</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device</span><span class="p">:</span> <span class="n">Device</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Manages the attendance data for a single device.</span>
<span class="sd">        This method handles the connection to a device, retrieves attendance data, processes it,</span>
<span class="sd">        and updates the device&#39;s state and attendance records. It also manages error handling</span>
<span class="sd">        and ensures proper cleanup of resources.</span>

<span class="sd">        Args:</span>
<span class="sd">            device (Device): The device object representing the attendance device to be managed.</span>

<span class="sd">        Workflow:</span>
<span class="sd">            1. Establishes a connection to the device using `ConnectionManager`.</span>
<span class="sd">            2. Retrieves attendance data from the device.</span>
<span class="sd">            3. Formats the attendance data and handles any errors during formatting.</span>
<span class="sd">            4. Clears attendance data on the device based on the `clear_attendance` flag.</span>
<span class="sd">            5. Updates the device&#39;s model name if possible.</span>
<span class="sd">            6. Processes individual and global attendance records.</span>
<span class="sd">            7. Synchronizes the device&#39;s time and handles time-related errors.</span>
<span class="sd">            8. Updates the attendance count for the device in a shared dictionary.</span>
<span class="sd">            9. Ensures proper disconnection from the device and updates progress tracking.</span>

<span class="sd">        Exceptions:</span>
<span class="sd">            - Handles `NetworkError` and `ObtainAttendancesError` during connection and data retrieval.</span>
<span class="sd">            - Raises `ConnectionFailedError` if the connection to the device fails.</span>
<span class="sd">            - Catches and re-raises other exceptions as `BaseError` with a specific error code.</span>
<span class="sd">            - Handles time synchronization errors such as `OutdatedTimeError` and updates the battery status.</span>

<span class="sd">        Logging:</span>
<span class="sd">            - Logs debug information for connection initiation, attendance processing, and cleanup.</span>
<span class="sd">            - Logs errors and warnings for failed connections and other issues.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Iniciando </span><span class="si">{</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">conn_manager</span> <span class="o">=</span> <span class="n">ConnectionManager</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">,</span> <span class="mi">4370</span><span class="p">,</span> <span class="n">device</span><span class="o">.</span><span class="n">communication</span><span class="p">)</span>
                <span class="c1">#import time</span>
                <span class="c1">#start_time = time.time()</span>
                <span class="n">conn_manager</span><span class="o">.</span><span class="n">connect_with_retry</span><span class="p">()</span>
                <span class="c1">#end_time = time.time()</span>
                <span class="c1">#logging.debug(f&#39;{device.ip} - Tiempo de conexión total: {(end_time - start_time):2f}&#39;)</span>
                <span class="n">attendances</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Attendance</span><span class="p">]</span> <span class="o">=</span> <span class="n">conn_manager</span><span class="o">.</span><span class="n">get_attendances</span><span class="p">()</span>
                <span class="c1">#logging.info(f&#39;{device.ip} - PREFORMATEO - Longitud marcaciones: {len(attendances)} - Marcaciones: {attendances}&#39;)</span>
                <span class="n">attendances</span><span class="p">,</span> <span class="n">attendances_with_error</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_attendances</span><span class="p">(</span><span class="n">attendances</span><span class="p">,</span> <span class="n">device</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">attendances_with_error</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">force_clear_attendance</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">clear_attendance</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;No se eliminaran las marcaciones correspondientes al dispositivo </span><span class="si">{</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="c1">#logging.info(f&#39;{device.ip} - POSTFORMATEO - Longitud marcaciones: {len(attendances)} - Marcaciones: {attendances}&#39;)</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;clear_attendance: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">clear_attendance</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">conn_manager</span><span class="o">.</span><span class="n">clear_attendances</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">clear_attendance</span><span class="p">)</span>
            <span class="k">except</span> <span class="p">(</span><span class="n">NetworkError</span><span class="p">,</span> <span class="n">ObtainAttendancesError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">attendances_count_devices</span><span class="p">[</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="s2">&quot;connection failed&quot;</span><span class="p">:</span> <span class="kc">True</span>
                    <span class="p">}</span>
                <span class="k">raise</span> <span class="n">ConnectionFailedError</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">model_name</span><span class="p">,</span> <span class="n">device</span><span class="o">.</span><span class="n">point</span><span class="p">,</span> <span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">device</span><span class="o">.</span><span class="n">model_name</span> <span class="o">=</span> <span class="n">conn_manager</span><span class="o">.</span><span class="n">update_device_name</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">pass</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">manage_individual_attendances</span><span class="p">(</span><span class="n">device</span><span class="p">,</span> <span class="n">attendances</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">manage_global_attendances</span><span class="p">(</span><span class="n">attendances</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">conn_manager</span><span class="o">.</span><span class="n">update_time</span><span class="p">()</span>
            <span class="k">except</span> <span class="n">NetworkError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">NetworkError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">device</span><span class="o">.</span><span class="n">model_name</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">device</span><span class="o">.</span><span class="n">point</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">OutdatedTimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">HourManager</span><span class="p">()</span><span class="o">.</span><span class="n">update_battery_status</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">)</span>
                <span class="n">BatteryFailingError</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">model_name</span><span class="p">,</span> <span class="n">device</span><span class="o">.</span><span class="n">point</span><span class="p">,</span> <span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">)</span>

            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">attendances_count_devices</span><span class="p">[</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;attendance count&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">attendances</span><span class="p">))</span>
                <span class="p">}</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">conn_manager</span><span class="o">.</span><span class="n">is_connected</span><span class="p">():</span>
                <span class="n">conn_manager</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
            <span class="n">ProgressTracker</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">emit_progress</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Finalizando </span><span class="si">{</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h5 id="src.business_logic.program_manager.AttendancesManager.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Initializes the ProgramManager instance.</p>
<p>This constructor sets up the initial state of the ProgramManager by
creating a new instance of SharedState and passing it to the parent
class initializer.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="src.business_logic.program_manager.AttendancesManager.__init__.state">state</span></code></td>
            <td>
                  <code><span title="src.common.business_logic.shared_state.SharedState">SharedState</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The shared state object used to manage</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\business_logic\program_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span>
<span class="normal">99</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the ProgramManager instance.</span>

<span class="sd">    This constructor sets up the initial state of the ProgramManager by</span>
<span class="sd">    creating a new instance of SharedState and passing it to the parent</span>
<span class="sd">    class initializer.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        state (SharedState): The shared state object used to manage</span>
<span class="sd">        program-wide data and operations.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">SharedState</span><span class="p">()</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.business_logic.program_manager.AttendancesManager.manage_attendances_of_one_device" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">manage_attendances_of_one_device</span><span class="p">(</span><span class="n">device</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Manages the attendance data for a single device.
This method handles the connection to a device, retrieves attendance data, processes it,
and updates the device's state and attendance records. It also manages error handling
and ensures proper cleanup of resources.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>device</code>
            </td>
            <td>
                  <code><span title="src.common.business_logic.models.device.Device">Device</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The device object representing the attendance device to be managed.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<details class="workflow" open>
  <summary>Workflow</summary>
  <ol>
<li>Establishes a connection to the device using <code>ConnectionManager</code>.</li>
<li>Retrieves attendance data from the device.</li>
<li>Formats the attendance data and handles any errors during formatting.</li>
<li>Clears attendance data on the device based on the <code>clear_attendance</code> flag.</li>
<li>Updates the device's model name if possible.</li>
<li>Processes individual and global attendance records.</li>
<li>Synchronizes the device's time and handles time-related errors.</li>
<li>Updates the attendance count for the device in a shared dictionary.</li>
<li>Ensures proper disconnection from the device and updates progress tracking.</li>
</ol>
</details>

<details class="logging" open>
  <summary>Logging</summary>
  <ul>
<li>Logs debug information for connection initiation, attendance processing, and cleanup.</li>
<li>Logs errors and warnings for failed connections and other issues.</li>
</ul>
</details>

    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\business_logic\program_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">manage_attendances_of_one_device</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device</span><span class="p">:</span> <span class="n">Device</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Manages the attendance data for a single device.</span>
<span class="sd">    This method handles the connection to a device, retrieves attendance data, processes it,</span>
<span class="sd">    and updates the device&#39;s state and attendance records. It also manages error handling</span>
<span class="sd">    and ensures proper cleanup of resources.</span>

<span class="sd">    Args:</span>
<span class="sd">        device (Device): The device object representing the attendance device to be managed.</span>

<span class="sd">    Workflow:</span>
<span class="sd">        1. Establishes a connection to the device using `ConnectionManager`.</span>
<span class="sd">        2. Retrieves attendance data from the device.</span>
<span class="sd">        3. Formats the attendance data and handles any errors during formatting.</span>
<span class="sd">        4. Clears attendance data on the device based on the `clear_attendance` flag.</span>
<span class="sd">        5. Updates the device&#39;s model name if possible.</span>
<span class="sd">        6. Processes individual and global attendance records.</span>
<span class="sd">        7. Synchronizes the device&#39;s time and handles time-related errors.</span>
<span class="sd">        8. Updates the attendance count for the device in a shared dictionary.</span>
<span class="sd">        9. Ensures proper disconnection from the device and updates progress tracking.</span>

<span class="sd">    Exceptions:</span>
<span class="sd">        - Handles `NetworkError` and `ObtainAttendancesError` during connection and data retrieval.</span>
<span class="sd">        - Raises `ConnectionFailedError` if the connection to the device fails.</span>
<span class="sd">        - Catches and re-raises other exceptions as `BaseError` with a specific error code.</span>
<span class="sd">        - Handles time synchronization errors such as `OutdatedTimeError` and updates the battery status.</span>

<span class="sd">    Logging:</span>
<span class="sd">        - Logs debug information for connection initiation, attendance processing, and cleanup.</span>
<span class="sd">        - Logs errors and warnings for failed connections and other issues.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Iniciando </span><span class="si">{</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">conn_manager</span> <span class="o">=</span> <span class="n">ConnectionManager</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">,</span> <span class="mi">4370</span><span class="p">,</span> <span class="n">device</span><span class="o">.</span><span class="n">communication</span><span class="p">)</span>
            <span class="c1">#import time</span>
            <span class="c1">#start_time = time.time()</span>
            <span class="n">conn_manager</span><span class="o">.</span><span class="n">connect_with_retry</span><span class="p">()</span>
            <span class="c1">#end_time = time.time()</span>
            <span class="c1">#logging.debug(f&#39;{device.ip} - Tiempo de conexión total: {(end_time - start_time):2f}&#39;)</span>
            <span class="n">attendances</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Attendance</span><span class="p">]</span> <span class="o">=</span> <span class="n">conn_manager</span><span class="o">.</span><span class="n">get_attendances</span><span class="p">()</span>
            <span class="c1">#logging.info(f&#39;{device.ip} - PREFORMATEO - Longitud marcaciones: {len(attendances)} - Marcaciones: {attendances}&#39;)</span>
            <span class="n">attendances</span><span class="p">,</span> <span class="n">attendances_with_error</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_attendances</span><span class="p">(</span><span class="n">attendances</span><span class="p">,</span> <span class="n">device</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">attendances_with_error</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">force_clear_attendance</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">clear_attendance</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;No se eliminaran las marcaciones correspondientes al dispositivo </span><span class="si">{</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="c1">#logging.info(f&#39;{device.ip} - POSTFORMATEO - Longitud marcaciones: {len(attendances)} - Marcaciones: {attendances}&#39;)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;clear_attendance: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">clear_attendance</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">conn_manager</span><span class="o">.</span><span class="n">clear_attendances</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">clear_attendance</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">NetworkError</span><span class="p">,</span> <span class="n">ObtainAttendancesError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">attendances_count_devices</span><span class="p">[</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;connection failed&quot;</span><span class="p">:</span> <span class="kc">True</span>
                <span class="p">}</span>
            <span class="k">raise</span> <span class="n">ConnectionFailedError</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">model_name</span><span class="p">,</span> <span class="n">device</span><span class="o">.</span><span class="n">point</span><span class="p">,</span> <span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">device</span><span class="o">.</span><span class="n">model_name</span> <span class="o">=</span> <span class="n">conn_manager</span><span class="o">.</span><span class="n">update_device_name</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">manage_individual_attendances</span><span class="p">(</span><span class="n">device</span><span class="p">,</span> <span class="n">attendances</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">manage_global_attendances</span><span class="p">(</span><span class="n">attendances</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">conn_manager</span><span class="o">.</span><span class="n">update_time</span><span class="p">()</span>
        <span class="k">except</span> <span class="n">NetworkError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">NetworkError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">device</span><span class="o">.</span><span class="n">model_name</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">device</span><span class="o">.</span><span class="n">point</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">OutdatedTimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">HourManager</span><span class="p">()</span><span class="o">.</span><span class="n">update_battery_status</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">)</span>
            <span class="n">BatteryFailingError</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">model_name</span><span class="p">,</span> <span class="n">device</span><span class="o">.</span><span class="n">point</span><span class="p">,</span> <span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">attendances_count_devices</span><span class="p">[</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;attendance count&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">attendances</span><span class="p">))</span>
            <span class="p">}</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">conn_manager</span><span class="o">.</span><span class="n">is_connected</span><span class="p">():</span>
            <span class="n">conn_manager</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
        <span class="n">ProgressTracker</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">emit_progress</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Finalizando </span><span class="si">{</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.business_logic.program_manager.AttendancesManager.manage_devices_attendances" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">manage_devices_attendances</span><span class="p">(</span><span class="n">selected_ips</span><span class="p">,</span> <span class="n">emit_progress</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Manages the attendance records for the specified devices.
This method processes attendance data for the devices with the given IPs.
It also handles configuration settings related to clearing attendance data
and updates the configuration file if necessary.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>selected_ips</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of IP addresses of the devices to manage.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>emit_progress</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A callable function to emit progress updates. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The count of attendances processed.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="side-effects" open>
  <summary>Side Effects</summary>
  <ul>
<li>Reads configuration settings from 'config.ini'.</li>
<li>Resets the internal state before processing.</li>
<li>Updates the 'force_clear_attendance' setting in 'config.ini' if it was set to True.</li>
</ul>
</details>

            <details class="quote">
              <summary>Source code in <code>src\business_logic\program_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">manage_devices_attendances</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">selected_ips</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">emit_progress</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Manages the attendance records for the specified devices.</span>
<span class="sd">    This method processes attendance data for the devices with the given IPs.</span>
<span class="sd">    It also handles configuration settings related to clearing attendance data</span>
<span class="sd">    and updates the configuration file if necessary.</span>

<span class="sd">    Args:</span>
<span class="sd">        selected_ips (list[str]): A list of IP addresses of the devices to manage.</span>
<span class="sd">        emit_progress (Callable, optional): A callable function to emit progress updates. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        (int): The count of attendances processed.</span>

<span class="sd">    Side Effects:</span>
<span class="sd">        - Reads configuration settings from &#39;config.ini&#39;.</span>
<span class="sd">        - Resets the internal state before processing.</span>
<span class="sd">        - Updates the &#39;force_clear_attendance&#39; setting in &#39;config.ini&#39; if it was set to True.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">emit_progress</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="n">emit_progress</span>
    <span class="n">config</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">find_root_directory</span><span class="p">(),</span> <span class="s1">&#39;config.ini&#39;</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">clear_attendance</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">getboolean</span><span class="p">(</span><span class="s1">&#39;Device_config&#39;</span><span class="p">,</span> <span class="s1">&#39;clear_attendance&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">force_clear_attendance</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">getboolean</span><span class="p">(</span><span class="s1">&#39;Device_config&#39;</span><span class="p">,</span> <span class="s1">&#39;force_clear_attendance&#39;</span><span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;force_clear_attendance: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">force_clear_attendance</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
    <span class="n">attendances_count</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">manage_devices_attendances</span><span class="p">(</span><span class="n">selected_ips</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">force_clear_attendance</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">force_clear_attendance</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">config</span><span class="p">[</span><span class="s1">&#39;Device_config&#39;</span><span class="p">][</span><span class="s1">&#39;force_clear_attendance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;False&#39;</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;config.ini&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">configfile</span><span class="p">:</span>
            <span class="n">config</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">configfile</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">attendances_count</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="src.business_logic.program_manager.ConnectionsInfo" class="doc doc-heading">
            <code>ConnectionsInfo</code>


</h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="src.common.business_logic.operation_manager.OperationManager">OperationManager</span></code></p>








              <details class="quote">
                <summary>Source code in <code>src\business_logic\program_manager.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ConnectionsInfo</span><span class="p">(</span><span class="n">OperationManager</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the ProgramManager instance.</span>

<span class="sd">        This constructor sets up the shared state and initializes a dictionary</span>
<span class="sd">        to store connection information. It also calls the superclass initializer</span>
<span class="sd">        with the shared state.</span>

<span class="sd">        Attributes:</span>
<span class="sd">            state (SharedState): An instance of SharedState to manage shared resources.</span>
<span class="sd">            connections_info (dict[str, ConnectionInfo]): A dictionary mapping connection</span>
<span class="sd">                identifiers to their respective ConnectionInfo objects.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">SharedState</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connections_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ConnectionInfo</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">obtain_connections_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">selected_ips</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">emit_progress</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Obtains connection information for a list of selected IPs and manages the threading process </span>
<span class="sd">        to retrieve this information from devices.</span>

<span class="sd">        Args:</span>
<span class="sd">            selected_ips (list[str]): A list of IP addresses to connect to and retrieve information from.</span>
<span class="sd">            emit_progress (Callable, optional): A callable function to emit progress updates during </span>
<span class="sd">                the operation. Defaults to None.</span>

<span class="sd">        Returns:</span>
<span class="sd">            (dict): A dictionary containing connection information for the devices if any connections </span>
<span class="sd">                    were successfully established. Returns an empty dictionary if no connections were made.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connections_info</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit_progress</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="n">emit_progress</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">manage_threads_to_devices</span><span class="p">(</span><span class="n">selected_ips</span><span class="o">=</span><span class="n">selected_ips</span><span class="p">,</span> <span class="n">function</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">obtain_connection_info</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">connections_info</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">connections_info</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">obtain_connection_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device</span><span class="p">:</span> <span class="n">Device</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Establishes a connection to a device, retrieves its connection information, </span>
<span class="sd">        and updates the connection status.</span>

<span class="sd">        Args:</span>
<span class="sd">            device (Device): The device object containing information such as IP, </span>
<span class="sd">                             communication type, and model name.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ConnectionFailedError: If the connection to the device fails due to a </span>
<span class="sd">                                   network error.</span>
<span class="sd">            BaseError: If any other unexpected exception occurs during the process.</span>

<span class="sd">        Workflow:</span>
<span class="sd">            1. Initializes a connection manager for the device using its IP and </span>
<span class="sd">               communication type.</span>
<span class="sd">            2. Attempts to connect to the device with retries.</span>
<span class="sd">            3. Pings the device to verify connectivity.</span>
<span class="sd">            4. If the ping is successful, retrieves device information and updates </span>
<span class="sd">               the connection info.</span>
<span class="sd">            5. If the ping fails or a network error occurs, marks the connection </span>
<span class="sd">               as failed and raises a ConnectionFailedError.</span>
<span class="sd">            6. Updates the shared connection information dictionary with the </span>
<span class="sd">               device&#39;s connection status.</span>
<span class="sd">            7. Ensures the connection is properly disconnected in the `finally` block.</span>
<span class="sd">            8. Updates the progress tracker and logs the completion of the process.</span>

<span class="sd">        Note:</span>
<span class="sd">            This method uses a lock to ensure thread-safe updates to the shared </span>
<span class="sd">            `connections_info` dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Iniciando </span><span class="si">{</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">conn_manager</span><span class="p">:</span> <span class="n">ConnectionManager</span> <span class="o">=</span> <span class="n">ConnectionManager</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">,</span> <span class="mi">4370</span><span class="p">,</span> <span class="n">device</span><span class="o">.</span><span class="n">communication</span><span class="p">)</span>
                <span class="n">connection_info</span><span class="p">:</span> <span class="n">ConnectionInfo</span> <span class="o">=</span> <span class="n">ConnectionInfo</span><span class="p">()</span>
                <span class="n">conn_manager</span><span class="o">.</span><span class="n">connect_with_retry</span><span class="p">()</span>
                <span class="n">test_ping_connection</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">conn_manager</span><span class="o">.</span><span class="n">ping_device</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">test_ping_connection</span><span class="p">:</span>
                    <span class="n">device_info</span><span class="p">:</span> <span class="n">DeviceInfo</span> <span class="o">=</span> <span class="n">conn_manager</span><span class="o">.</span><span class="n">obtain_device_info</span><span class="p">()</span>
                    <span class="n">connection_info</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
                        <span class="s2">&quot;connection_failed&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                        <span class="s2">&quot;device_info&quot;</span><span class="p">:</span> <span class="n">device_info</span>
                    <span class="p">})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">connection_info</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
                        <span class="s2">&quot;connection_failed&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                    <span class="p">})</span>
                <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">connections_info</span><span class="p">[</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">]</span> <span class="o">=</span> <span class="n">connection_info</span>
            <span class="k">except</span> <span class="n">NetworkError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">connection_info</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
                    <span class="s2">&quot;connection_failed&quot;</span><span class="p">:</span> <span class="kc">True</span>
                <span class="p">})</span>
                <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">connections_info</span><span class="p">[</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">]</span> <span class="o">=</span> <span class="n">connection_info</span>
                <span class="k">raise</span> <span class="n">ConnectionFailedError</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">model_name</span><span class="p">,</span> <span class="n">device</span><span class="o">.</span><span class="n">point</span><span class="p">,</span> <span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ConnectionFailedError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">BaseError</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">conn_manager</span><span class="o">.</span><span class="n">is_connected</span><span class="p">():</span>
                <span class="n">conn_manager</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
            <span class="n">ProgressTracker</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">emit_progress</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Finalizando </span><span class="si">{</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h5 id="src.business_logic.program_manager.ConnectionsInfo.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Initializes the ProgramManager instance.</p>
<p>This constructor sets up the shared state and initializes a dictionary
to store connection information. It also calls the superclass initializer
with the shared state.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="src.business_logic.program_manager.ConnectionsInfo.__init__.state">state</span></code></td>
            <td>
                  <code><span title="src.common.business_logic.shared_state.SharedState">SharedState</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An instance of SharedState to manage shared resources.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="src.business_logic.program_manager.ConnectionsInfo.__init__.connections_info">connections_info</span></code></td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="src.common.business_logic.types.ConnectionInfo">ConnectionInfo</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary mapping connection
identifiers to their respective ConnectionInfo objects.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\business_logic\program_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the ProgramManager instance.</span>

<span class="sd">    This constructor sets up the shared state and initializes a dictionary</span>
<span class="sd">    to store connection information. It also calls the superclass initializer</span>
<span class="sd">    with the shared state.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        state (SharedState): An instance of SharedState to manage shared resources.</span>
<span class="sd">        connections_info (dict[str, ConnectionInfo]): A dictionary mapping connection</span>
<span class="sd">            identifiers to their respective ConnectionInfo objects.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">SharedState</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">connections_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ConnectionInfo</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.business_logic.program_manager.ConnectionsInfo.obtain_connection_info" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">obtain_connection_info</span><span class="p">(</span><span class="n">device</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Establishes a connection to a device, retrieves its connection information, 
and updates the connection status.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>device</code>
            </td>
            <td>
                  <code><span title="src.common.business_logic.models.device.Device">Device</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The device object containing information such as IP, 
             communication type, and model name.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.ConnectionFailedError">ConnectionFailedError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the connection to the device fails due to a 
                   network error.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseError">BaseError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If any other unexpected exception occurs during the process.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="workflow" open>
  <summary>Workflow</summary>
  <ol>
<li>Initializes a connection manager for the device using its IP and 
   communication type.</li>
<li>Attempts to connect to the device with retries.</li>
<li>Pings the device to verify connectivity.</li>
<li>If the ping is successful, retrieves device information and updates 
   the connection info.</li>
<li>If the ping fails or a network error occurs, marks the connection 
   as failed and raises a ConnectionFailedError.</li>
<li>Updates the shared connection information dictionary with the 
   device's connection status.</li>
<li>Ensures the connection is properly disconnected in the <code>finally</code> block.</li>
<li>Updates the progress tracker and logs the completion of the process.</li>
</ol>
</details>

<details class="note" open>
  <summary>Note</summary>
  <p>This method uses a lock to ensure thread-safe updates to the shared 
<code>connections_info</code> dictionary.</p>
</details>

            <details class="quote">
              <summary>Source code in <code>src\business_logic\program_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">obtain_connection_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device</span><span class="p">:</span> <span class="n">Device</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Establishes a connection to a device, retrieves its connection information, </span>
<span class="sd">    and updates the connection status.</span>

<span class="sd">    Args:</span>
<span class="sd">        device (Device): The device object containing information such as IP, </span>
<span class="sd">                         communication type, and model name.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ConnectionFailedError: If the connection to the device fails due to a </span>
<span class="sd">                               network error.</span>
<span class="sd">        BaseError: If any other unexpected exception occurs during the process.</span>

<span class="sd">    Workflow:</span>
<span class="sd">        1. Initializes a connection manager for the device using its IP and </span>
<span class="sd">           communication type.</span>
<span class="sd">        2. Attempts to connect to the device with retries.</span>
<span class="sd">        3. Pings the device to verify connectivity.</span>
<span class="sd">        4. If the ping is successful, retrieves device information and updates </span>
<span class="sd">           the connection info.</span>
<span class="sd">        5. If the ping fails or a network error occurs, marks the connection </span>
<span class="sd">           as failed and raises a ConnectionFailedError.</span>
<span class="sd">        6. Updates the shared connection information dictionary with the </span>
<span class="sd">           device&#39;s connection status.</span>
<span class="sd">        7. Ensures the connection is properly disconnected in the `finally` block.</span>
<span class="sd">        8. Updates the progress tracker and logs the completion of the process.</span>

<span class="sd">    Note:</span>
<span class="sd">        This method uses a lock to ensure thread-safe updates to the shared </span>
<span class="sd">        `connections_info` dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Iniciando </span><span class="si">{</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">conn_manager</span><span class="p">:</span> <span class="n">ConnectionManager</span> <span class="o">=</span> <span class="n">ConnectionManager</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">,</span> <span class="mi">4370</span><span class="p">,</span> <span class="n">device</span><span class="o">.</span><span class="n">communication</span><span class="p">)</span>
            <span class="n">connection_info</span><span class="p">:</span> <span class="n">ConnectionInfo</span> <span class="o">=</span> <span class="n">ConnectionInfo</span><span class="p">()</span>
            <span class="n">conn_manager</span><span class="o">.</span><span class="n">connect_with_retry</span><span class="p">()</span>
            <span class="n">test_ping_connection</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">conn_manager</span><span class="o">.</span><span class="n">ping_device</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">test_ping_connection</span><span class="p">:</span>
                <span class="n">device_info</span><span class="p">:</span> <span class="n">DeviceInfo</span> <span class="o">=</span> <span class="n">conn_manager</span><span class="o">.</span><span class="n">obtain_device_info</span><span class="p">()</span>
                <span class="n">connection_info</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
                    <span class="s2">&quot;connection_failed&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                    <span class="s2">&quot;device_info&quot;</span><span class="p">:</span> <span class="n">device_info</span>
                <span class="p">})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">connection_info</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
                    <span class="s2">&quot;connection_failed&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                <span class="p">})</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">connections_info</span><span class="p">[</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">]</span> <span class="o">=</span> <span class="n">connection_info</span>
        <span class="k">except</span> <span class="n">NetworkError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">connection_info</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
                <span class="s2">&quot;connection_failed&quot;</span><span class="p">:</span> <span class="kc">True</span>
            <span class="p">})</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">connections_info</span><span class="p">[</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">]</span> <span class="o">=</span> <span class="n">connection_info</span>
            <span class="k">raise</span> <span class="n">ConnectionFailedError</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">model_name</span><span class="p">,</span> <span class="n">device</span><span class="o">.</span><span class="n">point</span><span class="p">,</span> <span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">ConnectionFailedError</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">BaseError</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">conn_manager</span><span class="o">.</span><span class="n">is_connected</span><span class="p">():</span>
            <span class="n">conn_manager</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
        <span class="n">ProgressTracker</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">emit_progress</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Finalizando </span><span class="si">{</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.business_logic.program_manager.ConnectionsInfo.obtain_connections_info" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">obtain_connections_info</span><span class="p">(</span><span class="n">selected_ips</span><span class="p">,</span> <span class="n">emit_progress</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Obtains connection information for a list of selected IPs and manages the threading process 
to retrieve this information from devices.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>selected_ips</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of IP addresses to connect to and retrieve information from.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>emit_progress</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A callable function to emit progress updates during 
the operation. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary containing connection information for the devices if any connections 
    were successfully established. Returns an empty dictionary if no connections were made.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\business_logic\program_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">obtain_connections_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">selected_ips</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">emit_progress</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Obtains connection information for a list of selected IPs and manages the threading process </span>
<span class="sd">    to retrieve this information from devices.</span>

<span class="sd">    Args:</span>
<span class="sd">        selected_ips (list[str]): A list of IP addresses to connect to and retrieve information from.</span>
<span class="sd">        emit_progress (Callable, optional): A callable function to emit progress updates during </span>
<span class="sd">            the operation. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        (dict): A dictionary containing connection information for the devices if any connections </span>
<span class="sd">                were successfully established. Returns an empty dictionary if no connections were made.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">connections_info</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">emit_progress</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="n">emit_progress</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>

    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">manage_threads_to_devices</span><span class="p">(</span><span class="n">selected_ips</span><span class="o">=</span><span class="n">selected_ips</span><span class="p">,</span> <span class="n">function</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">obtain_connection_info</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">connections_info</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">connections_info</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="src.business_logic.program_manager.HourManager" class="doc doc-heading">
            <code>HourManager</code>


</h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="src.common.business_logic.hour_manager.HourManagerBase">HourManagerBase</span></code></p>








              <details class="quote">
                <summary>Source code in <code>src\business_logic\program_manager.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">HourManager</span><span class="p">(</span><span class="n">HourManagerBase</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the ProgramManager instance.</span>

<span class="sd">        This constructor sets up the initial state of the ProgramManager by</span>
<span class="sd">        creating a new instance of SharedState and passing it to the parent</span>
<span class="sd">        class initializer.</span>

<span class="sd">        Attributes:</span>
<span class="sd">            state (SharedState): The shared state object used to manage</span>
<span class="sd">            program-wide state and data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">SharedState</span><span class="p">()</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">manage_hour_devices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">selected_ips</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">emit_progress</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Synchronizes the time on a list of devices identified by their IP addresses.</span>

<span class="sd">        Args:</span>
<span class="sd">            selected_ips (list[str]): A list of IP addresses of the devices to update.</span>
<span class="sd">            emit_progress (Callable, optional): A callback function to emit progress updates. Defaults to None.</span>

<span class="sd">        Returns:</span>
<span class="sd">            (Any): The result of the `update_devices_time` method from the superclass.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit_progress</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="n">emit_progress</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">update_devices_time</span><span class="p">(</span><span class="n">selected_ips</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update_device_time_of_one_device</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device</span><span class="p">:</span> <span class="n">Device</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the device time for a single device.</span>

<span class="sd">        This method attempts to connect to the specified device, update its time, </span>
<span class="sd">        and handle any errors that may occur during the process. It also updates </span>
<span class="sd">        the device&#39;s error status and progress tracking.</span>

<span class="sd">        Args:</span>
<span class="sd">            device (Device): The device object containing information such as </span>
<span class="sd">                             IP address, communication type, model name, and point.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ConnectionFailedError: If the connection to the device fails.</span>
<span class="sd">            BatteryFailingError: If the device&#39;s battery is failing and its time </span>
<span class="sd">                                 cannot be updated.</span>
<span class="sd">            BaseError: For any other unexpected errors, with error code 3000.</span>

<span class="sd">        Notes:</span>
<span class="sd">            - Uses a lock to ensure thread-safe updates to the `devices_errors` dictionary.</span>
<span class="sd">            - Updates the battery status if an outdated time error occurs.</span>
<span class="sd">            - Ensures the connection is properly closed in the `finally` block.</span>
<span class="sd">            - Tracks progress using the `ProgressTracker` class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Iniciando </span><span class="si">{</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">conn_manager</span><span class="p">:</span> <span class="n">ConnectionManager</span> <span class="o">=</span> <span class="n">ConnectionManager</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">,</span> <span class="mi">4370</span><span class="p">,</span> <span class="n">device</span><span class="o">.</span><span class="n">communication</span><span class="p">)</span>
                <span class="n">conn_manager</span><span class="o">.</span><span class="n">connect_with_retry</span><span class="p">()</span>
                <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">devices_errors</span><span class="p">[</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;connection failed&quot;</span><span class="p">:</span> <span class="kc">False</span> <span class="p">}</span>
                <span class="n">conn_manager</span><span class="o">.</span><span class="n">update_time</span><span class="p">()</span>
                <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">devices_errors</span><span class="p">[</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;battery failing&quot;</span><span class="p">:</span> <span class="kc">False</span> <span class="p">}</span>
            <span class="k">except</span> <span class="n">NetworkError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">devices_errors</span><span class="p">[</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;connection failed&quot;</span><span class="p">:</span> <span class="kc">True</span> <span class="p">}</span>
                <span class="k">raise</span> <span class="n">ConnectionFailedError</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">model_name</span><span class="p">,</span> <span class="n">device</span><span class="o">.</span><span class="n">point</span><span class="p">,</span> <span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">OutdatedTimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">devices_errors</span><span class="p">[</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;battery failing&quot;</span><span class="p">:</span> <span class="kc">True</span> <span class="p">}</span>
                <span class="n">HourManager</span><span class="p">()</span><span class="o">.</span><span class="n">update_battery_status</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">BatteryFailingError</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">model_name</span><span class="p">,</span> <span class="n">device</span><span class="o">.</span><span class="n">point</span><span class="p">,</span> <span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ConnectionFailedError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">except</span> <span class="n">BatteryFailingError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">BaseError</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">conn_manager</span><span class="o">.</span><span class="n">is_connected</span><span class="p">():</span>
                <span class="n">conn_manager</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
            <span class="n">ProgressTracker</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">emit_progress</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Finalizando </span><span class="si">{</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h5 id="src.business_logic.program_manager.HourManager.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Initializes the ProgramManager instance.</p>
<p>This constructor sets up the initial state of the ProgramManager by
creating a new instance of SharedState and passing it to the parent
class initializer.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="src.business_logic.program_manager.HourManager.__init__.state">state</span></code></td>
            <td>
                  <code><span title="src.common.business_logic.shared_state.SharedState">SharedState</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The shared state object used to manage</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\business_logic\program_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the ProgramManager instance.</span>

<span class="sd">    This constructor sets up the initial state of the ProgramManager by</span>
<span class="sd">    creating a new instance of SharedState and passing it to the parent</span>
<span class="sd">    class initializer.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        state (SharedState): The shared state object used to manage</span>
<span class="sd">        program-wide state and data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">SharedState</span><span class="p">()</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.business_logic.program_manager.HourManager.manage_hour_devices" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">manage_hour_devices</span><span class="p">(</span><span class="n">selected_ips</span><span class="p">,</span> <span class="n">emit_progress</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Synchronizes the time on a list of devices identified by their IP addresses.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>selected_ips</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of IP addresses of the devices to update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>emit_progress</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A callback function to emit progress updates. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The result of the <code>update_devices_time</code> method from the superclass.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\business_logic\program_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">manage_hour_devices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">selected_ips</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">emit_progress</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Synchronizes the time on a list of devices identified by their IP addresses.</span>

<span class="sd">    Args:</span>
<span class="sd">        selected_ips (list[str]): A list of IP addresses of the devices to update.</span>
<span class="sd">        emit_progress (Callable, optional): A callback function to emit progress updates. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        (Any): The result of the `update_devices_time` method from the superclass.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">emit_progress</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="n">emit_progress</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
    <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">update_devices_time</span><span class="p">(</span><span class="n">selected_ips</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.business_logic.program_manager.HourManager.update_device_time_of_one_device" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_device_time_of_one_device</span><span class="p">(</span><span class="n">device</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Updates the device time for a single device.</p>
<p>This method attempts to connect to the specified device, update its time, 
and handle any errors that may occur during the process. It also updates 
the device's error status and progress tracking.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>device</code>
            </td>
            <td>
                  <code><span title="src.common.business_logic.models.device.Device">Device</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The device object containing information such as 
             IP address, communication type, model name, and point.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.ConnectionFailedError">ConnectionFailedError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the connection to the device fails.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BatteryFailingError">BatteryFailingError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the device's battery is failing and its time 
                 cannot be updated.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseError">BaseError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>For any other unexpected errors, with error code 3000.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="notes" open>
  <summary>Notes</summary>
  <ul>
<li>Uses a lock to ensure thread-safe updates to the <code>devices_errors</code> dictionary.</li>
<li>Updates the battery status if an outdated time error occurs.</li>
<li>Ensures the connection is properly closed in the <code>finally</code> block.</li>
<li>Tracks progress using the <code>ProgressTracker</code> class.</li>
</ul>
</details>

            <details class="quote">
              <summary>Source code in <code>src\business_logic\program_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">update_device_time_of_one_device</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device</span><span class="p">:</span> <span class="n">Device</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Updates the device time for a single device.</span>

<span class="sd">    This method attempts to connect to the specified device, update its time, </span>
<span class="sd">    and handle any errors that may occur during the process. It also updates </span>
<span class="sd">    the device&#39;s error status and progress tracking.</span>

<span class="sd">    Args:</span>
<span class="sd">        device (Device): The device object containing information such as </span>
<span class="sd">                         IP address, communication type, model name, and point.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ConnectionFailedError: If the connection to the device fails.</span>
<span class="sd">        BatteryFailingError: If the device&#39;s battery is failing and its time </span>
<span class="sd">                             cannot be updated.</span>
<span class="sd">        BaseError: For any other unexpected errors, with error code 3000.</span>

<span class="sd">    Notes:</span>
<span class="sd">        - Uses a lock to ensure thread-safe updates to the `devices_errors` dictionary.</span>
<span class="sd">        - Updates the battery status if an outdated time error occurs.</span>
<span class="sd">        - Ensures the connection is properly closed in the `finally` block.</span>
<span class="sd">        - Tracks progress using the `ProgressTracker` class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Iniciando </span><span class="si">{</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">conn_manager</span><span class="p">:</span> <span class="n">ConnectionManager</span> <span class="o">=</span> <span class="n">ConnectionManager</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">,</span> <span class="mi">4370</span><span class="p">,</span> <span class="n">device</span><span class="o">.</span><span class="n">communication</span><span class="p">)</span>
            <span class="n">conn_manager</span><span class="o">.</span><span class="n">connect_with_retry</span><span class="p">()</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">devices_errors</span><span class="p">[</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;connection failed&quot;</span><span class="p">:</span> <span class="kc">False</span> <span class="p">}</span>
            <span class="n">conn_manager</span><span class="o">.</span><span class="n">update_time</span><span class="p">()</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">devices_errors</span><span class="p">[</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;battery failing&quot;</span><span class="p">:</span> <span class="kc">False</span> <span class="p">}</span>
        <span class="k">except</span> <span class="n">NetworkError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">devices_errors</span><span class="p">[</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;connection failed&quot;</span><span class="p">:</span> <span class="kc">True</span> <span class="p">}</span>
            <span class="k">raise</span> <span class="n">ConnectionFailedError</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">model_name</span><span class="p">,</span> <span class="n">device</span><span class="o">.</span><span class="n">point</span><span class="p">,</span> <span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">OutdatedTimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">devices_errors</span><span class="p">[</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;battery failing&quot;</span><span class="p">:</span> <span class="kc">True</span> <span class="p">}</span>
            <span class="n">HourManager</span><span class="p">()</span><span class="o">.</span><span class="n">update_battery_status</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">BatteryFailingError</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">model_name</span><span class="p">,</span> <span class="n">device</span><span class="o">.</span><span class="n">point</span><span class="p">,</span> <span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">ConnectionFailedError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">except</span> <span class="n">BatteryFailingError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">BaseError</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">conn_manager</span><span class="o">.</span><span class="n">is_connected</span><span class="p">():</span>
            <span class="n">conn_manager</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
        <span class="n">ProgressTracker</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">emit_progress</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Finalizando </span><span class="si">{</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="src.business_logic.program_manager.ProgressTracker" class="doc doc-heading">
            <code>ProgressTracker</code>


</h4>


    <div class="doc doc-contents ">








              <details class="quote">
                <summary>Source code in <code>src\business_logic\program_manager.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ProgressTracker</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">SharedState</span><span class="p">,</span> <span class="n">emit_progress</span><span class="p">:</span> <span class="n">Callable</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the ProgramManager instance.</span>

<span class="sd">        Args:</span>
<span class="sd">            state (SharedState): The shared state object used to manage and share data across components.</span>
<span class="sd">            emit_progress (Callable): A callable function used to emit progress updates.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">:</span> <span class="n">SharedState</span> <span class="o">=</span> <span class="n">state</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit_progress</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="n">emit_progress</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device</span><span class="p">:</span> <span class="n">Device</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the progress of processing a device and emits progress information if applicable.</span>

<span class="sd">        Args:</span>
<span class="sd">            device (Device): The device object being processed.</span>

<span class="sd">        Behavior:</span>
<span class="sd">            - Increments the count of processed devices in the current state.</span>
<span class="sd">            - Calculates the progress percentage based on the total devices.</span>
<span class="sd">            - Emits progress information including:</span>
<span class="sd">                - Percent progress.</span>
<span class="sd">                - IP address of the device being processed.</span>
<span class="sd">                - Number of processed devices.</span>
<span class="sd">                - Total number of devices.</span>
<span class="sd">            - Logs the progress details for debugging purposes.</span>

<span class="sd">        Exceptions:</span>
<span class="sd">            - Catches any exception that occurs during the update process and raises a `BaseError`</span>
<span class="sd">              with an error code of 3000 and a descriptive message.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">:</span>
                <span class="n">processed_devices</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">increment_processed_devices</span><span class="p">()</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">emit_progress</span><span class="p">:</span>
                    <span class="n">progress</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">calculate_progress</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">emit_progress</span><span class="p">(</span>
                        <span class="n">percent_progress</span><span class="o">=</span><span class="n">progress</span><span class="p">,</span>
                        <span class="n">device_progress</span><span class="o">=</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">,</span>
                        <span class="n">processed_devices</span><span class="o">=</span><span class="n">processed_devices</span><span class="p">,</span>
                        <span class="n">total_devices</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">get_total_devices</span><span class="p">()</span>
                    <span class="p">)</span>
                    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Processed: </span><span class="si">{</span><span class="n">processed_devices</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">get_total_devices</span><span class="p">()</span><span class="si">}</span><span class="s2">, Progress: </span><span class="si">{</span><span class="n">progress</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">BaseError</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;Error actualizando el progreso: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">return</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h5 id="src.business_logic.program_manager.ProgressTracker.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">emit_progress</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Initializes the ProgramManager instance.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>state</code>
            </td>
            <td>
                  <code><span title="src.common.business_logic.shared_state.SharedState">SharedState</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The shared state object used to manage and share data across components.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>emit_progress</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A callable function used to emit progress updates.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\business_logic\program_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">SharedState</span><span class="p">,</span> <span class="n">emit_progress</span><span class="p">:</span> <span class="n">Callable</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the ProgramManager instance.</span>

<span class="sd">    Args:</span>
<span class="sd">        state (SharedState): The shared state object used to manage and share data across components.</span>
<span class="sd">        emit_progress (Callable): A callable function used to emit progress updates.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">:</span> <span class="n">SharedState</span> <span class="o">=</span> <span class="n">state</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">emit_progress</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="n">emit_progress</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.business_logic.program_manager.ProgressTracker.update" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update</span><span class="p">(</span><span class="n">device</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Updates the progress of processing a device and emits progress information if applicable.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>device</code>
            </td>
            <td>
                  <code><span title="src.common.business_logic.models.device.Device">Device</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The device object being processed.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<details class="behavior" open>
  <summary>Behavior</summary>
  <ul>
<li>Increments the count of processed devices in the current state.</li>
<li>Calculates the progress percentage based on the total devices.</li>
<li>Emits progress information including:<ul>
<li>Percent progress.</li>
<li>IP address of the device being processed.</li>
<li>Number of processed devices.</li>
<li>Total number of devices.</li>
</ul>
</li>
<li>Logs the progress details for debugging purposes.</li>
</ul>
</details>

            <details class="quote">
              <summary>Source code in <code>src\business_logic\program_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device</span><span class="p">:</span> <span class="n">Device</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Updates the progress of processing a device and emits progress information if applicable.</span>

<span class="sd">    Args:</span>
<span class="sd">        device (Device): The device object being processed.</span>

<span class="sd">    Behavior:</span>
<span class="sd">        - Increments the count of processed devices in the current state.</span>
<span class="sd">        - Calculates the progress percentage based on the total devices.</span>
<span class="sd">        - Emits progress information including:</span>
<span class="sd">            - Percent progress.</span>
<span class="sd">            - IP address of the device being processed.</span>
<span class="sd">            - Number of processed devices.</span>
<span class="sd">            - Total number of devices.</span>
<span class="sd">        - Logs the progress details for debugging purposes.</span>

<span class="sd">    Exceptions:</span>
<span class="sd">        - Catches any exception that occurs during the update process and raises a `BaseError`</span>
<span class="sd">          with an error code of 3000 and a descriptive message.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">:</span>
            <span class="n">processed_devices</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">increment_processed_devices</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">emit_progress</span><span class="p">:</span>
                <span class="n">progress</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">calculate_progress</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">emit_progress</span><span class="p">(</span>
                    <span class="n">percent_progress</span><span class="o">=</span><span class="n">progress</span><span class="p">,</span>
                    <span class="n">device_progress</span><span class="o">=</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">,</span>
                    <span class="n">processed_devices</span><span class="o">=</span><span class="n">processed_devices</span><span class="p">,</span>
                    <span class="n">total_devices</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">get_total_devices</span><span class="p">()</span>
                <span class="p">)</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Processed: </span><span class="si">{</span><span class="n">processed_devices</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">get_total_devices</span><span class="p">()</span><span class="si">}</span><span class="s2">, Progress: </span><span class="si">{</span><span class="n">progress</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">BaseError</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;Error actualizando el progreso: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">return</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="src.business_logic.program_manager.RestartManager" class="doc doc-heading">
            <code>RestartManager</code>


</h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="src.common.business_logic.operation_manager.OperationManager">OperationManager</span></code></p>








              <details class="quote">
                <summary>Source code in <code>src\business_logic\program_manager.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">RestartManager</span><span class="p">(</span><span class="n">OperationManager</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the ProgramManager instance.</span>

<span class="sd">        This constructor sets up the shared state and initializes a dictionary</span>
<span class="sd">        to track device errors. It also calls the superclass initializer with</span>
<span class="sd">        the shared state.</span>

<span class="sd">        Attributes:</span>
<span class="sd">            state (SharedState): An instance of SharedState to manage shared data.</span>
<span class="sd">            devices_errors (dict[str, dict[str, bool]]): A dictionary to store</span>
<span class="sd">                error states for devices, where the keys are device identifiers</span>
<span class="sd">                and the values are dictionaries mapping error types to their</span>
<span class="sd">                boolean statuses.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">SharedState</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">devices_errors</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">restart_devices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">selected_ips</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">emit_progress</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Restarts the devices specified by their IP addresses.</span>
<span class="sd">        This method clears any existing device errors, resets the state, and manages</span>
<span class="sd">        threads to restart the specified devices. If any errors occur during the </span>
<span class="sd">        restart process, they are collected and returned.</span>

<span class="sd">        Args:</span>
<span class="sd">            selected_ips (list[str]): A list of IP addresses of the devices to restart.</span>
<span class="sd">            emit_progress (Callable, optional): A callable function to emit progress updates. </span>
<span class="sd">                Defaults to None.</span>

<span class="sd">        Returns:</span>
<span class="sd">            (dict): A dictionary containing errors encountered during the restart process, </span>
<span class="sd">                    if any. If no errors occur, an empty dictionary is returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">devices_errors</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit_progress</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="n">emit_progress</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">manage_threads_to_devices</span><span class="p">(</span><span class="n">selected_ips</span><span class="o">=</span><span class="n">selected_ips</span><span class="p">,</span> <span class="n">function</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">restart_device</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">devices_errors</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">devices_errors</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">restart_device</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device</span><span class="p">:</span> <span class="n">Device</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Restart the specified device by establishing a connection, sending a restart command, </span>
<span class="sd">        and handling any potential errors during the process.</span>

<span class="sd">        Args:</span>
<span class="sd">            device (Device): The device object containing details such as IP address, </span>
<span class="sd">                             communication type, and model information.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ConnectionFailedError: If the connection to the device fails.</span>
<span class="sd">            BaseError: For any other unexpected errors during the restart process.</span>

<span class="sd">        Notes:</span>
<span class="sd">            - Uses a connection manager to handle the device connection and restart operation.</span>
<span class="sd">            - Updates the device error state in a thread-safe manner using a lock.</span>
<span class="sd">            - Ensures the connection is properly closed in the `finally` block.</span>
<span class="sd">            - Tracks progress using the `ProgressTracker` class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">conn_manager</span><span class="p">:</span> <span class="n">ConnectionManager</span> <span class="o">=</span> <span class="n">ConnectionManager</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">,</span> <span class="mi">4370</span><span class="p">,</span> <span class="n">device</span><span class="o">.</span><span class="n">communication</span><span class="p">)</span>
                <span class="n">conn_manager</span><span class="o">.</span><span class="n">connect_with_retry</span><span class="p">()</span>
                <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">devices_errors</span><span class="p">[</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;connection failed&quot;</span><span class="p">:</span> <span class="kc">False</span> <span class="p">}</span>
                <span class="n">conn_manager</span><span class="o">.</span><span class="n">restart_device</span><span class="p">()</span>
            <span class="k">except</span> <span class="n">NetworkError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">devices_errors</span><span class="p">[</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;connection failed&quot;</span><span class="p">:</span> <span class="kc">True</span> <span class="p">}</span>
                <span class="k">raise</span> <span class="n">ConnectionFailedError</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">model_name</span><span class="p">,</span> <span class="n">device</span><span class="o">.</span><span class="n">point</span><span class="p">,</span> <span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ConnectionFailedError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">BaseError</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">conn_manager</span><span class="o">.</span><span class="n">is_connected</span><span class="p">():</span>
                <span class="n">conn_manager</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
            <span class="n">ProgressTracker</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">emit_progress</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
        <span class="k">return</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h5 id="src.business_logic.program_manager.RestartManager.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Initializes the ProgramManager instance.</p>
<p>This constructor sets up the shared state and initializes a dictionary
to track device errors. It also calls the superclass initializer with
the shared state.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="src.business_logic.program_manager.RestartManager.__init__.state">state</span></code></td>
            <td>
                  <code><span title="src.common.business_logic.shared_state.SharedState">SharedState</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An instance of SharedState to manage shared data.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="src.business_logic.program_manager.RestartManager.__init__.devices_errors">devices_errors</span></code></td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="dict">dict</span>[<span title="str">str</span>, <span title="bool">bool</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary to store
error states for devices, where the keys are device identifiers
and the values are dictionaries mapping error types to their
boolean statuses.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\business_logic\program_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the ProgramManager instance.</span>

<span class="sd">    This constructor sets up the shared state and initializes a dictionary</span>
<span class="sd">    to track device errors. It also calls the superclass initializer with</span>
<span class="sd">    the shared state.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        state (SharedState): An instance of SharedState to manage shared data.</span>
<span class="sd">        devices_errors (dict[str, dict[str, bool]]): A dictionary to store</span>
<span class="sd">            error states for devices, where the keys are device identifiers</span>
<span class="sd">            and the values are dictionaries mapping error types to their</span>
<span class="sd">            boolean statuses.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">SharedState</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">devices_errors</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.business_logic.program_manager.RestartManager.restart_device" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">restart_device</span><span class="p">(</span><span class="n">device</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Restart the specified device by establishing a connection, sending a restart command, 
and handling any potential errors during the process.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>device</code>
            </td>
            <td>
                  <code><span title="src.common.business_logic.models.device.Device">Device</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The device object containing details such as IP address, 
             communication type, and model information.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.ConnectionFailedError">ConnectionFailedError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the connection to the device fails.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseError">BaseError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>For any other unexpected errors during the restart process.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="notes" open>
  <summary>Notes</summary>
  <ul>
<li>Uses a connection manager to handle the device connection and restart operation.</li>
<li>Updates the device error state in a thread-safe manner using a lock.</li>
<li>Ensures the connection is properly closed in the <code>finally</code> block.</li>
<li>Tracks progress using the <code>ProgressTracker</code> class.</li>
</ul>
</details>

            <details class="quote">
              <summary>Source code in <code>src\business_logic\program_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">restart_device</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device</span><span class="p">:</span> <span class="n">Device</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Restart the specified device by establishing a connection, sending a restart command, </span>
<span class="sd">    and handling any potential errors during the process.</span>

<span class="sd">    Args:</span>
<span class="sd">        device (Device): The device object containing details such as IP address, </span>
<span class="sd">                         communication type, and model information.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ConnectionFailedError: If the connection to the device fails.</span>
<span class="sd">        BaseError: For any other unexpected errors during the restart process.</span>

<span class="sd">    Notes:</span>
<span class="sd">        - Uses a connection manager to handle the device connection and restart operation.</span>
<span class="sd">        - Updates the device error state in a thread-safe manner using a lock.</span>
<span class="sd">        - Ensures the connection is properly closed in the `finally` block.</span>
<span class="sd">        - Tracks progress using the `ProgressTracker` class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">conn_manager</span><span class="p">:</span> <span class="n">ConnectionManager</span> <span class="o">=</span> <span class="n">ConnectionManager</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">,</span> <span class="mi">4370</span><span class="p">,</span> <span class="n">device</span><span class="o">.</span><span class="n">communication</span><span class="p">)</span>
            <span class="n">conn_manager</span><span class="o">.</span><span class="n">connect_with_retry</span><span class="p">()</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">devices_errors</span><span class="p">[</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;connection failed&quot;</span><span class="p">:</span> <span class="kc">False</span> <span class="p">}</span>
            <span class="n">conn_manager</span><span class="o">.</span><span class="n">restart_device</span><span class="p">()</span>
        <span class="k">except</span> <span class="n">NetworkError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">devices_errors</span><span class="p">[</span><span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;connection failed&quot;</span><span class="p">:</span> <span class="kc">True</span> <span class="p">}</span>
            <span class="k">raise</span> <span class="n">ConnectionFailedError</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">model_name</span><span class="p">,</span> <span class="n">device</span><span class="o">.</span><span class="n">point</span><span class="p">,</span> <span class="n">device</span><span class="o">.</span><span class="n">ip</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">ConnectionFailedError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">BaseError</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">conn_manager</span><span class="o">.</span><span class="n">is_connected</span><span class="p">():</span>
            <span class="n">conn_manager</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
        <span class="n">ProgressTracker</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">emit_progress</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
    <span class="k">return</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.business_logic.program_manager.RestartManager.restart_devices" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">restart_devices</span><span class="p">(</span><span class="n">selected_ips</span><span class="p">,</span> <span class="n">emit_progress</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Restarts the devices specified by their IP addresses.
This method clears any existing device errors, resets the state, and manages
threads to restart the specified devices. If any errors occur during the 
restart process, they are collected and returned.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>selected_ips</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of IP addresses of the devices to restart.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>emit_progress</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A callable function to emit progress updates. 
Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary containing errors encountered during the restart process, 
    if any. If no errors occur, an empty dictionary is returned.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\business_logic\program_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">restart_devices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">selected_ips</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">emit_progress</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Restarts the devices specified by their IP addresses.</span>
<span class="sd">    This method clears any existing device errors, resets the state, and manages</span>
<span class="sd">    threads to restart the specified devices. If any errors occur during the </span>
<span class="sd">    restart process, they are collected and returned.</span>

<span class="sd">    Args:</span>
<span class="sd">        selected_ips (list[str]): A list of IP addresses of the devices to restart.</span>
<span class="sd">        emit_progress (Callable, optional): A callable function to emit progress updates. </span>
<span class="sd">            Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        (dict): A dictionary containing errors encountered during the restart process, </span>
<span class="sd">                if any. If no errors occur, an empty dictionary is returned.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">devices_errors</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">emit_progress</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="n">emit_progress</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">manage_threads_to_devices</span><span class="p">(</span><span class="n">selected_ips</span><span class="o">=</span><span class="n">selected_ips</span><span class="p">,</span> <span class="n">function</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">restart_device</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">devices_errors</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">devices_errors</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>


  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="src.ui" class="doc doc-heading">
            <code>ui</code>


</h2>

    <div class="doc doc-contents ">









  <div class="doc doc-children">










<div class="doc doc-object doc-module">



<h3 id="src.ui.base_dialog" class="doc doc-heading">
            <code>base_dialog</code>


</h3>

    <div class="doc doc-contents ">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h4 id="src.ui.base_dialog.BaseDialog" class="doc doc-heading">
            <code>BaseDialog</code>


</h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="PyQt5.QtWidgets.QDialog">QDialog</span></code></p>








              <details class="quote">
                <summary>Source code in <code>src\ui\base_dialog.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">BaseDialog</span><span class="p">(</span><span class="n">QDialog</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">window_title</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the base dialog window with the specified parent and window title.</span>

<span class="sd">        Args:</span>
<span class="sd">            parent (QWidget, optional): The parent widget for the dialog. Defaults to None.</span>
<span class="sd">            window_title (str, optional): The title of the dialog window. Defaults to an empty string.</span>

<span class="sd">        Raises:</span>
<span class="sd">            BaseError: If an exception occurs during initialization, it raises a BaseError with code 3501</span>
<span class="sd">                       and the exception message.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="n">window_title</span><span class="p">)</span>

            <span class="c1"># Set window icon</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">file_path_resources</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">find_marker_directory</span><span class="p">(</span><span class="s2">&quot;resources&quot;</span><span class="p">),</span> <span class="s2">&quot;resources&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">file_path_icon</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_path_resources</span><span class="p">,</span> <span class="s2">&quot;fingerprint.ico&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setWindowIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_path_icon</span><span class="p">))</span>

            <span class="c1"># Allow minimizing the window</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setWindowFlag</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">WindowMinimizeButtonHint</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
            <span class="c1"># Allow maximizing the window</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setWindowFlag</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">WindowMaximizeButtonHint</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">setSizePolicy</span><span class="p">(</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Minimum</span><span class="p">,</span> <span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Minimum</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3501</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">init_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">adjust_size_to_table</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adjusts the size of the dialog window to fit the content of the table widget.</span>
<span class="sd">        This method resizes the columns of the table widget to fit their contents and calculates</span>
<span class="sd">        the required width and height of the table based on its content. It ensures that the</span>
<span class="sd">        dialog window does not exceed the available screen height, applying a margin if necessary.</span>
<span class="sd">        Finally, it resizes the dialog window to accommodate the adjusted table dimensions.</span>

<span class="sd">        Notes:</span>
<span class="sd">            - An extra width adjustment is added to account for margins and the button bar.</span>
<span class="sd">            - The height is capped to fit within the available screen height minus a margin.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Adjust columns based on the content</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">resizeColumnsToContents</span><span class="p">()</span>

        <span class="c1"># Get the content size of the table (width and height)</span>
        <span class="n">table_width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">horizontalHeader</span><span class="p">()</span><span class="o">.</span><span class="n">length</span><span class="p">()</span>
        <span class="n">table_height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">verticalHeader</span><span class="p">()</span><span class="o">.</span><span class="n">length</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">rowHeight</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

        <span class="n">max_height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">()</span><span class="o">.</span><span class="n">availableGeometry</span><span class="p">()</span><span class="o">.</span><span class="n">height</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">table_height</span> <span class="o">&gt;</span> <span class="n">max_height</span><span class="p">:</span>
            <span class="n">table_height</span> <span class="o">=</span> <span class="n">max_height</span><span class="o">-</span><span class="mi">50</span>

        <span class="c1"># Adjust the main window size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="n">table_width</span> <span class="o">+</span> <span class="mi">120</span><span class="p">,</span> <span class="n">table_height</span><span class="p">)</span>  <span class="c1"># Extra adjustment for margins and button bar</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">center_window</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Centers the window on the current screen.</span>

<span class="sd">        This method calculates the available geometry of the current screen</span>
<span class="sd">        and moves the window to the center of the screen.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">screen</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">()</span>  <span class="c1"># Get the current screen</span>
        <span class="n">screen_rect</span> <span class="o">=</span> <span class="n">screen</span><span class="o">.</span><span class="n">availableGeometry</span><span class="p">()</span>  <span class="c1"># Get screen available geometry</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">screen_rect</span><span class="o">.</span><span class="n">center</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="p">()</span><span class="o">.</span><span class="n">center</span><span class="p">())</span>  <span class="c1"># Move to center</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h5 id="src.ui.base_dialog.BaseDialog.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">window_title</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Initializes the base dialog window with the specified parent and window title.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>parent</code>
            </td>
            <td>
                  <code><span title="QWidget">QWidget</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The parent widget for the dialog. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>window_title</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The title of the dialog window. Defaults to an empty string.</p>
              </div>
            </td>
            <td>
                  <code>&#39;&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseError">BaseError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an exception occurs during initialization, it raises a BaseError with code 3501
       and the exception message.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\base_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">window_title</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the base dialog window with the specified parent and window title.</span>

<span class="sd">    Args:</span>
<span class="sd">        parent (QWidget, optional): The parent widget for the dialog. Defaults to None.</span>
<span class="sd">        window_title (str, optional): The title of the dialog window. Defaults to an empty string.</span>

<span class="sd">    Raises:</span>
<span class="sd">        BaseError: If an exception occurs during initialization, it raises a BaseError with code 3501</span>
<span class="sd">                   and the exception message.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="n">window_title</span><span class="p">)</span>

        <span class="c1"># Set window icon</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_path_resources</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">find_marker_directory</span><span class="p">(</span><span class="s2">&quot;resources&quot;</span><span class="p">),</span> <span class="s2">&quot;resources&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_path_icon</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_path_resources</span><span class="p">,</span> <span class="s2">&quot;fingerprint.ico&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_path_icon</span><span class="p">))</span>

        <span class="c1"># Allow minimizing the window</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowFlag</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">WindowMinimizeButtonHint</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="c1"># Allow maximizing the window</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowFlag</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">WindowMaximizeButtonHint</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setSizePolicy</span><span class="p">(</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Minimum</span><span class="p">,</span> <span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Minimum</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3501</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.base_dialog.BaseDialog.adjust_size_to_table" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">adjust_size_to_table</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Adjusts the size of the dialog window to fit the content of the table widget.
This method resizes the columns of the table widget to fit their contents and calculates
the required width and height of the table based on its content. It ensures that the
dialog window does not exceed the available screen height, applying a margin if necessary.
Finally, it resizes the dialog window to accommodate the adjusted table dimensions.</p>


<details class="notes" open>
  <summary>Notes</summary>
  <ul>
<li>An extra width adjustment is added to account for margins and the button bar.</li>
<li>The height is capped to fit within the available screen height minus a margin.</li>
</ul>
</details>

            <details class="quote">
              <summary>Source code in <code>src\ui\base_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">adjust_size_to_table</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adjusts the size of the dialog window to fit the content of the table widget.</span>
<span class="sd">    This method resizes the columns of the table widget to fit their contents and calculates</span>
<span class="sd">    the required width and height of the table based on its content. It ensures that the</span>
<span class="sd">    dialog window does not exceed the available screen height, applying a margin if necessary.</span>
<span class="sd">    Finally, it resizes the dialog window to accommodate the adjusted table dimensions.</span>

<span class="sd">    Notes:</span>
<span class="sd">        - An extra width adjustment is added to account for margins and the button bar.</span>
<span class="sd">        - The height is capped to fit within the available screen height minus a margin.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Adjust columns based on the content</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">resizeColumnsToContents</span><span class="p">()</span>

    <span class="c1"># Get the content size of the table (width and height)</span>
    <span class="n">table_width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">horizontalHeader</span><span class="p">()</span><span class="o">.</span><span class="n">length</span><span class="p">()</span>
    <span class="n">table_height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">verticalHeader</span><span class="p">()</span><span class="o">.</span><span class="n">length</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">rowHeight</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

    <span class="n">max_height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">()</span><span class="o">.</span><span class="n">availableGeometry</span><span class="p">()</span><span class="o">.</span><span class="n">height</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">table_height</span> <span class="o">&gt;</span> <span class="n">max_height</span><span class="p">:</span>
        <span class="n">table_height</span> <span class="o">=</span> <span class="n">max_height</span><span class="o">-</span><span class="mi">50</span>

    <span class="c1"># Adjust the main window size</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="n">table_width</span> <span class="o">+</span> <span class="mi">120</span><span class="p">,</span> <span class="n">table_height</span><span class="p">)</span>  <span class="c1"># Extra adjustment for margins and button bar</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.base_dialog.BaseDialog.center_window" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">center_window</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Centers the window on the current screen.</p>
<p>This method calculates the available geometry of the current screen
and moves the window to the center of the screen.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\base_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">center_window</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Centers the window on the current screen.</span>

<span class="sd">    This method calculates the available geometry of the current screen</span>
<span class="sd">    and moves the window to the center of the screen.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">screen</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">()</span>  <span class="c1"># Get the current screen</span>
    <span class="n">screen_rect</span> <span class="o">=</span> <span class="n">screen</span><span class="o">.</span><span class="n">availableGeometry</span><span class="p">()</span>  <span class="c1"># Get screen available geometry</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">screen_rect</span><span class="o">.</span><span class="n">center</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="p">()</span><span class="o">.</span><span class="n">center</span><span class="p">())</span>  <span class="c1"># Move to center</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="src.ui.base_select_devices_dialog" class="doc doc-heading">
            <code>base_select_devices_dialog</code>


</h3>

    <div class="doc doc-contents ">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h4 id="src.ui.base_select_devices_dialog.SelectDevicesDialog" class="doc doc-heading">
            <code>SelectDevicesDialog</code>


</h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseDialog (src.ui.base_dialog.BaseDialog)" href="#src.ui.base_dialog.BaseDialog">BaseDialog</a></code></p>








              <details class="quote">
                <summary>Source code in <code>src\ui\base_select_devices_dialog.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SelectDevicesDialog</span><span class="p">(</span><span class="n">BaseDialog</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">op_function</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">window_title</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the BaseSelectDevicesDialog class.</span>

<span class="sd">        Args:</span>
<span class="sd">            parent (QWidget, optional): The parent widget for this dialog. Defaults to None.</span>
<span class="sd">            op_function (callable, optional): A callable operation function to be executed. Defaults to None.</span>
<span class="sd">            window_title (str, optional): The title of the dialog window. Defaults to an empty string.</span>

<span class="sd">        Attributes:</span>
<span class="sd">            op_function (callable): Stores the operation function passed as an argument.</span>
<span class="sd">            file_path (str): The file path to the &quot;info_devices.txt&quot; file, located in the current working directory.</span>
<span class="sd">            data (list): A list to store device-related data.</span>

<span class="sd">        Raises:</span>
<span class="sd">            BaseError: If an exception occurs during initialization, it raises a BaseError with code 3501 and the error message.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">window_title</span><span class="o">=</span><span class="n">window_title</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">op_function</span> <span class="o">=</span> <span class="n">op_function</span>
            <span class="c1"># File path containing device information</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="s2">&quot;info_devices.txt&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3501</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">init_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">header_labels</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the user interface for the device selection dialog.</span>

<span class="sd">        Args:</span>
<span class="sd">            header_labels (list): A list of strings representing the column headers for the table.</span>

<span class="sd">        UI Components:</span>
<span class="sd">            - QVBoxLayout: Main layout for the dialog.</span>
<span class="sd">            - QTableWidget: Table widget to display devices with configurable columns and sorting enabled.</span>
<span class="sd">            - QPushButton: Buttons for updating data, selecting all rows, and deselecting all rows.</span>
<span class="sd">            - QLabel: Label to display a message when data is being updated.</span>
<span class="sd">            - QProgressBar: Progress bar to indicate the progress of data updates.</span>
<span class="sd">            - ComboBoxDelegate: Delegate for the communication column to provide a combo box UI.</span>

<span class="sd">        Features:</span>
<span class="sd">            - Multi-selection enabled for the table with full row selection.</span>
<span class="sd">            - Buttons to select all rows, deselect all rows, and perform operations on selected devices.</span>
<span class="sd">            - Progress bar and label for visual feedback during data updates.</span>
<span class="sd">            - Automatic loading of initial device data into the table.</span>

<span class="sd">        Raises:</span>
<span class="sd">            BaseError: If an exception occurs during the initialization process, it raises a BaseError with code 3501.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

            <span class="kn">from</span><span class="w"> </span><span class="nn">PyQt5.QtWidgets</span><span class="w"> </span><span class="kn">import</span> <span class="n">QHBoxLayout</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">inputs_widget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inputs_layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">inputs_widget</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">label_timeout</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Tiempo de Espera:&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spin_timeout</span> <span class="o">=</span> <span class="n">QSpinBox</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spin_timeout</span><span class="o">.</span><span class="n">setMinimum</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spin_timeout</span><span class="o">.</span><span class="n">setMaximum</span><span class="p">(</span><span class="mi">999</span><span class="p">)</span>
            <span class="n">config</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">find_root_directory</span><span class="p">(),</span> <span class="s1">&#39;config.ini&#39;</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">getint</span><span class="p">(</span><span class="s1">&#39;Network_config&#39;</span><span class="p">,</span> <span class="s1">&#39;timeout&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">spin_timeout</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timeout</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">spin_timeout</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spin_timeout</span><span class="o">.</span><span class="n">valueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_change_timeout</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">label_retries</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Reintentos:&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spin_retries</span> <span class="o">=</span> <span class="n">QSpinBox</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spin_retries</span><span class="o">.</span><span class="n">setMinimum</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spin_retries</span><span class="o">.</span><span class="n">setMaximum</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">retries</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">getint</span><span class="p">(</span><span class="s1">&#39;Network_config&#39;</span><span class="p">,</span> <span class="s1">&#39;retry_connection&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">retries</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">spin_retries</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">retries</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">spin_retries</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spin_retries</span><span class="o">.</span><span class="n">valueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_change_retries</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">inputs_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label_timeout</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inputs_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spin_timeout</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inputs_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label_retries</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inputs_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spin_retries</span><span class="p">)</span>

            <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">inputs_widget</span><span class="p">)</span>

            <span class="c1"># Table for show devices</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span> <span class="o">=</span> <span class="n">QTableWidget</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setColumnCount</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">header_labels</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setHorizontalHeaderLabels</span><span class="p">(</span><span class="n">header_labels</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">horizontalHeader</span><span class="p">()</span><span class="o">.</span><span class="n">setSectionResizeMode</span><span class="p">(</span><span class="n">QHeaderView</span><span class="o">.</span><span class="n">ResizeToContents</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">horizontalHeader</span><span class="p">()</span><span class="o">.</span><span class="n">setStretchLastSection</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setSortingEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

            <span class="c1"># Enable full row selection with multi-selection (each click toggles selection)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setSelectionBehavior</span><span class="p">(</span><span class="n">QTableWidget</span><span class="o">.</span><span class="n">SelectRows</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setSelectionMode</span><span class="p">(</span><span class="n">QTableWidget</span><span class="o">.</span><span class="n">MultiSelection</span><span class="p">)</span>
            <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">button_layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>

            <span class="c1"># Button for update data (operate for selected devices)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">btn_update</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Actualizar datos&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">btn_update</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">operation_with_selected_ips</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">btn_update</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">btn_activate_all</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Seleccionar todo&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">btn_activate_all</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">select_all_rows</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">btn_activate_all</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">btn_deactivate_all</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Deseleccionar todo&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">btn_deactivate_all</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deselect_all_rows</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">btn_deactivate_all</span><span class="p">)</span>

            <span class="n">layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">button_layout</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">label_updating</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Actualizando datos...&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">label_updating</span><span class="o">.</span><span class="n">setAlignment</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">label_updating</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label_updating</span><span class="p">)</span>

            <span class="c1"># Progress bar</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span> <span class="o">=</span> <span class="n">QProgressBar</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span><span class="o">.</span><span class="n">setMinimum</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span><span class="o">.</span><span class="n">setMaximum</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

            <span class="c1"># Set delegate for communication column (UI only)</span>
            <span class="n">combo_box_delegate</span> <span class="o">=</span> <span class="n">ComboBoxDelegate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItemDelegateForColumn</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">combo_box_delegate</span><span class="p">)</span>

            <span class="c1"># Load initial device data</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">load_data</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3501</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">on_change_timeout</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span> <span class="o">=</span> <span class="n">value</span>
            <span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Network_config&#39;</span><span class="p">,</span> <span class="s1">&#39;timeout&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spin_timeout</span><span class="o">.</span><span class="n">value</span><span class="p">()))</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">find_root_directory</span><span class="p">(),</span> <span class="s1">&#39;config.ini&#39;</span><span class="p">),</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">configfile</span><span class="p">:</span>
                <span class="n">config</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">configfile</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">on_change_retries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">retries</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">retries</span> <span class="o">=</span> <span class="n">value</span>
            <span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Network_config&#39;</span><span class="p">,</span> <span class="s1">&#39;retry_connection&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spin_retries</span><span class="o">.</span><span class="n">value</span><span class="p">()))</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">find_root_directory</span><span class="p">(),</span> <span class="s1">&#39;config.ini&#39;</span><span class="p">),</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">configfile</span><span class="p">:</span>
                <span class="n">config</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">configfile</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">load_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Loads data from a file specified by `self.file_path` and filters it based on </span>
<span class="sd">        specific criteria. The method reads each line of the file, splits it into </span>
<span class="sd">        parts, and checks if the last part (active status) indicates a truthy value </span>
<span class="sd">        (e.g., &#39;true&#39;, &#39;1&#39;, &#39;yes&#39;, &#39;verdadero&#39;, &#39;si&#39;). If the criteria are met, </span>
<span class="sd">        selected fields are extracted and appended to `self.data`.</span>

<span class="sd">        After processing the file, the data is loaded into a table using </span>
<span class="sd">        `self.load_data_into_table()`.</span>

<span class="sd">        Raises:</span>
<span class="sd">            BaseError: If an exception occurs during file reading or processing, </span>
<span class="sd">                       it raises a `BaseError` with code 3001 and the exception message.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">file</span><span class="p">:</span>
                    <span class="n">parts</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; - &quot;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">8</span> <span class="ow">and</span> <span class="n">parts</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;true&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;yes&#39;</span><span class="p">,</span> <span class="s1">&#39;verdadero&#39;</span><span class="p">,</span> <span class="s1">&#39;si&#39;</span><span class="p">]:</span>
                        <span class="c1"># Unpack only the required fields for display</span>
                        <span class="n">district</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">point</span><span class="p">,</span> <span class="n">ip</span><span class="p">,</span> <span class="n">id_val</span><span class="p">,</span> <span class="n">communication</span><span class="p">,</span> <span class="n">battery</span><span class="p">,</span> <span class="n">active</span> <span class="o">=</span> <span class="n">parts</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">district</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">point</span><span class="p">,</span> <span class="n">ip</span><span class="p">,</span> <span class="n">id_val</span><span class="p">,</span> <span class="n">communication</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">load_data_into_table</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3001</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">load_data_into_table</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Populates the table widget with data from the `self.data` attribute.</span>

<span class="sd">        This method clears any existing rows in the table widget and inserts new rows</span>
<span class="sd">        based on the records in `self.data`. Each cell is populated with non-editable</span>
<span class="sd">        items, and the background color of the cells is set to light gray. After</span>
<span class="sd">        populating the table, the method adjusts the table&#39;s size to fit its content.</span>

<span class="sd">        Steps:</span>

<span class="sd">        1. Clears all rows in the table widget.</span>
<span class="sd">        2. Iterates through the records in `self.data` and inserts rows into the table.</span>
<span class="sd">        3. Creates non-editable table items for each cell and sets their background color.</span>
<span class="sd">        4. Adjusts the table size to fit the content.</span>

<span class="sd">        Note:</span>
<span class="sd">            - The `self.data` attribute is expected to be an iterable of records, where</span>
<span class="sd">              each record is an iterable of values corresponding to table columns.</span>
<span class="sd">            - The table widget is assumed to be an instance of QTableWidget.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setRowCount</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">row_index</span><span class="p">,</span> <span class="n">record</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">insertRow</span><span class="p">(</span><span class="n">row_index</span><span class="p">)</span>
            <span class="c1"># Create non-editable items for each column</span>
            <span class="k">for</span> <span class="n">col_index</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">record</span><span class="p">):</span>
                <span class="n">item</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
                <span class="n">item</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">flags</span><span class="p">()</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsEditable</span><span class="p">)</span>
                <span class="n">item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">lightGray</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_index</span><span class="p">,</span> <span class="n">col_index</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">adjust_size_to_table</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">operation_with_selected_ips</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles operations with the selected IP addresses from the table widget.</span>
<span class="sd">        This method retrieves the selected rows from the table widget, extracts the IP addresses</span>
<span class="sd">        from a specific column, and performs an operation on the selected IPs using a separate thread.</span>
<span class="sd">        It also updates the UI to reflect the ongoing operation and handles progress updates.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If no devices are selected, a message box is displayed, and an exception is raised.</span>
<span class="sd">            BaseError: If any other exception occurs during the execution of the method.</span>

<span class="sd">        Attributes:</span>
<span class="sd">            selected_ips (list[str]): A list to store the IP addresses of the selected devices.</span>

<span class="sd">        UI Updates:</span>
<span class="sd">            - Hides the table widget.</span>
<span class="sd">            - Sorts the table widget by the IP column in descending order.</span>
<span class="sd">            - Updates labels and buttons to indicate the operation is in progress.</span>
<span class="sd">            - Displays a progress bar to show the operation&#39;s progress.</span>

<span class="sd">        Threads:</span>
<span class="sd">            - Creates and starts an `OperationThread` to perform the operation on the selected IPs.</span>
<span class="sd">            - Connects thread signals to appropriate methods for progress updates, termination, and cleanup.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>        
            <span class="bp">self</span><span class="o">.</span><span class="n">selected_ips</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="c1"># Retrieve selected rows via the selection model</span>
            <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">selectionModel</span><span class="p">()</span><span class="o">.</span><span class="n">selectedRows</span><span class="p">():</span>
                <span class="n">row</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>
                <span class="n">ip</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>  <span class="c1"># Column 3 holds the IP</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">selected_ips</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ip</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_ips</span><span class="p">:</span>
                <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Sin selección&quot;</span><span class="p">,</span> <span class="s2">&quot;No se seleccionaron dispositivos&quot;</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;No se seleccionaron dispositivos&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">inputs_widget</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">sortByColumn</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">DescendingOrder</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">label_updating</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Actualizando datos...&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">btn_update</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">btn_activate_all</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">btn_deactivate_all</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">label_updating</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="c1">#logging.debug(f&quot;Dispositivos seleccionados: {self.selected_ips}&quot;)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">op_thread</span> <span class="o">=</span> <span class="n">OperationThread</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">op_function</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_ips</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">op_thread</span><span class="o">.</span><span class="n">progress_updated</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update_progress</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">op_thread</span><span class="o">.</span><span class="n">op_terminate</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">op_terminate</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">op_thread</span><span class="o">.</span><span class="n">finished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cleanup_thread</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">op_thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">cleanup_thread</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cleans up the operation thread by scheduling its deletion.</span>

<span class="sd">        This method ensures that the `op_thread` object is properly deleted</span>
<span class="sd">        using the `deleteLater()` method, which schedules the object for</span>
<span class="sd">        deletion once it is safe to do so, typically after all pending events</span>
<span class="sd">        have been processed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">op_thread</span><span class="o">.</span><span class="n">deleteLater</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">op_terminate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">devices</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Resets the UI components to their default visible states after an operation.</span>

<span class="sd">        Args:</span>
<span class="sd">            devices (optional): A parameter for devices, currently unused in the method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inputs_widget</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_update</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_activate_all</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_deactivate_all</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_updating</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">column_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">column_name</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if a column with the specified name exists in the table widget.</span>

<span class="sd">        Args:</span>
<span class="sd">            column_name (str): The name of the column to check for existence.</span>

<span class="sd">        Returns:</span>
<span class="sd">            (bool): True if the column exists, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">horizontalHeaderItem</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">columnCount</span><span class="p">())]</span>
        <span class="k">return</span> <span class="n">column_name</span> <span class="ow">in</span> <span class="n">headers</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_column_number</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">column_name</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieves the index of a column in the table widget based on the column&#39;s name.</span>

<span class="sd">        Args:</span>
<span class="sd">            column_name (str): The name of the column to search for.</span>

<span class="sd">        Returns:</span>
<span class="sd">            (int): The index of the column if found, otherwise -1.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">columnCount</span><span class="p">()):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">horizontalHeaderItem</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="o">==</span> <span class="n">column_name</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">i</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update_progress</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">percent_progress</span><span class="p">,</span> <span class="n">device_progress</span><span class="p">,</span> <span class="n">processed_devices</span><span class="p">,</span> <span class="n">total_devices</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the progress bar and status label with the current progress of device processing.</span>

<span class="sd">        Args:</span>
<span class="sd">            percent_progress (int): The overall progress percentage to be displayed on the progress bar.</span>
<span class="sd">            device_progress (str): A message indicating the status of the last connection attempt.</span>
<span class="sd">            processed_devices (int): The number of devices that have been processed so far.</span>
<span class="sd">            total_devices (int): The total number of devices to be processed.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">percent_progress</span> <span class="ow">and</span> <span class="n">device_progress</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">percent_progress</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">label_updating</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Último intento de conexión: </span><span class="si">{</span><span class="n">device_progress</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">processed_devices</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">total_devices</span><span class="si">}</span><span class="s2"> dispositivos&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">select_all_rows</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Selects all rows in the table widget that are not already selected.</span>
<span class="sd">        This method retrieves the list of currently selected rows in the table widget</span>
<span class="sd">        and iterates through all rows in the table. If a row is not already selected,</span>
<span class="sd">        it selects the row.</span>

<span class="sd">        Note:</span>
<span class="sd">            - The method assumes that `self.table_widget` is a valid QTableWidget or</span>
<span class="sd">              similar widget with `selectionModel`, `selectedRows`, `rowCount`, and</span>
<span class="sd">              `selectRow` methods.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">selected_rows</span> <span class="o">=</span> <span class="p">[</span><span class="n">index</span><span class="o">.</span><span class="n">row</span><span class="p">()</span> <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">selectionModel</span><span class="p">()</span><span class="o">.</span><span class="n">selectedRows</span><span class="p">()]</span>

        <span class="n">row_count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">row_count</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">row</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">selected_rows</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">selectRow</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">deselect_all_rows</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deselects all rows in the table widget.</span>

<span class="sd">        This method clears the current selection in the table widget,</span>
<span class="sd">        ensuring that no rows remain selected.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">clearSelection</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">ensure_column_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">column_name</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Ensures that a column with the specified name exists in the table widget. </span>
<span class="sd">        If the column does not exist, it creates a new column with the given name.</span>
<span class="sd">        If the column already exists, it retrieves its index.</span>

<span class="sd">        Args:</span>
<span class="sd">            column_name (str): The name of the column to ensure exists.</span>

<span class="sd">        Returns:</span>
<span class="sd">            (int): The index of the column in the table widget.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">column_exists</span><span class="p">(</span><span class="n">column_name</span><span class="p">):</span>
            <span class="c1"># Add a new column to the table</span>
            <span class="n">actual_column</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">columnCount</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setColumnCount</span><span class="p">(</span><span class="n">actual_column</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setHorizontalHeaderItem</span><span class="p">(</span><span class="n">actual_column</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">column_name</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Get the column number</span>
            <span class="n">actual_column</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_column_number</span><span class="p">(</span><span class="n">column_name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">actual_column</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h5 id="src.ui.base_select_devices_dialog.SelectDevicesDialog.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">op_function</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">window_title</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Initializes the BaseSelectDevicesDialog class.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>parent</code>
            </td>
            <td>
                  <code><span title="PyQt5.QtWidgets.QWidget">QWidget</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The parent widget for this dialog. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>op_function</code>
            </td>
            <td>
                  <code><span title="callable">callable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A callable operation function to be executed. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>window_title</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The title of the dialog window. Defaults to an empty string.</p>
              </div>
            </td>
            <td>
                  <code>&#39;&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="src.ui.base_select_devices_dialog.SelectDevicesDialog.__init__.op_function">op_function</span></code></td>
            <td>
                  <code><span title="callable">callable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Stores the operation function passed as an argument.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="src.ui.base_select_devices_dialog.SelectDevicesDialog.__init__.file_path">file_path</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The file path to the "info_devices.txt" file, located in the current working directory.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="src.ui.base_select_devices_dialog.SelectDevicesDialog.__init__.data">data</span></code></td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list to store device-related data.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseError">BaseError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an exception occurs during initialization, it raises a BaseError with code 3501 and the error message.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\base_select_devices_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">op_function</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">window_title</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the BaseSelectDevicesDialog class.</span>

<span class="sd">    Args:</span>
<span class="sd">        parent (QWidget, optional): The parent widget for this dialog. Defaults to None.</span>
<span class="sd">        op_function (callable, optional): A callable operation function to be executed. Defaults to None.</span>
<span class="sd">        window_title (str, optional): The title of the dialog window. Defaults to an empty string.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        op_function (callable): Stores the operation function passed as an argument.</span>
<span class="sd">        file_path (str): The file path to the &quot;info_devices.txt&quot; file, located in the current working directory.</span>
<span class="sd">        data (list): A list to store device-related data.</span>

<span class="sd">    Raises:</span>
<span class="sd">        BaseError: If an exception occurs during initialization, it raises a BaseError with code 3501 and the error message.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">window_title</span><span class="o">=</span><span class="n">window_title</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">op_function</span> <span class="o">=</span> <span class="n">op_function</span>
        <span class="c1"># File path containing device information</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="s2">&quot;info_devices.txt&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3501</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.base_select_devices_dialog.SelectDevicesDialog.cleanup_thread" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">cleanup_thread</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Cleans up the operation thread by scheduling its deletion.</p>
<p>This method ensures that the <code>op_thread</code> object is properly deleted
using the <code>deleteLater()</code> method, which schedules the object for
deletion once it is safe to do so, typically after all pending events
have been processed.</p>


            <details class="quote">
              <summary>Source code in <code>src\ui\base_select_devices_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">cleanup_thread</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Cleans up the operation thread by scheduling its deletion.</span>

<span class="sd">    This method ensures that the `op_thread` object is properly deleted</span>
<span class="sd">    using the `deleteLater()` method, which schedules the object for</span>
<span class="sd">    deletion once it is safe to do so, typically after all pending events</span>
<span class="sd">    have been processed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">op_thread</span><span class="o">.</span><span class="n">deleteLater</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.base_select_devices_dialog.SelectDevicesDialog.column_exists" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">column_exists</span><span class="p">(</span><span class="n">column_name</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Checks if a column with the specified name exists in the table widget.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>column_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the column to check for existence.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the column exists, False otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\base_select_devices_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">column_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">column_name</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks if a column with the specified name exists in the table widget.</span>

<span class="sd">    Args:</span>
<span class="sd">        column_name (str): The name of the column to check for existence.</span>

<span class="sd">    Returns:</span>
<span class="sd">        (bool): True if the column exists, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">horizontalHeaderItem</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">columnCount</span><span class="p">())]</span>
    <span class="k">return</span> <span class="n">column_name</span> <span class="ow">in</span> <span class="n">headers</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.base_select_devices_dialog.SelectDevicesDialog.deselect_all_rows" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">deselect_all_rows</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Deselects all rows in the table widget.</p>
<p>This method clears the current selection in the table widget,
ensuring that no rows remain selected.</p>


            <details class="quote">
              <summary>Source code in <code>src\ui\base_select_devices_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">deselect_all_rows</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deselects all rows in the table widget.</span>

<span class="sd">    This method clears the current selection in the table widget,</span>
<span class="sd">    ensuring that no rows remain selected.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">clearSelection</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.base_select_devices_dialog.SelectDevicesDialog.ensure_column_exists" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ensure_column_exists</span><span class="p">(</span><span class="n">column_name</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Ensures that a column with the specified name exists in the table widget. 
If the column does not exist, it creates a new column with the given name.
If the column already exists, it retrieves its index.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>column_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the column to ensure exists.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The index of the column in the table widget.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\base_select_devices_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">ensure_column_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">column_name</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Ensures that a column with the specified name exists in the table widget. </span>
<span class="sd">    If the column does not exist, it creates a new column with the given name.</span>
<span class="sd">    If the column already exists, it retrieves its index.</span>

<span class="sd">    Args:</span>
<span class="sd">        column_name (str): The name of the column to ensure exists.</span>

<span class="sd">    Returns:</span>
<span class="sd">        (int): The index of the column in the table widget.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">column_exists</span><span class="p">(</span><span class="n">column_name</span><span class="p">):</span>
        <span class="c1"># Add a new column to the table</span>
        <span class="n">actual_column</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">columnCount</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setColumnCount</span><span class="p">(</span><span class="n">actual_column</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setHorizontalHeaderItem</span><span class="p">(</span><span class="n">actual_column</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">column_name</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Get the column number</span>
        <span class="n">actual_column</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_column_number</span><span class="p">(</span><span class="n">column_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">actual_column</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.base_select_devices_dialog.SelectDevicesDialog.get_column_number" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_column_number</span><span class="p">(</span><span class="n">column_name</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Retrieves the index of a column in the table widget based on the column's name.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>column_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the column to search for.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The index of the column if found, otherwise -1.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\base_select_devices_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_column_number</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">column_name</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieves the index of a column in the table widget based on the column&#39;s name.</span>

<span class="sd">    Args:</span>
<span class="sd">        column_name (str): The name of the column to search for.</span>

<span class="sd">    Returns:</span>
<span class="sd">        (int): The index of the column if found, otherwise -1.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">columnCount</span><span class="p">()):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">horizontalHeaderItem</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="o">==</span> <span class="n">column_name</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">i</span>
    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.base_select_devices_dialog.SelectDevicesDialog.init_ui" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">init_ui</span><span class="p">(</span><span class="n">header_labels</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Initializes the user interface for the device selection dialog.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>header_labels</code>
            </td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of strings representing the column headers for the table.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<details class="ui-components" open>
  <summary>UI Components</summary>
  <ul>
<li>QVBoxLayout: Main layout for the dialog.</li>
<li>QTableWidget: Table widget to display devices with configurable columns and sorting enabled.</li>
<li>QPushButton: Buttons for updating data, selecting all rows, and deselecting all rows.</li>
<li>QLabel: Label to display a message when data is being updated.</li>
<li>QProgressBar: Progress bar to indicate the progress of data updates.</li>
<li>ComboBoxDelegate: Delegate for the communication column to provide a combo box UI.</li>
</ul>
</details>

<details class="features" open>
  <summary>Features</summary>
  <ul>
<li>Multi-selection enabled for the table with full row selection.</li>
<li>Buttons to select all rows, deselect all rows, and perform operations on selected devices.</li>
<li>Progress bar and label for visual feedback during data updates.</li>
<li>Automatic loading of initial device data into the table.</li>
</ul>
</details>

<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseError">BaseError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an exception occurs during the initialization process, it raises a BaseError with code 3501.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\base_select_devices_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">init_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">header_labels</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the user interface for the device selection dialog.</span>

<span class="sd">    Args:</span>
<span class="sd">        header_labels (list): A list of strings representing the column headers for the table.</span>

<span class="sd">    UI Components:</span>
<span class="sd">        - QVBoxLayout: Main layout for the dialog.</span>
<span class="sd">        - QTableWidget: Table widget to display devices with configurable columns and sorting enabled.</span>
<span class="sd">        - QPushButton: Buttons for updating data, selecting all rows, and deselecting all rows.</span>
<span class="sd">        - QLabel: Label to display a message when data is being updated.</span>
<span class="sd">        - QProgressBar: Progress bar to indicate the progress of data updates.</span>
<span class="sd">        - ComboBoxDelegate: Delegate for the communication column to provide a combo box UI.</span>

<span class="sd">    Features:</span>
<span class="sd">        - Multi-selection enabled for the table with full row selection.</span>
<span class="sd">        - Buttons to select all rows, deselect all rows, and perform operations on selected devices.</span>
<span class="sd">        - Progress bar and label for visual feedback during data updates.</span>
<span class="sd">        - Automatic loading of initial device data into the table.</span>

<span class="sd">    Raises:</span>
<span class="sd">        BaseError: If an exception occurs during the initialization process, it raises a BaseError with code 3501.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="kn">from</span><span class="w"> </span><span class="nn">PyQt5.QtWidgets</span><span class="w"> </span><span class="kn">import</span> <span class="n">QHBoxLayout</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">inputs_widget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inputs_layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">inputs_widget</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">label_timeout</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Tiempo de Espera:&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spin_timeout</span> <span class="o">=</span> <span class="n">QSpinBox</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spin_timeout</span><span class="o">.</span><span class="n">setMinimum</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spin_timeout</span><span class="o">.</span><span class="n">setMaximum</span><span class="p">(</span><span class="mi">999</span><span class="p">)</span>
        <span class="n">config</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">find_root_directory</span><span class="p">(),</span> <span class="s1">&#39;config.ini&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">getint</span><span class="p">(</span><span class="s1">&#39;Network_config&#39;</span><span class="p">,</span> <span class="s1">&#39;timeout&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spin_timeout</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spin_timeout</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spin_timeout</span><span class="o">.</span><span class="n">valueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_change_timeout</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">label_retries</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Reintentos:&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spin_retries</span> <span class="o">=</span> <span class="n">QSpinBox</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spin_retries</span><span class="o">.</span><span class="n">setMinimum</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spin_retries</span><span class="o">.</span><span class="n">setMaximum</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">retries</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">getint</span><span class="p">(</span><span class="s1">&#39;Network_config&#39;</span><span class="p">,</span> <span class="s1">&#39;retry_connection&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">retries</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spin_retries</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">retries</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spin_retries</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spin_retries</span><span class="o">.</span><span class="n">valueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_change_retries</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">inputs_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label_timeout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inputs_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spin_timeout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inputs_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label_retries</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inputs_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spin_retries</span><span class="p">)</span>

        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">inputs_widget</span><span class="p">)</span>

        <span class="c1"># Table for show devices</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span> <span class="o">=</span> <span class="n">QTableWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setColumnCount</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">header_labels</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setHorizontalHeaderLabels</span><span class="p">(</span><span class="n">header_labels</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">horizontalHeader</span><span class="p">()</span><span class="o">.</span><span class="n">setSectionResizeMode</span><span class="p">(</span><span class="n">QHeaderView</span><span class="o">.</span><span class="n">ResizeToContents</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">horizontalHeader</span><span class="p">()</span><span class="o">.</span><span class="n">setStretchLastSection</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setSortingEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># Enable full row selection with multi-selection (each click toggles selection)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setSelectionBehavior</span><span class="p">(</span><span class="n">QTableWidget</span><span class="o">.</span><span class="n">SelectRows</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setSelectionMode</span><span class="p">(</span><span class="n">QTableWidget</span><span class="o">.</span><span class="n">MultiSelection</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">button_layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>

        <span class="c1"># Button for update data (operate for selected devices)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_update</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Actualizar datos&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_update</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">operation_with_selected_ips</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">button_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">btn_update</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">btn_activate_all</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Seleccionar todo&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_activate_all</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">select_all_rows</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">button_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">btn_activate_all</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">btn_deactivate_all</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Deseleccionar todo&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_deactivate_all</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deselect_all_rows</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">button_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">btn_deactivate_all</span><span class="p">)</span>

        <span class="n">layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">button_layout</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">label_updating</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Actualizando datos...&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_updating</span><span class="o">.</span><span class="n">setAlignment</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_updating</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label_updating</span><span class="p">)</span>

        <span class="c1"># Progress bar</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span> <span class="o">=</span> <span class="n">QProgressBar</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span><span class="o">.</span><span class="n">setMinimum</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span><span class="o">.</span><span class="n">setMaximum</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

        <span class="c1"># Set delegate for communication column (UI only)</span>
        <span class="n">combo_box_delegate</span> <span class="o">=</span> <span class="n">ComboBoxDelegate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItemDelegateForColumn</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">combo_box_delegate</span><span class="p">)</span>

        <span class="c1"># Load initial device data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_data</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3501</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.base_select_devices_dialog.SelectDevicesDialog.load_data" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_data</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Loads data from a file specified by <code>self.file_path</code> and filters it based on 
specific criteria. The method reads each line of the file, splits it into 
parts, and checks if the last part (active status) indicates a truthy value 
(e.g., 'true', '1', 'yes', 'verdadero', 'si'). If the criteria are met, 
selected fields are extracted and appended to <code>self.data</code>.</p>
<p>After processing the file, the data is loaded into a table using 
<code>self.load_data_into_table()</code>.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseError">BaseError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an exception occurs during file reading or processing, 
       it raises a <code>BaseError</code> with code 3001 and the exception message.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\base_select_devices_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Loads data from a file specified by `self.file_path` and filters it based on </span>
<span class="sd">    specific criteria. The method reads each line of the file, splits it into </span>
<span class="sd">    parts, and checks if the last part (active status) indicates a truthy value </span>
<span class="sd">    (e.g., &#39;true&#39;, &#39;1&#39;, &#39;yes&#39;, &#39;verdadero&#39;, &#39;si&#39;). If the criteria are met, </span>
<span class="sd">    selected fields are extracted and appended to `self.data`.</span>

<span class="sd">    After processing the file, the data is loaded into a table using </span>
<span class="sd">    `self.load_data_into_table()`.</span>

<span class="sd">    Raises:</span>
<span class="sd">        BaseError: If an exception occurs during file reading or processing, </span>
<span class="sd">                   it raises a `BaseError` with code 3001 and the exception message.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">file</span><span class="p">:</span>
                <span class="n">parts</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; - &quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">8</span> <span class="ow">and</span> <span class="n">parts</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;true&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;yes&#39;</span><span class="p">,</span> <span class="s1">&#39;verdadero&#39;</span><span class="p">,</span> <span class="s1">&#39;si&#39;</span><span class="p">]:</span>
                    <span class="c1"># Unpack only the required fields for display</span>
                    <span class="n">district</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">point</span><span class="p">,</span> <span class="n">ip</span><span class="p">,</span> <span class="n">id_val</span><span class="p">,</span> <span class="n">communication</span><span class="p">,</span> <span class="n">battery</span><span class="p">,</span> <span class="n">active</span> <span class="o">=</span> <span class="n">parts</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">district</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">point</span><span class="p">,</span> <span class="n">ip</span><span class="p">,</span> <span class="n">id_val</span><span class="p">,</span> <span class="n">communication</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_data_into_table</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3001</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.base_select_devices_dialog.SelectDevicesDialog.load_data_into_table" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_data_into_table</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Populates the table widget with data from the <code>self.data</code> attribute.</p>
<p>This method clears any existing rows in the table widget and inserts new rows
based on the records in <code>self.data</code>. Each cell is populated with non-editable
items, and the background color of the cells is set to light gray. After
populating the table, the method adjusts the table's size to fit its content.</p>
<p>Steps:</p>
<ol>
<li>Clears all rows in the table widget.</li>
<li>Iterates through the records in <code>self.data</code> and inserts rows into the table.</li>
<li>Creates non-editable table items for each cell and sets their background color.</li>
<li>Adjusts the table size to fit the content.</li>
</ol>


<details class="note" open>
  <summary>Note</summary>
  <ul>
<li>The <code>self.data</code> attribute is expected to be an iterable of records, where
  each record is an iterable of values corresponding to table columns.</li>
<li>The table widget is assumed to be an instance of QTableWidget.</li>
</ul>
</details>

            <details class="quote">
              <summary>Source code in <code>src\ui\base_select_devices_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_data_into_table</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Populates the table widget with data from the `self.data` attribute.</span>

<span class="sd">    This method clears any existing rows in the table widget and inserts new rows</span>
<span class="sd">    based on the records in `self.data`. Each cell is populated with non-editable</span>
<span class="sd">    items, and the background color of the cells is set to light gray. After</span>
<span class="sd">    populating the table, the method adjusts the table&#39;s size to fit its content.</span>

<span class="sd">    Steps:</span>

<span class="sd">    1. Clears all rows in the table widget.</span>
<span class="sd">    2. Iterates through the records in `self.data` and inserts rows into the table.</span>
<span class="sd">    3. Creates non-editable table items for each cell and sets their background color.</span>
<span class="sd">    4. Adjusts the table size to fit the content.</span>

<span class="sd">    Note:</span>
<span class="sd">        - The `self.data` attribute is expected to be an iterable of records, where</span>
<span class="sd">          each record is an iterable of values corresponding to table columns.</span>
<span class="sd">        - The table widget is assumed to be an instance of QTableWidget.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setRowCount</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">row_index</span><span class="p">,</span> <span class="n">record</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">insertRow</span><span class="p">(</span><span class="n">row_index</span><span class="p">)</span>
        <span class="c1"># Create non-editable items for each column</span>
        <span class="k">for</span> <span class="n">col_index</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">record</span><span class="p">):</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
            <span class="n">item</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">flags</span><span class="p">()</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsEditable</span><span class="p">)</span>
            <span class="n">item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">lightGray</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_index</span><span class="p">,</span> <span class="n">col_index</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">adjust_size_to_table</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.base_select_devices_dialog.SelectDevicesDialog.op_terminate" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">op_terminate</span><span class="p">(</span><span class="n">devices</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Resets the UI components to their default visible states after an operation.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>devices</code>
            </td>
            <td>
                  <code><span title="optional">optional</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A parameter for devices, currently unused in the method.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\base_select_devices_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">op_terminate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">devices</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Resets the UI components to their default visible states after an operation.</span>

<span class="sd">    Args:</span>
<span class="sd">        devices (optional): A parameter for devices, currently unused in the method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">inputs_widget</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">btn_update</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">btn_activate_all</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">btn_deactivate_all</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">label_updating</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.base_select_devices_dialog.SelectDevicesDialog.operation_with_selected_ips" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">operation_with_selected_ips</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Handles operations with the selected IP addresses from the table widget.
This method retrieves the selected rows from the table widget, extracts the IP addresses
from a specific column, and performs an operation on the selected IPs using a separate thread.
It also updates the UI to reflect the ongoing operation and handles progress updates.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If no devices are selected, a message box is displayed, and an exception is raised.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseError">BaseError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If any other exception occurs during the execution of the method.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="src.ui.base_select_devices_dialog.SelectDevicesDialog.operation_with_selected_ips.selected_ips">selected_ips</span></code></td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list to store the IP addresses of the selected devices.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="ui-updates" open>
  <summary>UI Updates</summary>
  <ul>
<li>Hides the table widget.</li>
<li>Sorts the table widget by the IP column in descending order.</li>
<li>Updates labels and buttons to indicate the operation is in progress.</li>
<li>Displays a progress bar to show the operation's progress.</li>
</ul>
</details>

<details class="threads" open>
  <summary>Threads</summary>
  <ul>
<li>Creates and starts an <code>OperationThread</code> to perform the operation on the selected IPs.</li>
<li>Connects thread signals to appropriate methods for progress updates, termination, and cleanup.</li>
</ul>
</details>

            <details class="quote">
              <summary>Source code in <code>src\ui\base_select_devices_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">operation_with_selected_ips</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles operations with the selected IP addresses from the table widget.</span>
<span class="sd">    This method retrieves the selected rows from the table widget, extracts the IP addresses</span>
<span class="sd">    from a specific column, and performs an operation on the selected IPs using a separate thread.</span>
<span class="sd">    It also updates the UI to reflect the ongoing operation and handles progress updates.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If no devices are selected, a message box is displayed, and an exception is raised.</span>
<span class="sd">        BaseError: If any other exception occurs during the execution of the method.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        selected_ips (list[str]): A list to store the IP addresses of the selected devices.</span>

<span class="sd">    UI Updates:</span>
<span class="sd">        - Hides the table widget.</span>
<span class="sd">        - Sorts the table widget by the IP column in descending order.</span>
<span class="sd">        - Updates labels and buttons to indicate the operation is in progress.</span>
<span class="sd">        - Displays a progress bar to show the operation&#39;s progress.</span>

<span class="sd">    Threads:</span>
<span class="sd">        - Creates and starts an `OperationThread` to perform the operation on the selected IPs.</span>
<span class="sd">        - Connects thread signals to appropriate methods for progress updates, termination, and cleanup.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>        
        <span class="bp">self</span><span class="o">.</span><span class="n">selected_ips</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># Retrieve selected rows via the selection model</span>
        <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">selectionModel</span><span class="p">()</span><span class="o">.</span><span class="n">selectedRows</span><span class="p">():</span>
            <span class="n">row</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>
            <span class="n">ip</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>  <span class="c1"># Column 3 holds the IP</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">selected_ips</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ip</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_ips</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Sin selección&quot;</span><span class="p">,</span> <span class="s2">&quot;No se seleccionaron dispositivos&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;No se seleccionaron dispositivos&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inputs_widget</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">sortByColumn</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">DescendingOrder</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">label_updating</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Actualizando datos...&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">btn_update</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">btn_activate_all</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">btn_deactivate_all</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">label_updating</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="c1">#logging.debug(f&quot;Dispositivos seleccionados: {self.selected_ips}&quot;)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">op_thread</span> <span class="o">=</span> <span class="n">OperationThread</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">op_function</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_ips</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">op_thread</span><span class="o">.</span><span class="n">progress_updated</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update_progress</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">op_thread</span><span class="o">.</span><span class="n">op_terminate</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">op_terminate</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">op_thread</span><span class="o">.</span><span class="n">finished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cleanup_thread</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">op_thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.base_select_devices_dialog.SelectDevicesDialog.select_all_rows" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">select_all_rows</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Selects all rows in the table widget that are not already selected.
This method retrieves the list of currently selected rows in the table widget
and iterates through all rows in the table. If a row is not already selected,
it selects the row.</p>


<details class="note" open>
  <summary>Note</summary>
  <ul>
<li>The method assumes that <code>self.table_widget</code> is a valid QTableWidget or
  similar widget with <code>selectionModel</code>, <code>selectedRows</code>, <code>rowCount</code>, and
  <code>selectRow</code> methods.</li>
</ul>
</details>

            <details class="quote">
              <summary>Source code in <code>src\ui\base_select_devices_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">select_all_rows</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Selects all rows in the table widget that are not already selected.</span>
<span class="sd">    This method retrieves the list of currently selected rows in the table widget</span>
<span class="sd">    and iterates through all rows in the table. If a row is not already selected,</span>
<span class="sd">    it selects the row.</span>

<span class="sd">    Note:</span>
<span class="sd">        - The method assumes that `self.table_widget` is a valid QTableWidget or</span>
<span class="sd">          similar widget with `selectionModel`, `selectedRows`, `rowCount`, and</span>
<span class="sd">          `selectRow` methods.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">selected_rows</span> <span class="o">=</span> <span class="p">[</span><span class="n">index</span><span class="o">.</span><span class="n">row</span><span class="p">()</span> <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">selectionModel</span><span class="p">()</span><span class="o">.</span><span class="n">selectedRows</span><span class="p">()]</span>

    <span class="n">row_count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">row_count</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">row</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">selected_rows</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">selectRow</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.base_select_devices_dialog.SelectDevicesDialog.update_progress" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_progress</span><span class="p">(</span><span class="n">percent_progress</span><span class="p">,</span> <span class="n">device_progress</span><span class="p">,</span> <span class="n">processed_devices</span><span class="p">,</span> <span class="n">total_devices</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Updates the progress bar and status label with the current progress of device processing.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>percent_progress</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The overall progress percentage to be displayed on the progress bar.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>device_progress</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A message indicating the status of the last connection attempt.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>processed_devices</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The number of devices that have been processed so far.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>total_devices</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The total number of devices to be processed.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\base_select_devices_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">update_progress</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">percent_progress</span><span class="p">,</span> <span class="n">device_progress</span><span class="p">,</span> <span class="n">processed_devices</span><span class="p">,</span> <span class="n">total_devices</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Updates the progress bar and status label with the current progress of device processing.</span>

<span class="sd">    Args:</span>
<span class="sd">        percent_progress (int): The overall progress percentage to be displayed on the progress bar.</span>
<span class="sd">        device_progress (str): A message indicating the status of the last connection attempt.</span>
<span class="sd">        processed_devices (int): The number of devices that have been processed so far.</span>
<span class="sd">        total_devices (int): The total number of devices to be processed.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">percent_progress</span> <span class="ow">and</span> <span class="n">device_progress</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">percent_progress</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_updating</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Último intento de conexión: </span><span class="si">{</span><span class="n">device_progress</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">processed_devices</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">total_devices</span><span class="si">}</span><span class="s2"> dispositivos&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="src.ui.icon_manager" class="doc doc-heading">
            <code>icon_manager</code>


</h3>

    <div class="doc doc-contents ">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h4 id="src.ui.icon_manager.MainWindow" class="doc doc-heading">
            <code>MainWindow</code>


</h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="PyQt5.QtWidgets.QMainWindow">QMainWindow</span></code></p>








              <details class="quote">
                <summary>Source code in <code>src\ui\icon_manager.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">MainWindow</span><span class="p">(</span><span class="n">QMainWindow</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the IconManager class.</span>
<span class="sd">        This constructor sets up the initial state of the application, including</span>
<span class="sd">        the system tray icon, configuration settings, and application startup behavior.</span>
<span class="sd">        It also handles potential duplicate instances of the application.</span>

<span class="sd">        Attributes:</span>
<span class="sd">            is_running (bool): Indicates if the application is currently running.</span>
<span class="sd">            checked_clear_attendance (bool): State of the &quot;clear attendance&quot; checkbox,</span>
<span class="sd">                retrieved from the configuration file.</span>
<span class="sd">            checked_automatic_init (bool): Indicates if the application is set to start</span>
<span class="sd">                automatically on system startup.</span>
<span class="sd">            tray_icon (QSystemTrayIcon): The system tray icon for the application.</span>

<span class="sd">        Raises:</span>
<span class="sd">            BaseError: If an exception occurs during initialization, it raises a</span>
<span class="sd">                BaseError with an error code, message, and severity level.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">is_running</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># Variable to indicate if the application is running</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">checked_clear_attendance</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;Device_config&#39;</span><span class="p">][</span><span class="s1">&#39;clear_attendance&#39;</span><span class="p">])</span>  <span class="c1"># State of the clear attendance checkbox</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">checked_automatic_init</span> <span class="o">=</span> <span class="n">is_startup_entry_exists</span><span class="p">(</span><span class="s2">&quot;Programa Reloj de Asistencias&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="p">:</span> <span class="n">QSystemTrayIcon</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Variable to store the QSystemTrayIcon</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init_ui</span><span class="p">()</span>  <span class="c1"># Initialize the user interface</span>

            <span class="c1"># Set the initial tray icon to loading.png</span>
            <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">find_marker_directory</span><span class="p">(</span><span class="s2">&quot;resources&quot;</span><span class="p">),</span> <span class="s2">&quot;resources&quot;</span><span class="p">,</span> <span class="s2">&quot;system_tray&quot;</span><span class="p">,</span> <span class="s2">&quot;loading.png&quot;</span><span class="p">)</span>  <span class="c1"># Icon file path</span>
            <span class="c1"># logging.debug(file_path)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="n">file_path</span><span class="p">))</span>

<span class="w">            </span><span class="sd">&quot;&quot;&quot; if not is_user_admin():</span>
<span class="sd">                run_as_admin()</span>
<span class="sd">            &quot;&quot;&quot;</span>

            <span class="c1">#if verify_duplicated_instance(sys.argv[0]):</span>
            <span class="c1">#    exit_duplicated_instance()</span>

            <span class="c1"># Change the tray icon to program-icon.png after all initializations</span>
            <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">find_marker_directory</span><span class="p">(</span><span class="s2">&quot;resources&quot;</span><span class="p">),</span> <span class="s2">&quot;resources&quot;</span><span class="p">,</span> <span class="s2">&quot;system_tray&quot;</span><span class="p">,</span> <span class="s2">&quot;program-icon.png&quot;</span><span class="p">)</span>  <span class="c1"># Icon file path</span>
            <span class="c1"># logging.debug(file_path)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="n">file_path</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3501</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="s2">&quot;critical&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__init_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the user interface components for the application.</span>

<span class="sd">        This method is responsible for setting up and configuring the system tray icon</span>
<span class="sd">        by invoking the necessary helper methods. It ensures that the system tray icon</span>
<span class="sd">        is properly created and ready for use.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Create and configure the system tray icon</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__create_tray_icon</span><span class="p">()</span>  <span class="c1"># Create the system tray icon        </span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__create_tray_icon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates and configures the system tray icon for the application.</span>
<span class="sd">        This method initializes a QSystemTrayIcon with a tooltip and a custom context menu</span>
<span class="sd">        containing various actions for interacting with the application. The context menu</span>
<span class="sd">        includes options for modifying devices, restarting devices, testing connections,</span>
<span class="sd">        updating device time, fetching attendances, and toggling specific settings. It also</span>
<span class="sd">        provides options to view logs and exit the application.</span>
<span class="sd">        The tray icon displays a notification message upon initialization and is shown in</span>
<span class="sd">        the system tray.</span>

<span class="sd">        Raises:</span>
<span class="sd">            BaseError: If an exception occurs during the creation or configuration of the</span>
<span class="sd">                       system tray icon, it raises a BaseError with an error code and message.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">find_marker_directory</span><span class="p">(</span><span class="s2">&quot;resources&quot;</span><span class="p">),</span> <span class="s2">&quot;resources&quot;</span><span class="p">,</span> <span class="s2">&quot;system_tray&quot;</span><span class="p">,</span> <span class="s2">&quot;loading.png&quot;</span><span class="p">)</span>  <span class="c1"># Icon file path</span>
            <span class="c1"># logging.debug(file_path)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span> <span class="o">=</span> <span class="n">QSystemTrayIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="n">file_path</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>  <span class="c1"># Create QSystemTrayIcon with the icon and associated main window</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="s2">&quot;Notificación&quot;</span><span class="p">,</span> <span class="s1">&#39;Iniciando la aplicación&#39;</span><span class="p">,</span> <span class="n">QSystemTrayIcon</span><span class="o">.</span><span class="n">Information</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s2">&quot;Programa Reloj de Asistencias&quot;</span><span class="p">)</span>  <span class="c1"># Tooltip text</span>

            <span class="c1"># Create a custom context menu</span>
            <span class="n">menu</span> <span class="o">=</span> <span class="n">QMenu</span><span class="p">()</span>
            <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__create_action</span><span class="p">(</span><span class="s2">&quot;Modificar dispositivos...&quot;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">__opt_modify_devices</span><span class="p">()))</span>  <span class="c1"># Action to modify devices</span>
            <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__create_action</span><span class="p">(</span><span class="s2">&quot;Reiniciar dispositivos...&quot;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">__opt_restart_devices</span><span class="p">()))</span>  <span class="c1"># Action to restart devices    </span>
            <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__create_action</span><span class="p">(</span><span class="s2">&quot;Probar conexiones...&quot;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">__opt_test_connections</span><span class="p">()))</span>  <span class="c1"># Action to test connections</span>
            <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__create_action</span><span class="p">(</span><span class="s2">&quot;Actualizar hora...&quot;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">__opt_update_devices_time</span><span class="p">()))</span>  <span class="c1"># Action to update device time</span>
            <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__create_action</span><span class="p">(</span><span class="s2">&quot;Obtener marcaciones...&quot;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">__opt_fetch_devices_attendances</span><span class="p">()))</span>  <span class="c1"># Action to fetch device attendances</span>
            <span class="n">menu</span><span class="o">.</span><span class="n">addSeparator</span><span class="p">()</span>  <span class="c1"># Context menu separator</span>
            <span class="c1"># Checkbox as QAction with checkable state</span>
            <span class="n">clear_attendance_action</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span><span class="s2">&quot;Eliminar marcaciones&quot;</span><span class="p">,</span> <span class="n">menu</span><span class="p">)</span>
            <span class="n">clear_attendance_action</span><span class="o">.</span><span class="n">setCheckable</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># Make the QAction checkable</span>
            <span class="n">clear_attendance_action</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">checked_clear_attendance</span><span class="p">)</span>  <span class="c1"># Set initial checkbox state</span>
            <span class="n">clear_attendance_action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__opt_toggle_checkbox_clear_attendance</span><span class="p">)</span>  <span class="c1"># Connect action to toggle checkbox state</span>
            <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">clear_attendance_action</span><span class="p">)</span>  <span class="c1"># Add action to the menu</span>
            <span class="c1"># logging.debug(f&#39;checked_automatic_init: {self.checked_automatic_init}&#39;)</span>
            <span class="c1"># Action to toggle the checkbox state</span>
            <span class="n">automatic_init_action</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span><span class="s1">&#39;Iniciar automáticamente&#39;</span><span class="p">,</span> <span class="n">menu</span><span class="p">)</span>
            <span class="n">automatic_init_action</span><span class="o">.</span><span class="n">setCheckable</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">automatic_init_action</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">checked_automatic_init</span><span class="p">)</span>
            <span class="n">automatic_init_action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__opt_toggle_checkbox_automatic_init</span><span class="p">)</span>
            <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">automatic_init_action</span><span class="p">)</span>
            <span class="n">menu</span><span class="o">.</span><span class="n">addSeparator</span><span class="p">()</span>  <span class="c1"># Context menu separator</span>
            <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__create_action</span><span class="p">(</span><span class="s2">&quot;Ver errores...&quot;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">__opt_show_logs</span><span class="p">()))</span>  <span class="c1"># Action to show logs</span>
            <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__create_action</span><span class="p">(</span><span class="s2">&quot;Salir&quot;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">__opt_exit_icon</span><span class="p">()))</span>  <span class="c1"># Action to exit the application</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="o">.</span><span class="n">setContextMenu</span><span class="p">(</span><span class="n">menu</span><span class="p">)</span>  <span class="c1"># Assign context menu to the icon</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>  <span class="c1"># Show the system tray icon</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3500</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="s2">&quot;critical&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__create_action</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">function</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a QAction with the specified text and associates it with a function.</span>

<span class="sd">        Args:</span>
<span class="sd">            text (str): The display text for the action.</span>
<span class="sd">            function (callable): The function to be executed when the action is triggered.</span>

<span class="sd">        Returns:</span>
<span class="sd">            (QAction): The created action with the specified text and connected function.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>  <span class="c1"># Create QAction with the text and associated main window</span>
        <span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">function</span><span class="p">)</span>  <span class="c1"># Connect the action to the provided function</span>
        <span class="k">return</span> <span class="n">action</span>  <span class="c1"># Return the created action</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">start_timer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Starts a timer by returning the current time in seconds.</span>

<span class="sd">        Returns:</span>
<span class="sd">            (float): The current time in seconds since the epoch.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>  <span class="c1"># Return the current time in seconds</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">stop_timer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start_time</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stops the timer and calculates the elapsed time since the provided start time.</span>

<span class="sd">        Args:</span>
<span class="sd">            start_time (float): The starting time in seconds since the epoch.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Logs:</span>
<span class="sd">            Logs the elapsed time in seconds to the application log.</span>

<span class="sd">        Side Effects:</span>
<span class="sd">            Displays a system tray notification with the elapsed time.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">end_time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_timer</span><span class="p">()</span>  <span class="c1"># Get the end time</span>
        <span class="n">elapsed_time</span> <span class="o">=</span> <span class="n">end_time</span> <span class="o">-</span> <span class="n">start_time</span>  <span class="c1"># Calculate the elapsed time</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;La tarea finalizo en </span><span class="si">{</span><span class="n">elapsed_time</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1"> segundos&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="s2">&quot;Notificacion&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;La tarea finalizo en </span><span class="si">{</span><span class="n">elapsed_time</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1"> segundos&#39;</span><span class="p">,</span> <span class="n">QSystemTrayIcon</span><span class="o">.</span><span class="n">Information</span><span class="p">)</span>  <span class="c1"># Show notification with the elapsed time</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__show_message_information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays an informational message dialog with a specified title and text.</span>
<span class="sd">        This method creates a QMessageBox instance to show an informational message</span>
<span class="sd">        to the user. It sets the title, text, and icon of the dialog box. Additionally,</span>
<span class="sd">        it customizes the window icon using a specified `.ico` file. After the dialog</span>
<span class="sd">        box is closed, it ensures that the tray icon&#39;s context menu is made visible again.</span>

<span class="sd">        Args:</span>
<span class="sd">            title (str): The title of the message dialog box.</span>
<span class="sd">            text (str): The informational text to display in the dialog box.</span>

<span class="sd">        Side Effects:</span>
<span class="sd">            - Displays a QMessageBox with the specified title and text.</span>
<span class="sd">            - Sets the window icon of the QMessageBox using a custom `.ico` file.</span>
<span class="sd">            - Ensures the tray icon&#39;s context menu is visible after the dialog box is closed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg_box</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">()</span>  <span class="c1"># Create QMessageBox instance</span>
        <span class="n">msg_box</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>  <span class="c1"># Set the dialog box title</span>
        <span class="n">msg_box</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>  <span class="c1"># Set the message text</span>
        <span class="n">msg_box</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Information</span><span class="p">)</span>  <span class="c1"># Set the dialog box icon (information)</span>
        <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">find_marker_directory</span><span class="p">(</span><span class="s2">&quot;resources&quot;</span><span class="p">),</span> <span class="s2">&quot;resources&quot;</span><span class="p">,</span> <span class="s2">&quot;fingerprint.ico&quot;</span><span class="p">)</span>
        <span class="n">msg_box</span><span class="o">.</span><span class="n">setWindowIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="n">file_path</span><span class="p">))</span>
        <span class="n">msg_box</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>  <span class="c1"># Show the dialog box</span>

        <span class="c1"># Once the QMessageBox is closed, show the context menu again</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="o">.</span><span class="n">contextMenu</span><span class="p">()</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

    <span class="nd">@pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">__opt_modify_devices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles the modification of devices through a dialog interface.</span>

<span class="sd">        This method creates and displays a `ModifyDevicesDialog` for modifying device settings.</span>
<span class="sd">        Once the dialog is closed, it ensures that the tray icon&#39;s context menu is visible again.</span>
<span class="sd">        Any exceptions encountered during the process are logged using the `BaseError` class.</span>

<span class="sd">        Raises:</span>
<span class="sd">            BaseError: If an exception occurs during the execution of the method, it is wrapped</span>
<span class="sd">                       and logged with an error code of 3500.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">device_dialog</span> <span class="o">=</span> <span class="n">ModifyDevicesDialog</span><span class="p">()</span>
            <span class="n">device_dialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
            <span class="c1"># Once the QDialog is closed, show the context menu again</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="o">.</span><span class="n">contextMenu</span><span class="p">()</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">BaseError</span><span class="p">(</span><span class="mi">3500</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

    <span class="nd">@pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">__opt_show_logs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays the logs dialog and ensures the system tray context menu is visible after the dialog is closed.</span>

<span class="sd">        This method attempts to create and display a `LogsDialog` instance. Once the dialog is closed, </span>
<span class="sd">        it ensures that the system tray icon&#39;s context menu is made visible again. If an exception occurs </span>
<span class="sd">        during this process, it is handled by logging the error using the `BaseError` class.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If an error occurs while creating or displaying the `LogsDialog`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">error_log_dialog</span> <span class="o">=</span> <span class="n">LogsDialog</span><span class="p">()</span>
            <span class="n">error_log_dialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
            <span class="c1"># Once the QDialog is closed, show the context menu again</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="o">.</span><span class="n">contextMenu</span><span class="p">()</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">BaseError</span><span class="p">(</span><span class="mi">3500</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

    <span class="nd">@pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">__opt_restart_devices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles the restart devices operation by displaying a dialog to the user.</span>

<span class="sd">        This method creates and executes a `RestartDevicesDialog` to allow the user</span>
<span class="sd">        to restart devices. Once the dialog is closed, it ensures that the tray icon&#39;s</span>
<span class="sd">        context menu is made visible again. If an exception occurs during the process,</span>
<span class="sd">        it logs the error using the `BaseError` class.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If an error occurs during the execution of the dialog or</span>
<span class="sd">                       while handling the tray icon&#39;s context menu.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">restart_devices_dialog</span> <span class="o">=</span> <span class="n">RestartDevicesDialog</span><span class="p">()</span>
            <span class="n">restart_devices_dialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
            <span class="c1"># Once the QDialog is closed, show the context menu again</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="o">.</span><span class="n">contextMenu</span><span class="p">()</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">BaseError</span><span class="p">(</span><span class="mi">3500</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

    <span class="nd">@pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">__opt_test_connections</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles the testing of device connections by opening a dialog to ping devices.</span>

<span class="sd">        This method creates and displays a `PingDevicesDialog` to check the status of devices.</span>
<span class="sd">        Once the dialog is closed, it ensures that the tray icon&#39;s context menu is visible again.</span>
<span class="sd">        If an exception occurs during the process, it logs the error using the `BaseError` class.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If an error occurs during the execution of the method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">device_status_dialog</span> <span class="o">=</span> <span class="n">PingDevicesDialog</span><span class="p">()</span>  <span class="c1"># Get device status</span>
            <span class="n">device_status_dialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
            <span class="c1"># Once the QDialog is closed, show the context menu again</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="o">.</span><span class="n">contextMenu</span><span class="p">()</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">BaseError</span><span class="p">(</span><span class="mi">3500</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

    <span class="nd">@pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">__opt_update_devices_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles the process of updating the time on devices.</span>

<span class="sd">        This method creates and displays a dialog for updating the time on devices.</span>
<span class="sd">        Once the dialog is closed, it ensures that the context menu of the tray icon</span>
<span class="sd">        is made visible again if it exists. Any exceptions raised during the process</span>
<span class="sd">        are caught and logged using the BaseError class.</span>

<span class="sd">        Exceptions:</span>
<span class="sd">            Exception: Catches any exception that occurs during the execution and</span>
<span class="sd">                       logs it with an error code and message.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">update_time_device_dialog</span> <span class="o">=</span> <span class="n">UpdateTimeDeviceDialog</span><span class="p">()</span>
            <span class="n">update_time_device_dialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
            <span class="c1"># Once the QDialog is closed, show the context menu again</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="o">.</span><span class="n">contextMenu</span><span class="p">()</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">BaseError</span><span class="p">(</span><span class="mi">3500</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

    <span class="nd">@pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">__opt_fetch_devices_attendances</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles the process of fetching attendance data from devices.</span>

<span class="sd">        This method creates and displays a dialog for obtaining attendance data</span>
<span class="sd">        from devices. Once the dialog is closed, it ensures that the tray icon&#39;s</span>
<span class="sd">        context menu is made visible again. Any exceptions encountered during the</span>
<span class="sd">        process are captured and logged using the BaseError class.</span>

<span class="sd">        Raises:</span>
<span class="sd">            BaseError: If an exception occurs during the execution of the method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">device_attendances_dialog</span> <span class="o">=</span> <span class="n">ObtainAttendancesDevicesDialog</span><span class="p">()</span>
            <span class="c1">#device_attendances_dialog.op_terminated.connect(self.stop_timer)</span>
            <span class="n">device_attendances_dialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
            <span class="c1"># Once the QDialog is closed, show the context menu again</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="o">.</span><span class="n">contextMenu</span><span class="p">()</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">BaseError</span><span class="p">(</span><span class="mi">3500</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

    <span class="nd">@pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">__opt_toggle_checkbox_clear_attendance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Toggles the state of the &#39;clear attendance&#39; checkbox and updates the configuration file accordingly.</span>

<span class="sd">        This method inverts the current state of the `checked_clear_attendance` attribute, updates the </span>
<span class="sd">        corresponding value in the configuration file under the &#39;Device_config&#39; section, and writes the </span>
<span class="sd">        changes back to the file. If an error occurs during the file write operation, it raises a </span>
<span class="sd">        `BaseError` with an appropriate error code and message.</span>

<span class="sd">        Raises:</span>
<span class="sd">            BaseError: If an exception occurs while writing to the configuration file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checked_clear_attendance</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">checked_clear_attendance</span>  <span class="c1"># Invert the current checkbox state</span>
        <span class="c1"># logging.debug(f&quot;Status checkbox: {self.checked_clear_attendance}&quot;)  # Debug log: current checkbox state</span>
        <span class="c1"># Modify the value of the desired field in the configuration file</span>
        <span class="n">config</span><span class="p">[</span><span class="s1">&#39;Device_config&#39;</span><span class="p">][</span><span class="s1">&#39;clear_attendance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">checked_clear_attendance</span><span class="p">)</span>
        <span class="c1"># Write the changes back to the configuration file</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;config.ini&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">config_file</span><span class="p">:</span>
                <span class="n">config</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">BaseError</span><span class="p">(</span><span class="mi">3001</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

    <span class="nd">@pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">__opt_toggle_checkbox_automatic_init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Toggles the state of the &quot;automatic initialization&quot; checkbox and updates the system&#39;s startup configuration</span>
<span class="sd">        accordingly. This method is intended to be used in a frozen Python application (e.g., packaged with PyInstaller).</span>
<span class="sd">        When the checkbox is toggled:</span>

<span class="sd">        - If enabled, the application is added to the system&#39;s startup programs.</span>
<span class="sd">        - If disabled, the application is removed from the system&#39;s startup programs.</span>

<span class="sd">        Exceptions are caught and logged using the `BaseError` class.</span>

<span class="sd">        Raises:</span>
<span class="sd">            BaseError: If an exception occurs during the process, it is wrapped and raised with an error code (3000).</span>

<span class="sd">        Notes:</span>
<span class="sd">            - The `add_to_startup` and `remove_from_startup` functions are assumed to handle the actual system-level</span>
<span class="sd">              operations for managing startup programs.</span>
<span class="sd">            - This method only functions correctly in a frozen Python environment (e.g., when `sys.frozen` is True).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">sys</span><span class="p">,</span> <span class="s1">&#39;frozen&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">checked_automatic_init</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">checked_automatic_init</span>  <span class="c1"># Invert the current checkbox state</span>
                <span class="c1"># logging.debug(f&quot;Status checkbox: {self.checked_automatic_init}&quot;)  # Debug log: current checkbox state</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">checked_automatic_init</span><span class="p">:</span>
                    <span class="c1"># logging.debug(&#39;add_to_startup&#39;)</span>
                    <span class="n">add_to_startup</span><span class="p">(</span><span class="s2">&quot;Programa Reloj de Asistencias&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># logging.debug(&#39;remove_from_startup&#39;)</span>
                    <span class="n">remove_from_startup</span><span class="p">(</span><span class="s2">&quot;Programa Reloj de Asistencias&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">BaseError</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

    <span class="nd">@pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">__opt_exit_icon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles the exit operation for the application.</span>

<span class="sd">        This method hides the system tray icon, if it exists, and then quits the application.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>  <span class="c1"># Hide the system tray icon</span>
            <span class="n">QApplication</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>  <span class="c1"># Exit the application</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h5 id="src.ui.icon_manager.MainWindow.__create_action" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__create_action</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">function</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Creates a QAction with the specified text and associates it with a function.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>text</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The display text for the action.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>function</code>
            </td>
            <td>
                  <code><span title="callable">callable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The function to be executed when the action is triggered.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="PyQt5.QtWidgets.QAction">QAction</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created action with the specified text and connected function.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\icon_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">__create_action</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">function</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a QAction with the specified text and associates it with a function.</span>

<span class="sd">    Args:</span>
<span class="sd">        text (str): The display text for the action.</span>
<span class="sd">        function (callable): The function to be executed when the action is triggered.</span>

<span class="sd">    Returns:</span>
<span class="sd">        (QAction): The created action with the specified text and connected function.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">action</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>  <span class="c1"># Create QAction with the text and associated main window</span>
    <span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">function</span><span class="p">)</span>  <span class="c1"># Connect the action to the provided function</span>
    <span class="k">return</span> <span class="n">action</span>  <span class="c1"># Return the created action</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.icon_manager.MainWindow.__create_tray_icon" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__create_tray_icon</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Creates and configures the system tray icon for the application.
This method initializes a QSystemTrayIcon with a tooltip and a custom context menu
containing various actions for interacting with the application. The context menu
includes options for modifying devices, restarting devices, testing connections,
updating device time, fetching attendances, and toggling specific settings. It also
provides options to view logs and exit the application.
The tray icon displays a notification message upon initialization and is shown in
the system tray.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseError">BaseError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an exception occurs during the creation or configuration of the
       system tray icon, it raises a BaseError with an error code and message.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\icon_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">__create_tray_icon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates and configures the system tray icon for the application.</span>
<span class="sd">    This method initializes a QSystemTrayIcon with a tooltip and a custom context menu</span>
<span class="sd">    containing various actions for interacting with the application. The context menu</span>
<span class="sd">    includes options for modifying devices, restarting devices, testing connections,</span>
<span class="sd">    updating device time, fetching attendances, and toggling specific settings. It also</span>
<span class="sd">    provides options to view logs and exit the application.</span>
<span class="sd">    The tray icon displays a notification message upon initialization and is shown in</span>
<span class="sd">    the system tray.</span>

<span class="sd">    Raises:</span>
<span class="sd">        BaseError: If an exception occurs during the creation or configuration of the</span>
<span class="sd">                   system tray icon, it raises a BaseError with an error code and message.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">find_marker_directory</span><span class="p">(</span><span class="s2">&quot;resources&quot;</span><span class="p">),</span> <span class="s2">&quot;resources&quot;</span><span class="p">,</span> <span class="s2">&quot;system_tray&quot;</span><span class="p">,</span> <span class="s2">&quot;loading.png&quot;</span><span class="p">)</span>  <span class="c1"># Icon file path</span>
        <span class="c1"># logging.debug(file_path)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span> <span class="o">=</span> <span class="n">QSystemTrayIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="n">file_path</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>  <span class="c1"># Create QSystemTrayIcon with the icon and associated main window</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="s2">&quot;Notificación&quot;</span><span class="p">,</span> <span class="s1">&#39;Iniciando la aplicación&#39;</span><span class="p">,</span> <span class="n">QSystemTrayIcon</span><span class="o">.</span><span class="n">Information</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s2">&quot;Programa Reloj de Asistencias&quot;</span><span class="p">)</span>  <span class="c1"># Tooltip text</span>

        <span class="c1"># Create a custom context menu</span>
        <span class="n">menu</span> <span class="o">=</span> <span class="n">QMenu</span><span class="p">()</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__create_action</span><span class="p">(</span><span class="s2">&quot;Modificar dispositivos...&quot;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">__opt_modify_devices</span><span class="p">()))</span>  <span class="c1"># Action to modify devices</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__create_action</span><span class="p">(</span><span class="s2">&quot;Reiniciar dispositivos...&quot;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">__opt_restart_devices</span><span class="p">()))</span>  <span class="c1"># Action to restart devices    </span>
        <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__create_action</span><span class="p">(</span><span class="s2">&quot;Probar conexiones...&quot;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">__opt_test_connections</span><span class="p">()))</span>  <span class="c1"># Action to test connections</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__create_action</span><span class="p">(</span><span class="s2">&quot;Actualizar hora...&quot;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">__opt_update_devices_time</span><span class="p">()))</span>  <span class="c1"># Action to update device time</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__create_action</span><span class="p">(</span><span class="s2">&quot;Obtener marcaciones...&quot;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">__opt_fetch_devices_attendances</span><span class="p">()))</span>  <span class="c1"># Action to fetch device attendances</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">addSeparator</span><span class="p">()</span>  <span class="c1"># Context menu separator</span>
        <span class="c1"># Checkbox as QAction with checkable state</span>
        <span class="n">clear_attendance_action</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span><span class="s2">&quot;Eliminar marcaciones&quot;</span><span class="p">,</span> <span class="n">menu</span><span class="p">)</span>
        <span class="n">clear_attendance_action</span><span class="o">.</span><span class="n">setCheckable</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># Make the QAction checkable</span>
        <span class="n">clear_attendance_action</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">checked_clear_attendance</span><span class="p">)</span>  <span class="c1"># Set initial checkbox state</span>
        <span class="n">clear_attendance_action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__opt_toggle_checkbox_clear_attendance</span><span class="p">)</span>  <span class="c1"># Connect action to toggle checkbox state</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">clear_attendance_action</span><span class="p">)</span>  <span class="c1"># Add action to the menu</span>
        <span class="c1"># logging.debug(f&#39;checked_automatic_init: {self.checked_automatic_init}&#39;)</span>
        <span class="c1"># Action to toggle the checkbox state</span>
        <span class="n">automatic_init_action</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span><span class="s1">&#39;Iniciar automáticamente&#39;</span><span class="p">,</span> <span class="n">menu</span><span class="p">)</span>
        <span class="n">automatic_init_action</span><span class="o">.</span><span class="n">setCheckable</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">automatic_init_action</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">checked_automatic_init</span><span class="p">)</span>
        <span class="n">automatic_init_action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__opt_toggle_checkbox_automatic_init</span><span class="p">)</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">automatic_init_action</span><span class="p">)</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">addSeparator</span><span class="p">()</span>  <span class="c1"># Context menu separator</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__create_action</span><span class="p">(</span><span class="s2">&quot;Ver errores...&quot;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">__opt_show_logs</span><span class="p">()))</span>  <span class="c1"># Action to show logs</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__create_action</span><span class="p">(</span><span class="s2">&quot;Salir&quot;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">__opt_exit_icon</span><span class="p">()))</span>  <span class="c1"># Action to exit the application</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="o">.</span><span class="n">setContextMenu</span><span class="p">(</span><span class="n">menu</span><span class="p">)</span>  <span class="c1"># Assign context menu to the icon</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>  <span class="c1"># Show the system tray icon</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3500</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="s2">&quot;critical&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.icon_manager.MainWindow.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Initializes the IconManager class.
This constructor sets up the initial state of the application, including
the system tray icon, configuration settings, and application startup behavior.
It also handles potential duplicate instances of the application.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="src.ui.icon_manager.MainWindow.__init__.is_running">is_running</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Indicates if the application is currently running.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="src.ui.icon_manager.MainWindow.__init__.checked_clear_attendance">checked_clear_attendance</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>State of the "clear attendance" checkbox,
retrieved from the configuration file.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="src.ui.icon_manager.MainWindow.__init__.checked_automatic_init">checked_automatic_init</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Indicates if the application is set to start
automatically on system startup.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="src.ui.icon_manager.MainWindow.__init__.tray_icon">tray_icon</span></code></td>
            <td>
                  <code><span title="PyQt5.QtWidgets.QSystemTrayIcon">QSystemTrayIcon</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The system tray icon for the application.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseError">BaseError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an exception occurs during initialization, it raises a
BaseError with an error code, message, and severity level.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\icon_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the IconManager class.</span>
<span class="sd">    This constructor sets up the initial state of the application, including</span>
<span class="sd">    the system tray icon, configuration settings, and application startup behavior.</span>
<span class="sd">    It also handles potential duplicate instances of the application.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        is_running (bool): Indicates if the application is currently running.</span>
<span class="sd">        checked_clear_attendance (bool): State of the &quot;clear attendance&quot; checkbox,</span>
<span class="sd">            retrieved from the configuration file.</span>
<span class="sd">        checked_automatic_init (bool): Indicates if the application is set to start</span>
<span class="sd">            automatically on system startup.</span>
<span class="sd">        tray_icon (QSystemTrayIcon): The system tray icon for the application.</span>

<span class="sd">    Raises:</span>
<span class="sd">        BaseError: If an exception occurs during initialization, it raises a</span>
<span class="sd">            BaseError with an error code, message, and severity level.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_running</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># Variable to indicate if the application is running</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checked_clear_attendance</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;Device_config&#39;</span><span class="p">][</span><span class="s1">&#39;clear_attendance&#39;</span><span class="p">])</span>  <span class="c1"># State of the clear attendance checkbox</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checked_automatic_init</span> <span class="o">=</span> <span class="n">is_startup_entry_exists</span><span class="p">(</span><span class="s2">&quot;Programa Reloj de Asistencias&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="p">:</span> <span class="n">QSystemTrayIcon</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Variable to store the QSystemTrayIcon</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__init_ui</span><span class="p">()</span>  <span class="c1"># Initialize the user interface</span>

        <span class="c1"># Set the initial tray icon to loading.png</span>
        <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">find_marker_directory</span><span class="p">(</span><span class="s2">&quot;resources&quot;</span><span class="p">),</span> <span class="s2">&quot;resources&quot;</span><span class="p">,</span> <span class="s2">&quot;system_tray&quot;</span><span class="p">,</span> <span class="s2">&quot;loading.png&quot;</span><span class="p">)</span>  <span class="c1"># Icon file path</span>
        <span class="c1"># logging.debug(file_path)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="n">file_path</span><span class="p">))</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot; if not is_user_admin():</span>
<span class="sd">            run_as_admin()</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1">#if verify_duplicated_instance(sys.argv[0]):</span>
        <span class="c1">#    exit_duplicated_instance()</span>

        <span class="c1"># Change the tray icon to program-icon.png after all initializations</span>
        <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">find_marker_directory</span><span class="p">(</span><span class="s2">&quot;resources&quot;</span><span class="p">),</span> <span class="s2">&quot;resources&quot;</span><span class="p">,</span> <span class="s2">&quot;system_tray&quot;</span><span class="p">,</span> <span class="s2">&quot;program-icon.png&quot;</span><span class="p">)</span>  <span class="c1"># Icon file path</span>
        <span class="c1"># logging.debug(file_path)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="n">file_path</span><span class="p">))</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3501</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="s2">&quot;critical&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.icon_manager.MainWindow.__init_ui" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__init_ui</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Initializes the user interface components for the application.</p>
<p>This method is responsible for setting up and configuring the system tray icon
by invoking the necessary helper methods. It ensures that the system tray icon
is properly created and ready for use.</p>


            <details class="quote">
              <summary>Source code in <code>src\ui\icon_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">__init_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the user interface components for the application.</span>

<span class="sd">    This method is responsible for setting up and configuring the system tray icon</span>
<span class="sd">    by invoking the necessary helper methods. It ensures that the system tray icon</span>
<span class="sd">    is properly created and ready for use.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Create and configure the system tray icon</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__create_tray_icon</span><span class="p">()</span>  <span class="c1"># Create the system tray icon        </span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.icon_manager.MainWindow.__opt_exit_icon" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__opt_exit_icon</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Handles the exit operation for the application.</p>
<p>This method hides the system tray icon, if it exists, and then quits the application.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\icon_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pyqtSlot</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">__opt_exit_icon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the exit operation for the application.</span>

<span class="sd">    This method hides the system tray icon, if it exists, and then quits the application.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>  <span class="c1"># Hide the system tray icon</span>
        <span class="n">QApplication</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>  <span class="c1"># Exit the application</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.icon_manager.MainWindow.__opt_fetch_devices_attendances" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__opt_fetch_devices_attendances</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Handles the process of fetching attendance data from devices.</p>
<p>This method creates and displays a dialog for obtaining attendance data
from devices. Once the dialog is closed, it ensures that the tray icon's
context menu is made visible again. Any exceptions encountered during the
process are captured and logged using the BaseError class.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseError">BaseError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an exception occurs during the execution of the method.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\icon_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pyqtSlot</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">__opt_fetch_devices_attendances</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the process of fetching attendance data from devices.</span>

<span class="sd">    This method creates and displays a dialog for obtaining attendance data</span>
<span class="sd">    from devices. Once the dialog is closed, it ensures that the tray icon&#39;s</span>
<span class="sd">    context menu is made visible again. Any exceptions encountered during the</span>
<span class="sd">    process are captured and logged using the BaseError class.</span>

<span class="sd">    Raises:</span>
<span class="sd">        BaseError: If an exception occurs during the execution of the method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">device_attendances_dialog</span> <span class="o">=</span> <span class="n">ObtainAttendancesDevicesDialog</span><span class="p">()</span>
        <span class="c1">#device_attendances_dialog.op_terminated.connect(self.stop_timer)</span>
        <span class="n">device_attendances_dialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
        <span class="c1"># Once the QDialog is closed, show the context menu again</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="o">.</span><span class="n">contextMenu</span><span class="p">()</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">BaseError</span><span class="p">(</span><span class="mi">3500</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.icon_manager.MainWindow.__opt_modify_devices" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__opt_modify_devices</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Handles the modification of devices through a dialog interface.</p>
<p>This method creates and displays a <code>ModifyDevicesDialog</code> for modifying device settings.
Once the dialog is closed, it ensures that the tray icon's context menu is visible again.
Any exceptions encountered during the process are logged using the <code>BaseError</code> class.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseError">BaseError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an exception occurs during the execution of the method, it is wrapped
       and logged with an error code of 3500.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\icon_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pyqtSlot</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">__opt_modify_devices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the modification of devices through a dialog interface.</span>

<span class="sd">    This method creates and displays a `ModifyDevicesDialog` for modifying device settings.</span>
<span class="sd">    Once the dialog is closed, it ensures that the tray icon&#39;s context menu is visible again.</span>
<span class="sd">    Any exceptions encountered during the process are logged using the `BaseError` class.</span>

<span class="sd">    Raises:</span>
<span class="sd">        BaseError: If an exception occurs during the execution of the method, it is wrapped</span>
<span class="sd">                   and logged with an error code of 3500.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">device_dialog</span> <span class="o">=</span> <span class="n">ModifyDevicesDialog</span><span class="p">()</span>
        <span class="n">device_dialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
        <span class="c1"># Once the QDialog is closed, show the context menu again</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="o">.</span><span class="n">contextMenu</span><span class="p">()</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">BaseError</span><span class="p">(</span><span class="mi">3500</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.icon_manager.MainWindow.__opt_restart_devices" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__opt_restart_devices</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Handles the restart devices operation by displaying a dialog to the user.</p>
<p>This method creates and executes a <code>RestartDevicesDialog</code> to allow the user
to restart devices. Once the dialog is closed, it ensures that the tray icon's
context menu is made visible again. If an exception occurs during the process,
it logs the error using the <code>BaseError</code> class.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an error occurs during the execution of the dialog or
       while handling the tray icon's context menu.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\icon_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pyqtSlot</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">__opt_restart_devices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the restart devices operation by displaying a dialog to the user.</span>

<span class="sd">    This method creates and executes a `RestartDevicesDialog` to allow the user</span>
<span class="sd">    to restart devices. Once the dialog is closed, it ensures that the tray icon&#39;s</span>
<span class="sd">    context menu is made visible again. If an exception occurs during the process,</span>
<span class="sd">    it logs the error using the `BaseError` class.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If an error occurs during the execution of the dialog or</span>
<span class="sd">                   while handling the tray icon&#39;s context menu.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">restart_devices_dialog</span> <span class="o">=</span> <span class="n">RestartDevicesDialog</span><span class="p">()</span>
        <span class="n">restart_devices_dialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
        <span class="c1"># Once the QDialog is closed, show the context menu again</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="o">.</span><span class="n">contextMenu</span><span class="p">()</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">BaseError</span><span class="p">(</span><span class="mi">3500</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.icon_manager.MainWindow.__opt_show_logs" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__opt_show_logs</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Displays the logs dialog and ensures the system tray context menu is visible after the dialog is closed.</p>
<p>This method attempts to create and display a <code>LogsDialog</code> instance. Once the dialog is closed, 
it ensures that the system tray icon's context menu is made visible again. If an exception occurs 
during this process, it is handled by logging the error using the <code>BaseError</code> class.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an error occurs while creating or displaying the <code>LogsDialog</code>.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\icon_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pyqtSlot</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">__opt_show_logs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Displays the logs dialog and ensures the system tray context menu is visible after the dialog is closed.</span>

<span class="sd">    This method attempts to create and display a `LogsDialog` instance. Once the dialog is closed, </span>
<span class="sd">    it ensures that the system tray icon&#39;s context menu is made visible again. If an exception occurs </span>
<span class="sd">    during this process, it is handled by logging the error using the `BaseError` class.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If an error occurs while creating or displaying the `LogsDialog`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">error_log_dialog</span> <span class="o">=</span> <span class="n">LogsDialog</span><span class="p">()</span>
        <span class="n">error_log_dialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
        <span class="c1"># Once the QDialog is closed, show the context menu again</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="o">.</span><span class="n">contextMenu</span><span class="p">()</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">BaseError</span><span class="p">(</span><span class="mi">3500</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.icon_manager.MainWindow.__opt_test_connections" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__opt_test_connections</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Handles the testing of device connections by opening a dialog to ping devices.</p>
<p>This method creates and displays a <code>PingDevicesDialog</code> to check the status of devices.
Once the dialog is closed, it ensures that the tray icon's context menu is visible again.
If an exception occurs during the process, it logs the error using the <code>BaseError</code> class.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an error occurs during the execution of the method.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\icon_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pyqtSlot</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">__opt_test_connections</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the testing of device connections by opening a dialog to ping devices.</span>

<span class="sd">    This method creates and displays a `PingDevicesDialog` to check the status of devices.</span>
<span class="sd">    Once the dialog is closed, it ensures that the tray icon&#39;s context menu is visible again.</span>
<span class="sd">    If an exception occurs during the process, it logs the error using the `BaseError` class.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If an error occurs during the execution of the method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">device_status_dialog</span> <span class="o">=</span> <span class="n">PingDevicesDialog</span><span class="p">()</span>  <span class="c1"># Get device status</span>
        <span class="n">device_status_dialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
        <span class="c1"># Once the QDialog is closed, show the context menu again</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="o">.</span><span class="n">contextMenu</span><span class="p">()</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">BaseError</span><span class="p">(</span><span class="mi">3500</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.icon_manager.MainWindow.__opt_toggle_checkbox_automatic_init" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__opt_toggle_checkbox_automatic_init</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Toggles the state of the "automatic initialization" checkbox and updates the system's startup configuration
accordingly. This method is intended to be used in a frozen Python application (e.g., packaged with PyInstaller).
When the checkbox is toggled:</p>
<ul>
<li>If enabled, the application is added to the system's startup programs.</li>
<li>If disabled, the application is removed from the system's startup programs.</li>
</ul>
<p>Exceptions are caught and logged using the <code>BaseError</code> class.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseError">BaseError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an exception occurs during the process, it is wrapped and raised with an error code (3000).</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="notes" open>
  <summary>Notes</summary>
  <ul>
<li>The <code>add_to_startup</code> and <code>remove_from_startup</code> functions are assumed to handle the actual system-level
  operations for managing startup programs.</li>
<li>This method only functions correctly in a frozen Python environment (e.g., when <code>sys.frozen</code> is True).</li>
</ul>
</details>

            <details class="quote">
              <summary>Source code in <code>src\ui\icon_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pyqtSlot</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">__opt_toggle_checkbox_automatic_init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Toggles the state of the &quot;automatic initialization&quot; checkbox and updates the system&#39;s startup configuration</span>
<span class="sd">    accordingly. This method is intended to be used in a frozen Python application (e.g., packaged with PyInstaller).</span>
<span class="sd">    When the checkbox is toggled:</span>

<span class="sd">    - If enabled, the application is added to the system&#39;s startup programs.</span>
<span class="sd">    - If disabled, the application is removed from the system&#39;s startup programs.</span>

<span class="sd">    Exceptions are caught and logged using the `BaseError` class.</span>

<span class="sd">    Raises:</span>
<span class="sd">        BaseError: If an exception occurs during the process, it is wrapped and raised with an error code (3000).</span>

<span class="sd">    Notes:</span>
<span class="sd">        - The `add_to_startup` and `remove_from_startup` functions are assumed to handle the actual system-level</span>
<span class="sd">          operations for managing startup programs.</span>
<span class="sd">        - This method only functions correctly in a frozen Python environment (e.g., when `sys.frozen` is True).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">sys</span><span class="p">,</span> <span class="s1">&#39;frozen&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">checked_automatic_init</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">checked_automatic_init</span>  <span class="c1"># Invert the current checkbox state</span>
            <span class="c1"># logging.debug(f&quot;Status checkbox: {self.checked_automatic_init}&quot;)  # Debug log: current checkbox state</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">checked_automatic_init</span><span class="p">:</span>
                <span class="c1"># logging.debug(&#39;add_to_startup&#39;)</span>
                <span class="n">add_to_startup</span><span class="p">(</span><span class="s2">&quot;Programa Reloj de Asistencias&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># logging.debug(&#39;remove_from_startup&#39;)</span>
                <span class="n">remove_from_startup</span><span class="p">(</span><span class="s2">&quot;Programa Reloj de Asistencias&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">BaseError</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.icon_manager.MainWindow.__opt_toggle_checkbox_clear_attendance" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__opt_toggle_checkbox_clear_attendance</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Toggles the state of the 'clear attendance' checkbox and updates the configuration file accordingly.</p>
<p>This method inverts the current state of the <code>checked_clear_attendance</code> attribute, updates the 
corresponding value in the configuration file under the 'Device_config' section, and writes the 
changes back to the file. If an error occurs during the file write operation, it raises a 
<code>BaseError</code> with an appropriate error code and message.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseError">BaseError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an exception occurs while writing to the configuration file.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\icon_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pyqtSlot</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">__opt_toggle_checkbox_clear_attendance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Toggles the state of the &#39;clear attendance&#39; checkbox and updates the configuration file accordingly.</span>

<span class="sd">    This method inverts the current state of the `checked_clear_attendance` attribute, updates the </span>
<span class="sd">    corresponding value in the configuration file under the &#39;Device_config&#39; section, and writes the </span>
<span class="sd">    changes back to the file. If an error occurs during the file write operation, it raises a </span>
<span class="sd">    `BaseError` with an appropriate error code and message.</span>

<span class="sd">    Raises:</span>
<span class="sd">        BaseError: If an exception occurs while writing to the configuration file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">checked_clear_attendance</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">checked_clear_attendance</span>  <span class="c1"># Invert the current checkbox state</span>
    <span class="c1"># logging.debug(f&quot;Status checkbox: {self.checked_clear_attendance}&quot;)  # Debug log: current checkbox state</span>
    <span class="c1"># Modify the value of the desired field in the configuration file</span>
    <span class="n">config</span><span class="p">[</span><span class="s1">&#39;Device_config&#39;</span><span class="p">][</span><span class="s1">&#39;clear_attendance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">checked_clear_attendance</span><span class="p">)</span>
    <span class="c1"># Write the changes back to the configuration file</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;config.ini&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">config_file</span><span class="p">:</span>
            <span class="n">config</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">BaseError</span><span class="p">(</span><span class="mi">3001</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.icon_manager.MainWindow.__opt_update_devices_time" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__opt_update_devices_time</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Handles the process of updating the time on devices.</p>
<p>This method creates and displays a dialog for updating the time on devices.
Once the dialog is closed, it ensures that the context menu of the tray icon
is made visible again if it exists. Any exceptions raised during the process
are caught and logged using the BaseError class.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Catches any exception that occurs during the execution and
       logs it with an error code and message.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\icon_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pyqtSlot</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">__opt_update_devices_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the process of updating the time on devices.</span>

<span class="sd">    This method creates and displays a dialog for updating the time on devices.</span>
<span class="sd">    Once the dialog is closed, it ensures that the context menu of the tray icon</span>
<span class="sd">    is made visible again if it exists. Any exceptions raised during the process</span>
<span class="sd">    are caught and logged using the BaseError class.</span>

<span class="sd">    Exceptions:</span>
<span class="sd">        Exception: Catches any exception that occurs during the execution and</span>
<span class="sd">                   logs it with an error code and message.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">update_time_device_dialog</span> <span class="o">=</span> <span class="n">UpdateTimeDeviceDialog</span><span class="p">()</span>
        <span class="n">update_time_device_dialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
        <span class="c1"># Once the QDialog is closed, show the context menu again</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="o">.</span><span class="n">contextMenu</span><span class="p">()</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">BaseError</span><span class="p">(</span><span class="mi">3500</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.icon_manager.MainWindow.__show_message_information" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__show_message_information</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Displays an informational message dialog with a specified title and text.
This method creates a QMessageBox instance to show an informational message
to the user. It sets the title, text, and icon of the dialog box. Additionally,
it customizes the window icon using a specified <code>.ico</code> file. After the dialog
box is closed, it ensures that the tray icon's context menu is made visible again.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>title</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The title of the message dialog box.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>text</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The informational text to display in the dialog box.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<details class="side-effects" open>
  <summary>Side Effects</summary>
  <ul>
<li>Displays a QMessageBox with the specified title and text.</li>
<li>Sets the window icon of the QMessageBox using a custom <code>.ico</code> file.</li>
<li>Ensures the tray icon's context menu is visible after the dialog box is closed.</li>
</ul>
</details>

            <details class="quote">
              <summary>Source code in <code>src\ui\icon_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">__show_message_information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Displays an informational message dialog with a specified title and text.</span>
<span class="sd">    This method creates a QMessageBox instance to show an informational message</span>
<span class="sd">    to the user. It sets the title, text, and icon of the dialog box. Additionally,</span>
<span class="sd">    it customizes the window icon using a specified `.ico` file. After the dialog</span>
<span class="sd">    box is closed, it ensures that the tray icon&#39;s context menu is made visible again.</span>

<span class="sd">    Args:</span>
<span class="sd">        title (str): The title of the message dialog box.</span>
<span class="sd">        text (str): The informational text to display in the dialog box.</span>

<span class="sd">    Side Effects:</span>
<span class="sd">        - Displays a QMessageBox with the specified title and text.</span>
<span class="sd">        - Sets the window icon of the QMessageBox using a custom `.ico` file.</span>
<span class="sd">        - Ensures the tray icon&#39;s context menu is visible after the dialog box is closed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg_box</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">()</span>  <span class="c1"># Create QMessageBox instance</span>
    <span class="n">msg_box</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>  <span class="c1"># Set the dialog box title</span>
    <span class="n">msg_box</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>  <span class="c1"># Set the message text</span>
    <span class="n">msg_box</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Information</span><span class="p">)</span>  <span class="c1"># Set the dialog box icon (information)</span>
    <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">find_marker_directory</span><span class="p">(</span><span class="s2">&quot;resources&quot;</span><span class="p">),</span> <span class="s2">&quot;resources&quot;</span><span class="p">,</span> <span class="s2">&quot;fingerprint.ico&quot;</span><span class="p">)</span>
    <span class="n">msg_box</span><span class="o">.</span><span class="n">setWindowIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="n">file_path</span><span class="p">))</span>
    <span class="n">msg_box</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>  <span class="c1"># Show the dialog box</span>

    <span class="c1"># Once the QMessageBox is closed, show the context menu again</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="o">.</span><span class="n">contextMenu</span><span class="p">()</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.icon_manager.MainWindow.start_timer" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">start_timer</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Starts a timer by returning the current time in seconds.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The current time in seconds since the epoch.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\icon_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">start_timer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Starts a timer by returning the current time in seconds.</span>

<span class="sd">    Returns:</span>
<span class="sd">        (float): The current time in seconds since the epoch.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>  <span class="c1"># Return the current time in seconds</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.icon_manager.MainWindow.stop_timer" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">stop_timer</span><span class="p">(</span><span class="n">start_time</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Stops the timer and calculates the elapsed time since the provided start time.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>start_time</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The starting time in seconds since the epoch.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="logs" open>
  <summary>Logs</summary>
  <p>Logs the elapsed time in seconds to the application log.</p>
</details>

<details class="side-effects" open>
  <summary>Side Effects</summary>
  <p>Displays a system tray notification with the elapsed time.</p>
</details>

            <details class="quote">
              <summary>Source code in <code>src\ui\icon_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">stop_timer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start_time</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Stops the timer and calculates the elapsed time since the provided start time.</span>

<span class="sd">    Args:</span>
<span class="sd">        start_time (float): The starting time in seconds since the epoch.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>

<span class="sd">    Logs:</span>
<span class="sd">        Logs the elapsed time in seconds to the application log.</span>

<span class="sd">    Side Effects:</span>
<span class="sd">        Displays a system tray notification with the elapsed time.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">end_time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_timer</span><span class="p">()</span>  <span class="c1"># Get the end time</span>
    <span class="n">elapsed_time</span> <span class="o">=</span> <span class="n">end_time</span> <span class="o">-</span> <span class="n">start_time</span>  <span class="c1"># Calculate the elapsed time</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;La tarea finalizo en </span><span class="si">{</span><span class="n">elapsed_time</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1"> segundos&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tray_icon</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="s2">&quot;Notificacion&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;La tarea finalizo en </span><span class="si">{</span><span class="n">elapsed_time</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1"> segundos&#39;</span><span class="p">,</span> <span class="n">QSystemTrayIcon</span><span class="o">.</span><span class="n">Information</span><span class="p">)</span>  <span class="c1"># Show notification with the elapsed time</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="src.ui.logs_dialog" class="doc doc-heading">
            <code>logs_dialog</code>


</h3>

    <div class="doc doc-contents ">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h4 id="src.ui.logs_dialog.LogsDialog" class="doc doc-heading">
            <code>LogsDialog</code>


</h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseDialog (src.ui.base_dialog.BaseDialog)" href="#src.ui.base_dialog.BaseDialog">BaseDialog</a></code></p>








              <details class="quote">
                <summary>Source code in <code>src\ui\logs_dialog.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">LogsDialog</span><span class="p">(</span><span class="n">BaseDialog</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the LogsDialog class.</span>

<span class="sd">        This constructor sets up the LogsDialog instance by calling the parent</span>
<span class="sd">        class initializer with a specific window title, initializing the user</span>
<span class="sd">        interface, and handling any exceptions that may occur during the process.</span>

<span class="sd">        Raises:</span>
<span class="sd">            BaseError: If an exception occurs during initialization, it is wrapped</span>
<span class="sd">                       in a BaseError with code 3501 and the exception message.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">window_title</span><span class="o">=</span><span class="s2">&quot;VISOR DE LOGS&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">init_ui</span><span class="p">()</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">init_ui</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3501</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">init_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the user interface for the logs dialog.</span>
<span class="sd">        This method sets up the UI components, including date selection widgets, </span>
<span class="sd">        text search filter, error and source selection lists, and a text display </span>
<span class="sd">        area for logs. It also configures the layout and connects signals to </span>
<span class="sd">        dynamically filter logs based on user input.</span>

<span class="sd">        UI Components:</span>
<span class="sd">            - Date Selection Widgets:</span>
<span class="sd">                * `start_date_edit`: QDateEdit for selecting the start date.</span>
<span class="sd">                * `end_date_edit`: QDateEdit for selecting the end date.</span>
<span class="sd">            - Text Search Filter:</span>
<span class="sd">                * `text_search_edit`: QLineEdit for searching text in logs.</span>
<span class="sd">            - Error Selection List:</span>
<span class="sd">                * `error_list`: QListWidget for selecting error codes to filter logs.</span>
<span class="sd">            - Source Selection List:</span>
<span class="sd">                * `source_list`: QListWidget for selecting log sources to filter logs.</span>
<span class="sd">            - Toggle Filter Button:</span>
<span class="sd">                * `toggle_filter_button`: QPushButton to toggle the visibility of </span>
<span class="sd">                  error and source filter lists.</span>
<span class="sd">            - Labels:</span>
<span class="sd">                * `select_errors_label`: QLabel for error filter instructions.</span>
<span class="sd">                * `select_sources_label`: QLabel for source filter instructions.</span>
<span class="sd">            - Logs Display:</span>
<span class="sd">                * `text_edit`: QTextEdit for displaying filtered logs.</span>

<span class="sd">        Layout:</span>
<span class="sd">            - `filter_layout`: Horizontal layout for date selection, text search, </span>
<span class="sd">              and toggle filter button.</span>
<span class="sd">            - `error_list_layout`: Vertical layout for error filter label and list.</span>
<span class="sd">            - `source_list_layout`: Vertical layout for source filter label and list.</span>
<span class="sd">            - `filter_lists_layout`: Horizontal layout combining error and source </span>
<span class="sd">              filter layouts.</span>
<span class="sd">            - `layout`: Main vertical layout combining all components.</span>

<span class="sd">        Behavior:</span>
<span class="sd">            - Connects signals to dynamically filter logs when:</span>
<span class="sd">                * Dates are changed.</span>
<span class="sd">                * Text is entered in the search field.</span>
<span class="sd">                * Error or source selections are modified.</span>
<span class="sd">            - Loads logs at startup.</span>

<span class="sd">        Raises:</span>
<span class="sd">            BaseError: If an exception occurs during UI initialization.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Date selection widgets</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start_date_edit</span> <span class="o">=</span> <span class="n">QDateEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start_date_edit</span><span class="o">.</span><span class="n">setCalendarPopup</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start_date_edit</span><span class="o">.</span><span class="n">setDate</span><span class="p">(</span><span class="n">QDate</span><span class="o">.</span><span class="n">currentDate</span><span class="p">()</span><span class="o">.</span><span class="n">addMonths</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start_date_edit</span><span class="o">.</span><span class="n">editingFinished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">load_logs</span><span class="p">)</span>  <span class="c1"># Dynamic filtering on date change</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">end_date_edit</span> <span class="o">=</span> <span class="n">QDateEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">end_date_edit</span><span class="o">.</span><span class="n">setCalendarPopup</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">end_date_edit</span><span class="o">.</span><span class="n">setDate</span><span class="p">(</span><span class="n">QDate</span><span class="o">.</span><span class="n">currentDate</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">end_date_edit</span><span class="o">.</span><span class="n">editingFinished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">load_logs</span><span class="p">)</span>  <span class="c1"># Dynamic filtering on date change</span>

            <span class="c1"># Text search filter</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text_search_edit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text_search_edit</span><span class="o">.</span><span class="n">setPlaceholderText</span><span class="p">(</span><span class="s2">&quot;Buscar texto en los logs...&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text_search_edit</span><span class="o">.</span><span class="n">textChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">load_logs</span><span class="p">)</span>  <span class="c1"># Dynamic filtering on text change</span>

            <span class="c1"># Error selection list (initially hidden)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">error_list</span> <span class="o">=</span> <span class="n">QListWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">error_list</span><span class="o">.</span><span class="n">setSelectionMode</span><span class="p">(</span><span class="n">QListWidget</span><span class="o">.</span><span class="n">MultiSelection</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">error_list</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># Initially hide the error list</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">error_list</span><span class="o">.</span><span class="n">itemSelectionChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">load_logs</span><span class="p">)</span>  <span class="c1"># Dynamic filtering on selection change</span>

            <span class="k">for</span> <span class="n">code</span><span class="p">,</span> <span class="n">description</span> <span class="ow">in</span> <span class="n">ERROR_CODES_DICT</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">item</span> <span class="o">=</span> <span class="n">QListWidgetItem</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">] </span><span class="si">{</span><span class="n">description</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">item</span><span class="o">.</span><span class="n">setData</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">code</span><span class="p">)</span>  <span class="c1"># Store only the error code as data</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">error_list</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

            <span class="c1"># Source selection list</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">source_list</span> <span class="o">=</span> <span class="n">QListWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">source_list</span><span class="o">.</span><span class="n">setSelectionMode</span><span class="p">(</span><span class="n">QListWidget</span><span class="o">.</span><span class="n">MultiSelection</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">source_list</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># Initially hide the source list</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">source_list</span><span class="o">.</span><span class="n">itemSelectionChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">load_logs</span><span class="p">)</span>  <span class="c1"># Dynamic filtering on selection change</span>

            <span class="n">sources</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;programa&quot;</span><span class="p">,</span> <span class="s2">&quot;icono&quot;</span><span class="p">,</span> <span class="s2">&quot;servicio&quot;</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">source</span> <span class="ow">in</span> <span class="n">sources</span><span class="p">:</span>
                <span class="n">item</span> <span class="o">=</span> <span class="n">QListWidgetItem</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
                <span class="n">item</span><span class="o">.</span><span class="n">setData</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span>  <span class="c1"># Store the source as data</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">source_list</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

            <span class="c1"># Button to toggle the filter lists visibility with an SVG icon</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">toggle_filter_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">file_path_filter</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_path_resources</span><span class="p">,</span> <span class="s2">&quot;window&quot;</span><span class="p">,</span> <span class="s2">&quot;filter-right.svg&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">toggle_filter_button</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_path_filter</span><span class="p">))</span>  <span class="c1"># Set SVG icon</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">toggle_filter_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">toggle_filter_visibility</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">select_errors_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Selecciona los errores a filtrar (vacío = todos):&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">select_errors_label</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">select_sources_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Selecciona las fuentes a filtrar (vacío = todas):&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">select_sources_label</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

            <span class="c1"># Layout for filters</span>
            <span class="n">filter_layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
            <span class="n">filter_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Desde:&quot;</span><span class="p">))</span>
            <span class="n">filter_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start_date_edit</span><span class="p">)</span>
            <span class="n">filter_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Hasta:&quot;</span><span class="p">))</span>
            <span class="n">filter_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end_date_edit</span><span class="p">)</span>
            <span class="n">filter_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Buscar:&quot;</span><span class="p">))</span>
            <span class="n">filter_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text_search_edit</span><span class="p">)</span>
            <span class="n">filter_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">toggle_filter_button</span><span class="p">)</span>  <span class="c1"># Button to toggle the filter lists</span>

            <span class="c1"># Layout for error list</span>
            <span class="n">error_list_layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
            <span class="n">error_list_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">select_errors_label</span><span class="p">)</span>
            <span class="n">error_list_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">error_list</span><span class="p">)</span>
            <span class="n">error_list_layout</span><span class="o">.</span><span class="n">setStretch</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">error_list_layout</span><span class="o">.</span><span class="n">setStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

            <span class="c1"># Layout for source list</span>
            <span class="n">source_list_layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
            <span class="n">source_list_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">select_sources_label</span><span class="p">)</span>
            <span class="n">source_list_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source_list</span><span class="p">)</span>
            <span class="n">source_list_layout</span><span class="o">.</span><span class="n">setStretch</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">source_list_layout</span><span class="o">.</span><span class="n">setStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

            <span class="c1"># Combine error and source list layouts</span>
            <span class="n">filter_lists_layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
            <span class="n">filter_lists_layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">error_list_layout</span><span class="p">)</span>
            <span class="n">filter_lists_layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">source_list_layout</span><span class="p">)</span>

            <span class="c1"># Text widget to display logs</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text_edit</span> <span class="o">=</span> <span class="n">QTextEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text_edit</span><span class="o">.</span><span class="n">setReadOnly</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

            <span class="c1"># Main layout</span>
            <span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
            <span class="n">layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">filter_layout</span><span class="p">)</span>
            <span class="n">layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">filter_lists_layout</span><span class="p">)</span>
            <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text_edit</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
            <span class="n">layout</span><span class="o">.</span><span class="n">setStretch</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1"># filter_layout takes only the space it needs</span>
            <span class="n">layout</span><span class="o">.</span><span class="n">setStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1"># filter_lists_layout takes only the space it needs</span>
            <span class="n">layout</span><span class="o">.</span><span class="n">setStretch</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1"># text_edit (logs) expands to fill the remaining space</span>

            <span class="c1"># Load logs at startup</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">load_logs</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3501</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">toggle_filter_visibility</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Toggles the visibility of filter-related UI elements in the logs dialog.</span>

<span class="sd">        This method switches the visibility state of the following elements:</span>
<span class="sd">            - `select_errors_label`</span>
<span class="sd">            - `error_list`</span>
<span class="sd">            - `select_sources_label`</span>
<span class="sd">            - `source_list`</span>

<span class="sd">        If an exception occurs during the process, it raises a `BaseError` with</span>
<span class="sd">        an error code of 3500 and the exception message.</span>

<span class="sd">        Raises:</span>
<span class="sd">            BaseError: If an exception occurs while toggling visibility.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">select_errors_label</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">select_errors_label</span><span class="o">.</span><span class="n">isVisible</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">error_list</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_list</span><span class="o">.</span><span class="n">isVisible</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">select_sources_label</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">select_sources_label</span><span class="o">.</span><span class="n">isVisible</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">source_list</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_list</span><span class="o">.</span><span class="n">isVisible</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3500</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">load_logs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Loads and displays error logs based on the specified filters.</span>

<span class="sd">        This method retrieves error logs within a specified date range, </span>
<span class="sd">        filtered by selected error types, sources, and a search text. </span>

<span class="sd">        The logs are then displayed in a text editor.</span>

<span class="sd">        Raises:</span>
<span class="sd">            BaseError: If an exception occurs during the log retrieval process.</span>

<span class="sd">        Filters:</span>
<span class="sd">            - Date range: Defined by `start_date_edit` and `end_date_edit`.</span>
<span class="sd">            - Error types: Selected items in `error_list`.</span>
<span class="sd">            - Sources: Selected items in `source_list`.</span>
<span class="sd">            - Search text: Text entered in `text_search_edit`.</span>

<span class="sd">        Steps:</span>
<span class="sd">            1. Retrieve the start and end dates from the date edit widgets.</span>
<span class="sd">            2. Get the search text and convert it to lowercase.</span>
<span class="sd">            3. Collect selected error types and sources from their respective lists.</span>
<span class="sd">            4. Fetch the filtered error logs using `get_error_logs`.</span>
<span class="sd">            5. Display the logs in the `text_edit` widget.</span>

<span class="sd">        Note:</span>
<span class="sd">            Ensure that the `get_error_logs` method is implemented to handle </span>
<span class="sd">            the filtering logic and return the appropriate logs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">start_date</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_date_edit</span><span class="o">.</span><span class="n">date</span><span class="p">()</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="s2">&quot;yyyy-MM-dd&quot;</span><span class="p">)</span>
            <span class="n">end_date</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">end_date_edit</span><span class="o">.</span><span class="n">date</span><span class="p">()</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="s2">&quot;yyyy-MM-dd&quot;</span><span class="p">)</span>
            <span class="n">search_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text_search_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

            <span class="n">selected_errors</span> <span class="o">=</span> <span class="p">{</span><span class="n">item</span><span class="o">.</span><span class="n">data</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_list</span><span class="o">.</span><span class="n">selectedItems</span><span class="p">()}</span>
            <span class="n">selected_sources</span> <span class="o">=</span> <span class="p">{</span><span class="n">item</span><span class="o">.</span><span class="n">data</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_list</span><span class="o">.</span><span class="n">selectedItems</span><span class="p">()}</span>

            <span class="n">error_logs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_error_logs</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">,</span> <span class="n">selected_errors</span><span class="p">,</span> <span class="n">selected_sources</span><span class="p">,</span> <span class="n">search_text</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text_edit</span><span class="o">.</span><span class="n">setPlainText</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">error_logs</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3500</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_error_logs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">,</span> <span class="n">selected_errors</span><span class="p">,</span> <span class="n">selected_sources</span><span class="p">,</span> <span class="n">search_text</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieves error log entries from log files within a specified date range, filtered by error codes, sources, </span>
<span class="sd">        and optional search text.</span>

<span class="sd">        Args:</span>
<span class="sd">            start_date (str): The start date in the format &#39;YYYY-MM-DD&#39; to filter log entries.</span>
<span class="sd">            end_date (str): The end date in the format &#39;YYYY-MM-DD&#39; to filter log entries.</span>
<span class="sd">            selected_errors (list): A list of error codes to filter log entries. If empty, all error codes are included.</span>
<span class="sd">            selected_sources (list): A list of sources to filter log entries. If empty, all sources are included.</span>
<span class="sd">            search_text (str): Optional text to search within log entries. If empty, no search filtering is applied.</span>

<span class="sd">        Returns:</span>
<span class="sd">            (list): A list of formatted error log entries that match the specified filters, sorted by date and time.</span>

<span class="sd">        Raises:</span>
<span class="sd">            BaseError: If an exception occurs during log processing, it raises a BaseError with code 3500 and the error message.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">error_entries</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="n">pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;(\d</span><span class="si">{4}</span><span class="s2">-\d</span><span class="si">{2}</span><span class="s2">-\d</span><span class="si">{2}</span><span class="s2"> \d</span><span class="si">{2}</span><span class="s2">:\d</span><span class="si">{2}</span><span class="s2">:\d</span><span class="si">{2}</span><span class="s2">,\d</span><span class="si">{3}</span><span class="s2">) - \w+ - \[(\d</span><span class="si">{4}</span><span class="s2">)\]&quot;</span><span class="p">)</span>  <span class="c1"># Capture date, time, and error code</span>

            <span class="n">log_files</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;programa&quot;</span><span class="p">:</span> <span class="s2">&quot;programa_reloj_de_asistencias_&quot;</span> <span class="o">+</span> <span class="n">PROGRAM_VERSION</span> <span class="o">+</span> <span class="s2">&quot;_error.log&quot;</span><span class="p">,</span>
                <span class="s2">&quot;icono&quot;</span><span class="p">:</span> <span class="s2">&quot;icono_reloj_de_asistencias_&quot;</span> <span class="o">+</span> <span class="n">SERVICE_VERSION</span> <span class="o">+</span> <span class="s2">&quot;_error.log&quot;</span><span class="p">,</span>
                <span class="s2">&quot;servicio&quot;</span><span class="p">:</span> <span class="s2">&quot;servicio_reloj_de_asistencias_&quot;</span> <span class="o">+</span> <span class="n">SERVICE_VERSION</span> <span class="o">+</span> <span class="s2">&quot;_error.log&quot;</span>
            <span class="p">}</span>

            <span class="k">for</span> <span class="n">folder</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">LOGS_DIR</span><span class="p">):</span>
                <span class="n">folder_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">LOGS_DIR</span><span class="p">,</span> <span class="n">folder</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">folder_path</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">source</span><span class="p">,</span> <span class="n">log_file</span> <span class="ow">in</span> <span class="n">log_files</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="k">if</span> <span class="n">selected_sources</span> <span class="ow">and</span> <span class="n">source</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">selected_sources</span><span class="p">:</span>
                            <span class="k">continue</span>
                        <span class="n">log_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder_path</span><span class="p">,</span> <span class="n">log_file</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">log_path</span><span class="p">):</span>
                            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">log_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;replace&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">log_file</span><span class="p">:</span>
                                <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">log_file</span><span class="p">:</span>
                                    <span class="n">match</span> <span class="o">=</span> <span class="n">pattern</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
                                    <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
                                        <span class="n">log_datetime</span><span class="p">,</span> <span class="n">error_code</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">groups</span><span class="p">()</span>
                                        <span class="n">log_date</span> <span class="o">=</span> <span class="n">log_datetime</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
                                        <span class="k">if</span> <span class="n">start_date</span> <span class="o">&lt;=</span> <span class="n">log_date</span> <span class="o">&lt;=</span> <span class="n">end_date</span><span class="p">:</span>
                                            <span class="c1"># Show all errors if none are selected, otherwise filter</span>
                                            <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">selected_errors</span> <span class="ow">or</span> <span class="n">error_code</span> <span class="ow">in</span> <span class="n">selected_errors</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">search_text</span> <span class="ow">or</span> <span class="n">search_text</span> <span class="ow">in</span> <span class="n">line</span><span class="o">.</span><span class="n">lower</span><span class="p">()):</span>
                                                <span class="n">error_entries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">source</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1"># Sort the entries by date and time</span>
            <span class="n">error_entries</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;(\d</span><span class="si">{4}</span><span class="s2">-\d</span><span class="si">{2}</span><span class="s2">-\d</span><span class="si">{2}</span><span class="s2"> \d</span><span class="si">{2}</span><span class="s2">:\d</span><span class="si">{2}</span><span class="s2">:\d</span><span class="si">{2}</span><span class="s2">,\d</span><span class="si">{3}</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>

            <span class="k">return</span> <span class="n">error_entries</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3500</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h5 id="src.ui.logs_dialog.LogsDialog.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Initializes the LogsDialog class.</p>
<p>This constructor sets up the LogsDialog instance by calling the parent
class initializer with a specific window title, initializing the user
interface, and handling any exceptions that may occur during the process.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseError">BaseError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an exception occurs during initialization, it is wrapped
       in a BaseError with code 3501 and the exception message.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\logs_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the LogsDialog class.</span>

<span class="sd">    This constructor sets up the LogsDialog instance by calling the parent</span>
<span class="sd">    class initializer with a specific window title, initializing the user</span>
<span class="sd">    interface, and handling any exceptions that may occur during the process.</span>

<span class="sd">    Raises:</span>
<span class="sd">        BaseError: If an exception occurs during initialization, it is wrapped</span>
<span class="sd">                   in a BaseError with code 3501 and the exception message.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">window_title</span><span class="o">=</span><span class="s2">&quot;VISOR DE LOGS&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_ui</span><span class="p">()</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">init_ui</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3501</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.logs_dialog.LogsDialog.get_error_logs" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_error_logs</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">,</span> <span class="n">selected_errors</span><span class="p">,</span> <span class="n">selected_sources</span><span class="p">,</span> <span class="n">search_text</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Retrieves error log entries from log files within a specified date range, filtered by error codes, sources, 
and optional search text.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>start_date</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The start date in the format 'YYYY-MM-DD' to filter log entries.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>end_date</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The end date in the format 'YYYY-MM-DD' to filter log entries.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>selected_errors</code>
            </td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of error codes to filter log entries. If empty, all error codes are included.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>selected_sources</code>
            </td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of sources to filter log entries. If empty, all sources are included.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>search_text</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional text to search within log entries. If empty, no search filtering is applied.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of formatted error log entries that match the specified filters, sorted by date and time.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseError">BaseError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an exception occurs during log processing, it raises a BaseError with code 3500 and the error message.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\logs_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_error_logs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">,</span> <span class="n">selected_errors</span><span class="p">,</span> <span class="n">selected_sources</span><span class="p">,</span> <span class="n">search_text</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieves error log entries from log files within a specified date range, filtered by error codes, sources, </span>
<span class="sd">    and optional search text.</span>

<span class="sd">    Args:</span>
<span class="sd">        start_date (str): The start date in the format &#39;YYYY-MM-DD&#39; to filter log entries.</span>
<span class="sd">        end_date (str): The end date in the format &#39;YYYY-MM-DD&#39; to filter log entries.</span>
<span class="sd">        selected_errors (list): A list of error codes to filter log entries. If empty, all error codes are included.</span>
<span class="sd">        selected_sources (list): A list of sources to filter log entries. If empty, all sources are included.</span>
<span class="sd">        search_text (str): Optional text to search within log entries. If empty, no search filtering is applied.</span>

<span class="sd">    Returns:</span>
<span class="sd">        (list): A list of formatted error log entries that match the specified filters, sorted by date and time.</span>

<span class="sd">    Raises:</span>
<span class="sd">        BaseError: If an exception occurs during log processing, it raises a BaseError with code 3500 and the error message.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">error_entries</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;(\d</span><span class="si">{4}</span><span class="s2">-\d</span><span class="si">{2}</span><span class="s2">-\d</span><span class="si">{2}</span><span class="s2"> \d</span><span class="si">{2}</span><span class="s2">:\d</span><span class="si">{2}</span><span class="s2">:\d</span><span class="si">{2}</span><span class="s2">,\d</span><span class="si">{3}</span><span class="s2">) - \w+ - \[(\d</span><span class="si">{4}</span><span class="s2">)\]&quot;</span><span class="p">)</span>  <span class="c1"># Capture date, time, and error code</span>

        <span class="n">log_files</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;programa&quot;</span><span class="p">:</span> <span class="s2">&quot;programa_reloj_de_asistencias_&quot;</span> <span class="o">+</span> <span class="n">PROGRAM_VERSION</span> <span class="o">+</span> <span class="s2">&quot;_error.log&quot;</span><span class="p">,</span>
            <span class="s2">&quot;icono&quot;</span><span class="p">:</span> <span class="s2">&quot;icono_reloj_de_asistencias_&quot;</span> <span class="o">+</span> <span class="n">SERVICE_VERSION</span> <span class="o">+</span> <span class="s2">&quot;_error.log&quot;</span><span class="p">,</span>
            <span class="s2">&quot;servicio&quot;</span><span class="p">:</span> <span class="s2">&quot;servicio_reloj_de_asistencias_&quot;</span> <span class="o">+</span> <span class="n">SERVICE_VERSION</span> <span class="o">+</span> <span class="s2">&quot;_error.log&quot;</span>
        <span class="p">}</span>

        <span class="k">for</span> <span class="n">folder</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">LOGS_DIR</span><span class="p">):</span>
            <span class="n">folder_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">LOGS_DIR</span><span class="p">,</span> <span class="n">folder</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">folder_path</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">source</span><span class="p">,</span> <span class="n">log_file</span> <span class="ow">in</span> <span class="n">log_files</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">selected_sources</span> <span class="ow">and</span> <span class="n">source</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">selected_sources</span><span class="p">:</span>
                        <span class="k">continue</span>
                    <span class="n">log_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder_path</span><span class="p">,</span> <span class="n">log_file</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">log_path</span><span class="p">):</span>
                        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">log_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;replace&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">log_file</span><span class="p">:</span>
                            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">log_file</span><span class="p">:</span>
                                <span class="n">match</span> <span class="o">=</span> <span class="n">pattern</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
                                <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
                                    <span class="n">log_datetime</span><span class="p">,</span> <span class="n">error_code</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">groups</span><span class="p">()</span>
                                    <span class="n">log_date</span> <span class="o">=</span> <span class="n">log_datetime</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
                                    <span class="k">if</span> <span class="n">start_date</span> <span class="o">&lt;=</span> <span class="n">log_date</span> <span class="o">&lt;=</span> <span class="n">end_date</span><span class="p">:</span>
                                        <span class="c1"># Show all errors if none are selected, otherwise filter</span>
                                        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">selected_errors</span> <span class="ow">or</span> <span class="n">error_code</span> <span class="ow">in</span> <span class="n">selected_errors</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">search_text</span> <span class="ow">or</span> <span class="n">search_text</span> <span class="ow">in</span> <span class="n">line</span><span class="o">.</span><span class="n">lower</span><span class="p">()):</span>
                                            <span class="n">error_entries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">source</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Sort the entries by date and time</span>
        <span class="n">error_entries</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;(\d</span><span class="si">{4}</span><span class="s2">-\d</span><span class="si">{2}</span><span class="s2">-\d</span><span class="si">{2}</span><span class="s2"> \d</span><span class="si">{2}</span><span class="s2">:\d</span><span class="si">{2}</span><span class="s2">:\d</span><span class="si">{2}</span><span class="s2">,\d</span><span class="si">{3}</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">error_entries</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3500</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.logs_dialog.LogsDialog.init_ui" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">init_ui</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Initializes the user interface for the logs dialog.
This method sets up the UI components, including date selection widgets, 
text search filter, error and source selection lists, and a text display 
area for logs. It also configures the layout and connects signals to 
dynamically filter logs based on user input.</p>


<details class="ui-components" open>
  <summary>UI Components</summary>
  <ul>
<li>Date Selection Widgets:<ul>
<li><code>start_date_edit</code>: QDateEdit for selecting the start date.</li>
<li><code>end_date_edit</code>: QDateEdit for selecting the end date.</li>
</ul>
</li>
<li>Text Search Filter:<ul>
<li><code>text_search_edit</code>: QLineEdit for searching text in logs.</li>
</ul>
</li>
<li>Error Selection List:<ul>
<li><code>error_list</code>: QListWidget for selecting error codes to filter logs.</li>
</ul>
</li>
<li>Source Selection List:<ul>
<li><code>source_list</code>: QListWidget for selecting log sources to filter logs.</li>
</ul>
</li>
<li>Toggle Filter Button:<ul>
<li><code>toggle_filter_button</code>: QPushButton to toggle the visibility of 
  error and source filter lists.</li>
</ul>
</li>
<li>Labels:<ul>
<li><code>select_errors_label</code>: QLabel for error filter instructions.</li>
<li><code>select_sources_label</code>: QLabel for source filter instructions.</li>
</ul>
</li>
<li>Logs Display:<ul>
<li><code>text_edit</code>: QTextEdit for displaying filtered logs.</li>
</ul>
</li>
</ul>
</details>

<details class="layout" open>
  <summary>Layout</summary>
  <ul>
<li><code>filter_layout</code>: Horizontal layout for date selection, text search, 
  and toggle filter button.</li>
<li><code>error_list_layout</code>: Vertical layout for error filter label and list.</li>
<li><code>source_list_layout</code>: Vertical layout for source filter label and list.</li>
<li><code>filter_lists_layout</code>: Horizontal layout combining error and source 
  filter layouts.</li>
<li><code>layout</code>: Main vertical layout combining all components.</li>
</ul>
</details>

<details class="behavior" open>
  <summary>Behavior</summary>
  <ul>
<li>Connects signals to dynamically filter logs when:<ul>
<li>Dates are changed.</li>
<li>Text is entered in the search field.</li>
<li>Error or source selections are modified.</li>
</ul>
</li>
<li>Loads logs at startup.</li>
</ul>
</details>

<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseError">BaseError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an exception occurs during UI initialization.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\logs_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">init_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the user interface for the logs dialog.</span>
<span class="sd">    This method sets up the UI components, including date selection widgets, </span>
<span class="sd">    text search filter, error and source selection lists, and a text display </span>
<span class="sd">    area for logs. It also configures the layout and connects signals to </span>
<span class="sd">    dynamically filter logs based on user input.</span>

<span class="sd">    UI Components:</span>
<span class="sd">        - Date Selection Widgets:</span>
<span class="sd">            * `start_date_edit`: QDateEdit for selecting the start date.</span>
<span class="sd">            * `end_date_edit`: QDateEdit for selecting the end date.</span>
<span class="sd">        - Text Search Filter:</span>
<span class="sd">            * `text_search_edit`: QLineEdit for searching text in logs.</span>
<span class="sd">        - Error Selection List:</span>
<span class="sd">            * `error_list`: QListWidget for selecting error codes to filter logs.</span>
<span class="sd">        - Source Selection List:</span>
<span class="sd">            * `source_list`: QListWidget for selecting log sources to filter logs.</span>
<span class="sd">        - Toggle Filter Button:</span>
<span class="sd">            * `toggle_filter_button`: QPushButton to toggle the visibility of </span>
<span class="sd">              error and source filter lists.</span>
<span class="sd">        - Labels:</span>
<span class="sd">            * `select_errors_label`: QLabel for error filter instructions.</span>
<span class="sd">            * `select_sources_label`: QLabel for source filter instructions.</span>
<span class="sd">        - Logs Display:</span>
<span class="sd">            * `text_edit`: QTextEdit for displaying filtered logs.</span>

<span class="sd">    Layout:</span>
<span class="sd">        - `filter_layout`: Horizontal layout for date selection, text search, </span>
<span class="sd">          and toggle filter button.</span>
<span class="sd">        - `error_list_layout`: Vertical layout for error filter label and list.</span>
<span class="sd">        - `source_list_layout`: Vertical layout for source filter label and list.</span>
<span class="sd">        - `filter_lists_layout`: Horizontal layout combining error and source </span>
<span class="sd">          filter layouts.</span>
<span class="sd">        - `layout`: Main vertical layout combining all components.</span>

<span class="sd">    Behavior:</span>
<span class="sd">        - Connects signals to dynamically filter logs when:</span>
<span class="sd">            * Dates are changed.</span>
<span class="sd">            * Text is entered in the search field.</span>
<span class="sd">            * Error or source selections are modified.</span>
<span class="sd">        - Loads logs at startup.</span>

<span class="sd">    Raises:</span>
<span class="sd">        BaseError: If an exception occurs during UI initialization.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Date selection widgets</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_date_edit</span> <span class="o">=</span> <span class="n">QDateEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_date_edit</span><span class="o">.</span><span class="n">setCalendarPopup</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_date_edit</span><span class="o">.</span><span class="n">setDate</span><span class="p">(</span><span class="n">QDate</span><span class="o">.</span><span class="n">currentDate</span><span class="p">()</span><span class="o">.</span><span class="n">addMonths</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_date_edit</span><span class="o">.</span><span class="n">editingFinished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">load_logs</span><span class="p">)</span>  <span class="c1"># Dynamic filtering on date change</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">end_date_edit</span> <span class="o">=</span> <span class="n">QDateEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end_date_edit</span><span class="o">.</span><span class="n">setCalendarPopup</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end_date_edit</span><span class="o">.</span><span class="n">setDate</span><span class="p">(</span><span class="n">QDate</span><span class="o">.</span><span class="n">currentDate</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end_date_edit</span><span class="o">.</span><span class="n">editingFinished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">load_logs</span><span class="p">)</span>  <span class="c1"># Dynamic filtering on date change</span>

        <span class="c1"># Text search filter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text_search_edit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text_search_edit</span><span class="o">.</span><span class="n">setPlaceholderText</span><span class="p">(</span><span class="s2">&quot;Buscar texto en los logs...&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text_search_edit</span><span class="o">.</span><span class="n">textChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">load_logs</span><span class="p">)</span>  <span class="c1"># Dynamic filtering on text change</span>

        <span class="c1"># Error selection list (initially hidden)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">error_list</span> <span class="o">=</span> <span class="n">QListWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">error_list</span><span class="o">.</span><span class="n">setSelectionMode</span><span class="p">(</span><span class="n">QListWidget</span><span class="o">.</span><span class="n">MultiSelection</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">error_list</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># Initially hide the error list</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">error_list</span><span class="o">.</span><span class="n">itemSelectionChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">load_logs</span><span class="p">)</span>  <span class="c1"># Dynamic filtering on selection change</span>

        <span class="k">for</span> <span class="n">code</span><span class="p">,</span> <span class="n">description</span> <span class="ow">in</span> <span class="n">ERROR_CODES_DICT</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">QListWidgetItem</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">] </span><span class="si">{</span><span class="n">description</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">item</span><span class="o">.</span><span class="n">setData</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">code</span><span class="p">)</span>  <span class="c1"># Store only the error code as data</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">error_list</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

        <span class="c1"># Source selection list</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source_list</span> <span class="o">=</span> <span class="n">QListWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source_list</span><span class="o">.</span><span class="n">setSelectionMode</span><span class="p">(</span><span class="n">QListWidget</span><span class="o">.</span><span class="n">MultiSelection</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source_list</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># Initially hide the source list</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source_list</span><span class="o">.</span><span class="n">itemSelectionChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">load_logs</span><span class="p">)</span>  <span class="c1"># Dynamic filtering on selection change</span>

        <span class="n">sources</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;programa&quot;</span><span class="p">,</span> <span class="s2">&quot;icono&quot;</span><span class="p">,</span> <span class="s2">&quot;servicio&quot;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">source</span> <span class="ow">in</span> <span class="n">sources</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">QListWidgetItem</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
            <span class="n">item</span><span class="o">.</span><span class="n">setData</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span>  <span class="c1"># Store the source as data</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">source_list</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

        <span class="c1"># Button to toggle the filter lists visibility with an SVG icon</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toggle_filter_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_path_filter</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_path_resources</span><span class="p">,</span> <span class="s2">&quot;window&quot;</span><span class="p">,</span> <span class="s2">&quot;filter-right.svg&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toggle_filter_button</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_path_filter</span><span class="p">))</span>  <span class="c1"># Set SVG icon</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toggle_filter_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">toggle_filter_visibility</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">select_errors_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Selecciona los errores a filtrar (vacío = todos):&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">select_errors_label</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">select_sources_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Selecciona las fuentes a filtrar (vacío = todas):&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">select_sources_label</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="c1"># Layout for filters</span>
        <span class="n">filter_layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">filter_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Desde:&quot;</span><span class="p">))</span>
        <span class="n">filter_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start_date_edit</span><span class="p">)</span>
        <span class="n">filter_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Hasta:&quot;</span><span class="p">))</span>
        <span class="n">filter_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end_date_edit</span><span class="p">)</span>
        <span class="n">filter_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Buscar:&quot;</span><span class="p">))</span>
        <span class="n">filter_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text_search_edit</span><span class="p">)</span>
        <span class="n">filter_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">toggle_filter_button</span><span class="p">)</span>  <span class="c1"># Button to toggle the filter lists</span>

        <span class="c1"># Layout for error list</span>
        <span class="n">error_list_layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">error_list_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">select_errors_label</span><span class="p">)</span>
        <span class="n">error_list_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">error_list</span><span class="p">)</span>
        <span class="n">error_list_layout</span><span class="o">.</span><span class="n">setStretch</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">error_list_layout</span><span class="o">.</span><span class="n">setStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Layout for source list</span>
        <span class="n">source_list_layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">source_list_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">select_sources_label</span><span class="p">)</span>
        <span class="n">source_list_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source_list</span><span class="p">)</span>
        <span class="n">source_list_layout</span><span class="o">.</span><span class="n">setStretch</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">source_list_layout</span><span class="o">.</span><span class="n">setStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Combine error and source list layouts</span>
        <span class="n">filter_lists_layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">filter_lists_layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">error_list_layout</span><span class="p">)</span>
        <span class="n">filter_lists_layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">source_list_layout</span><span class="p">)</span>

        <span class="c1"># Text widget to display logs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text_edit</span> <span class="o">=</span> <span class="n">QTextEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text_edit</span><span class="o">.</span><span class="n">setReadOnly</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># Main layout</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">filter_layout</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">filter_lists_layout</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text_edit</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">setStretch</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1"># filter_layout takes only the space it needs</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">setStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1"># filter_lists_layout takes only the space it needs</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">setStretch</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1"># text_edit (logs) expands to fill the remaining space</span>

        <span class="c1"># Load logs at startup</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_logs</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3501</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.logs_dialog.LogsDialog.load_logs" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_logs</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Loads and displays error logs based on the specified filters.</p>
<p>This method retrieves error logs within a specified date range, 
filtered by selected error types, sources, and a search text. </p>
<p>The logs are then displayed in a text editor.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseError">BaseError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an exception occurs during the log retrieval process.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="filters" open>
  <summary>Filters</summary>
  <ul>
<li>Date range: Defined by <code>start_date_edit</code> and <code>end_date_edit</code>.</li>
<li>Error types: Selected items in <code>error_list</code>.</li>
<li>Sources: Selected items in <code>source_list</code>.</li>
<li>Search text: Text entered in <code>text_search_edit</code>.</li>
</ul>
</details>

<details class="steps" open>
  <summary>Steps</summary>
  <ol>
<li>Retrieve the start and end dates from the date edit widgets.</li>
<li>Get the search text and convert it to lowercase.</li>
<li>Collect selected error types and sources from their respective lists.</li>
<li>Fetch the filtered error logs using <code>get_error_logs</code>.</li>
<li>Display the logs in the <code>text_edit</code> widget.</li>
</ol>
</details>

<details class="note" open>
  <summary>Note</summary>
  <p>Ensure that the <code>get_error_logs</code> method is implemented to handle 
the filtering logic and return the appropriate logs.</p>
</details>

            <details class="quote">
              <summary>Source code in <code>src\ui\logs_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_logs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Loads and displays error logs based on the specified filters.</span>

<span class="sd">    This method retrieves error logs within a specified date range, </span>
<span class="sd">    filtered by selected error types, sources, and a search text. </span>

<span class="sd">    The logs are then displayed in a text editor.</span>

<span class="sd">    Raises:</span>
<span class="sd">        BaseError: If an exception occurs during the log retrieval process.</span>

<span class="sd">    Filters:</span>
<span class="sd">        - Date range: Defined by `start_date_edit` and `end_date_edit`.</span>
<span class="sd">        - Error types: Selected items in `error_list`.</span>
<span class="sd">        - Sources: Selected items in `source_list`.</span>
<span class="sd">        - Search text: Text entered in `text_search_edit`.</span>

<span class="sd">    Steps:</span>
<span class="sd">        1. Retrieve the start and end dates from the date edit widgets.</span>
<span class="sd">        2. Get the search text and convert it to lowercase.</span>
<span class="sd">        3. Collect selected error types and sources from their respective lists.</span>
<span class="sd">        4. Fetch the filtered error logs using `get_error_logs`.</span>
<span class="sd">        5. Display the logs in the `text_edit` widget.</span>

<span class="sd">    Note:</span>
<span class="sd">        Ensure that the `get_error_logs` method is implemented to handle </span>
<span class="sd">        the filtering logic and return the appropriate logs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">start_date</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_date_edit</span><span class="o">.</span><span class="n">date</span><span class="p">()</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="s2">&quot;yyyy-MM-dd&quot;</span><span class="p">)</span>
        <span class="n">end_date</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">end_date_edit</span><span class="o">.</span><span class="n">date</span><span class="p">()</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="s2">&quot;yyyy-MM-dd&quot;</span><span class="p">)</span>
        <span class="n">search_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text_search_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="n">selected_errors</span> <span class="o">=</span> <span class="p">{</span><span class="n">item</span><span class="o">.</span><span class="n">data</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_list</span><span class="o">.</span><span class="n">selectedItems</span><span class="p">()}</span>
        <span class="n">selected_sources</span> <span class="o">=</span> <span class="p">{</span><span class="n">item</span><span class="o">.</span><span class="n">data</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_list</span><span class="o">.</span><span class="n">selectedItems</span><span class="p">()}</span>

        <span class="n">error_logs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_error_logs</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">,</span> <span class="n">selected_errors</span><span class="p">,</span> <span class="n">selected_sources</span><span class="p">,</span> <span class="n">search_text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text_edit</span><span class="o">.</span><span class="n">setPlainText</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">error_logs</span><span class="p">))</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3500</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.logs_dialog.LogsDialog.toggle_filter_visibility" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">toggle_filter_visibility</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Toggles the visibility of filter-related UI elements in the logs dialog.</p>


<details class="this-method-switches-the-visibility-state-of-the-following-elements" open>
  <summary>This method switches the visibility state of the following elements</summary>
  <ul>
<li><code>select_errors_label</code></li>
<li><code>error_list</code></li>
<li><code>select_sources_label</code></li>
<li><code>source_list</code></li>
</ul>
</details>        <p>If an exception occurs during the process, it raises a <code>BaseError</code> with
an error code of 3500 and the exception message.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseError">BaseError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an exception occurs while toggling visibility.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\logs_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">toggle_filter_visibility</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Toggles the visibility of filter-related UI elements in the logs dialog.</span>

<span class="sd">    This method switches the visibility state of the following elements:</span>
<span class="sd">        - `select_errors_label`</span>
<span class="sd">        - `error_list`</span>
<span class="sd">        - `select_sources_label`</span>
<span class="sd">        - `source_list`</span>

<span class="sd">    If an exception occurs during the process, it raises a `BaseError` with</span>
<span class="sd">    an error code of 3500 and the exception message.</span>

<span class="sd">    Raises:</span>
<span class="sd">        BaseError: If an exception occurs while toggling visibility.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">select_errors_label</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">select_errors_label</span><span class="o">.</span><span class="n">isVisible</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">error_list</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_list</span><span class="o">.</span><span class="n">isVisible</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">select_sources_label</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">select_sources_label</span><span class="o">.</span><span class="n">isVisible</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source_list</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_list</span><span class="o">.</span><span class="n">isVisible</span><span class="p">())</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3500</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="src.ui.message_box" class="doc doc-heading">
            <code>message_box</code>


</h3>

    <div class="doc doc-contents ">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h4 id="src.ui.message_box.MessageBox" class="doc doc-heading">
            <code>MessageBox</code>


</h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="PyQt5.QtWidgets.QMessageBox">QMessageBox</span></code></p>








              <details class="quote">
                <summary>Source code in <code>src\ui\message_box.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">MessageBox</span><span class="p">(</span><span class="n">QMessageBox</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">icon</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the custom message box with the specified icon, text, and optional parent widget.</span>

<span class="sd">        Args:</span>
<span class="sd">            icon (QMessageBox.Icon): The icon to display in the message box.</span>
<span class="sd">            text (str): The text message to display in the message box.</span>
<span class="sd">            parent (QWidget, optional): The parent widget of the message box. Defaults to None.</span>

<span class="sd">        Raises:</span>
<span class="sd">            BaseError: If an error occurs during initialization, a BaseError with code 3501 is raised.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">icon</span><span class="p">,</span> <span class="s1">&#39;Programa Reloj de Asistencias&#39;</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>

            <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">find_marker_directory</span><span class="p">(</span><span class="s2">&quot;resources&quot;</span><span class="p">),</span> <span class="s2">&quot;resources&quot;</span><span class="p">,</span> <span class="s2">&quot;fingerprint.ico&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setWindowIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="n">file_path</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3501</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h5 id="src.ui.message_box.MessageBox.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">icon</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Initializes the custom message box with the specified icon, text, and optional parent widget.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>icon</code>
            </td>
            <td>
                  <code><span title="PyQt5.QtWidgets.QMessageBox.Icon">Icon</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The icon to display in the message box.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>text</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The text message to display in the message box.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>parent</code>
            </td>
            <td>
                  <code><span title="QWidget">QWidget</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The parent widget of the message box. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseError">BaseError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an error occurs during initialization, a BaseError with code 3501 is raised.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\message_box.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">icon</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the custom message box with the specified icon, text, and optional parent widget.</span>

<span class="sd">    Args:</span>
<span class="sd">        icon (QMessageBox.Icon): The icon to display in the message box.</span>
<span class="sd">        text (str): The text message to display in the message box.</span>
<span class="sd">        parent (QWidget, optional): The parent widget of the message box. Defaults to None.</span>

<span class="sd">    Raises:</span>
<span class="sd">        BaseError: If an error occurs during initialization, a BaseError with code 3501 is raised.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">icon</span><span class="p">,</span> <span class="s1">&#39;Programa Reloj de Asistencias&#39;</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>

        <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">find_marker_directory</span><span class="p">(</span><span class="s2">&quot;resources&quot;</span><span class="p">),</span> <span class="s2">&quot;resources&quot;</span><span class="p">,</span> <span class="s2">&quot;fingerprint.ico&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="n">file_path</span><span class="p">))</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3501</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="src.ui.modify_device_dialog" class="doc doc-heading">
            <code>modify_device_dialog</code>


</h3>

    <div class="doc doc-contents ">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h4 id="src.ui.modify_device_dialog.AddDevicesDialog" class="doc doc-heading">
            <code>AddDevicesDialog</code>


</h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="PyQt5.QtWidgets.QDialog">QDialog</span></code></p>








              <details class="quote">
                <summary>Source code in <code>src\ui\modify_device_dialog.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AddDevicesDialog</span><span class="p">(</span><span class="n">QDialog</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the ModifyDeviceDialog class.</span>

<span class="sd">        Args:</span>
<span class="sd">            parent (QWidget, optional): The parent widget for this dialog. Defaults to None.</span>
<span class="sd">            id (int, optional): The identifier for the device. Defaults to 0.</span>

<span class="sd">        Raises:</span>
<span class="sd">            BaseError: Custom error raised with code 3501 if an exception occurs during initialization.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Agregar nuevo dispositivo&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="nb">id</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">init_ui</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3501</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">init_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the user interface for the Modify Device Dialog.</span>
<span class="sd">        This method sets up the layout and widgets for the dialog, including input fields</span>
<span class="sd">        for district, model, point of marking, IP address, and communication type. It also</span>
<span class="sd">        includes a button to confirm the action.</span>

<span class="sd">        Widgets:</span>
<span class="sd">            - QLineEdit for district input.</span>
<span class="sd">            - QLineEdit for model input.</span>
<span class="sd">            - QLineEdit for point of marking input.</span>
<span class="sd">            - QLineEdit for IP address input.</span>
<span class="sd">            - QComboBox for selecting the communication type (TCP/UDP).</span>
<span class="sd">            - QPushButton for confirming the action.</span>

<span class="sd">        Layout:</span>
<span class="sd">            - Uses QVBoxLayout as the main layout.</span>
<span class="sd">            - Uses QFormLayout for organizing input fields and labels.</span>

<span class="sd">        Signals:</span>
<span class="sd">            - Connects the QComboBox `currentIndexChanged` signal to the `on_combobox_changed` slot.</span>

<span class="sd">        Attributes:</span>
<span class="sd">            self.district_edit (QLineEdit): Input field for the district.</span>
<span class="sd">            self.model_edit (QLineEdit): Input field for the model.</span>
<span class="sd">            self.point_edit (QLineEdit): Input field for the point of marking.</span>
<span class="sd">            self.ip_edit (QLineEdit): Input field for the IP address.</span>
<span class="sd">            self.combo_box (QComboBox): Dropdown for selecting the communication type.</span>
<span class="sd">            self.communication (str): Stores the current communication type selected in the combo box.</span>
<span class="sd">            self.active (bool): Indicates if the device is active (default is True).</span>
<span class="sd">            self.battery (bool): Indicates if the device has a battery (default is True).</span>
<span class="sd">            self.btn_add (QPushButton): Button to confirm and accept the dialog.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="n">form_layout</span> <span class="o">=</span> <span class="n">QFormLayout</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">district_edit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model_edit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">point_edit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ip_edit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="c1"># Create a QComboBox</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo_box</span> <span class="o">=</span> <span class="n">QComboBox</span><span class="p">()</span>
        <span class="c1"># Add items to the QComboBox</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo_box</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&quot;TCP&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo_box</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&quot;UDP&quot;</span><span class="p">)</span>
        <span class="c1"># Connect the QComboBox signal to a slot</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo_box</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_combobox_changed</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">communication</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">combo_box</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">battery</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="n">form_layout</span><span class="o">.</span><span class="n">addRow</span><span class="p">(</span><span class="s2">&quot;Distrito:&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">district_edit</span><span class="p">)</span>
        <span class="n">form_layout</span><span class="o">.</span><span class="n">addRow</span><span class="p">(</span><span class="s2">&quot;Modelo:&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_edit</span><span class="p">)</span>
        <span class="n">form_layout</span><span class="o">.</span><span class="n">addRow</span><span class="p">(</span><span class="s2">&quot;Punto de Marcación:&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">point_edit</span><span class="p">)</span>
        <span class="n">form_layout</span><span class="o">.</span><span class="n">addRow</span><span class="p">(</span><span class="s2">&quot;IP:&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ip_edit</span><span class="p">)</span>
        <span class="n">form_layout</span><span class="o">.</span><span class="n">addRow</span><span class="p">(</span><span class="s2">&quot;Comunicación:&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">combo_box</span><span class="p">)</span>

        <span class="n">layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">form_layout</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">btn_add</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Agregar&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_add</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">accept</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">btn_add</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">on_combobox_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles the event triggered when the selected index of the combo box changes.</span>

<span class="sd">        Args:</span>
<span class="sd">            index (int): The index of the newly selected item in the combo box.</span>

<span class="sd">        Side Effects:</span>
<span class="sd">            Updates the `self.communication` attribute with the text of the currently selected option</span>
<span class="sd">            in the combo box.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Get the text of the selected option</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">communication</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">combo_box</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>
        <span class="c1">#logging.debug(self.communication)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieves and returns the data from the dialog fields.</span>

<span class="sd">        Returns:</span>
<span class="sd">            (tuple): A tuple containing the following elements:</span>

<span class="sd">                - str: The district name in uppercase (from `district_edit`).</span>
<span class="sd">                - str: The model name (from `model_edit`).</span>
<span class="sd">                - str: The point name in uppercase (from `point_edit`).</span>
<span class="sd">                - str: The IP address (from `ip_edit`).</span>
<span class="sd">                - Any: The device ID (`self.id`).</span>
<span class="sd">                - Any: The communication type or status (`self.communication`).</span>
<span class="sd">                - Any: The battery status (`self.battery`).</span>
<span class="sd">                - Any: The active status (`self.active`).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">district_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">model_edit</span><span class="o">.</span><span class="n">text</span><span class="p">(),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">point_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ip_edit</span><span class="o">.</span><span class="n">text</span><span class="p">(),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">communication</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">battery</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">active</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h5 id="src.ui.modify_device_dialog.AddDevicesDialog.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Initializes the ModifyDeviceDialog class.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>parent</code>
            </td>
            <td>
                  <code><span title="QWidget">QWidget</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The parent widget for this dialog. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>id</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The identifier for the device. Defaults to 0.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseError">BaseError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Custom error raised with code 3501 if an exception occurs during initialization.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\modify_device_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the ModifyDeviceDialog class.</span>

<span class="sd">    Args:</span>
<span class="sd">        parent (QWidget, optional): The parent widget for this dialog. Defaults to None.</span>
<span class="sd">        id (int, optional): The identifier for the device. Defaults to 0.</span>

<span class="sd">    Raises:</span>
<span class="sd">        BaseError: Custom error raised with code 3501 if an exception occurs during initialization.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Agregar nuevo dispositivo&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="nb">id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_ui</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3501</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.modify_device_dialog.AddDevicesDialog.get_data" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_data</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Retrieves and returns the data from the dialog fields.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tuple">tuple</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A tuple containing the following elements:</p>
<ul>
<li>str: The district name in uppercase (from <code>district_edit</code>).</li>
<li>str: The model name (from <code>model_edit</code>).</li>
<li>str: The point name in uppercase (from <code>point_edit</code>).</li>
<li>str: The IP address (from <code>ip_edit</code>).</li>
<li>Any: The device ID (<code>self.id</code>).</li>
<li>Any: The communication type or status (<code>self.communication</code>).</li>
<li>Any: The battery status (<code>self.battery</code>).</li>
<li>Any: The active status (<code>self.active</code>).</li>
</ul>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\modify_device_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieves and returns the data from the dialog fields.</span>

<span class="sd">    Returns:</span>
<span class="sd">        (tuple): A tuple containing the following elements:</span>

<span class="sd">            - str: The district name in uppercase (from `district_edit`).</span>
<span class="sd">            - str: The model name (from `model_edit`).</span>
<span class="sd">            - str: The point name in uppercase (from `point_edit`).</span>
<span class="sd">            - str: The IP address (from `ip_edit`).</span>
<span class="sd">            - Any: The device ID (`self.id`).</span>
<span class="sd">            - Any: The communication type or status (`self.communication`).</span>
<span class="sd">            - Any: The battery status (`self.battery`).</span>
<span class="sd">            - Any: The active status (`self.active`).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">district_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model_edit</span><span class="o">.</span><span class="n">text</span><span class="p">(),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">point_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ip_edit</span><span class="o">.</span><span class="n">text</span><span class="p">(),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">communication</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">battery</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">active</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.modify_device_dialog.AddDevicesDialog.init_ui" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">init_ui</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Initializes the user interface for the Modify Device Dialog.
This method sets up the layout and widgets for the dialog, including input fields
for district, model, point of marking, IP address, and communication type. It also
includes a button to confirm the action.</p>


<details class="widgets" open>
  <summary>Widgets</summary>
  <ul>
<li>QLineEdit for district input.</li>
<li>QLineEdit for model input.</li>
<li>QLineEdit for point of marking input.</li>
<li>QLineEdit for IP address input.</li>
<li>QComboBox for selecting the communication type (TCP/UDP).</li>
<li>QPushButton for confirming the action.</li>
</ul>
</details>

<details class="layout" open>
  <summary>Layout</summary>
  <ul>
<li>Uses QVBoxLayout as the main layout.</li>
<li>Uses QFormLayout for organizing input fields and labels.</li>
</ul>
</details>

<details class="signals" open>
  <summary>Signals</summary>
  <ul>
<li>Connects the QComboBox <code>currentIndexChanged</code> signal to the <code>on_combobox_changed</code> slot.</li>
</ul>
</details>

<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="src.ui.modify_device_dialog.AddDevicesDialog.init_ui.self.district_edit">self.district_edit</span></code></td>
            <td>
                  <code><span title="PyQt5.QtWidgets.QLineEdit">QLineEdit</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Input field for the district.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="src.ui.modify_device_dialog.AddDevicesDialog.init_ui.self.model_edit">self.model_edit</span></code></td>
            <td>
                  <code><span title="PyQt5.QtWidgets.QLineEdit">QLineEdit</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Input field for the model.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="src.ui.modify_device_dialog.AddDevicesDialog.init_ui.self.point_edit">self.point_edit</span></code></td>
            <td>
                  <code><span title="PyQt5.QtWidgets.QLineEdit">QLineEdit</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Input field for the point of marking.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="src.ui.modify_device_dialog.AddDevicesDialog.init_ui.self.ip_edit">self.ip_edit</span></code></td>
            <td>
                  <code><span title="PyQt5.QtWidgets.QLineEdit">QLineEdit</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Input field for the IP address.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="src.ui.modify_device_dialog.AddDevicesDialog.init_ui.self.combo_box">self.combo_box</span></code></td>
            <td>
                  <code><span title="PyQt5.QtWidgets.QComboBox">QComboBox</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dropdown for selecting the communication type.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="src.ui.modify_device_dialog.AddDevicesDialog.init_ui.self.communication">self.communication</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Stores the current communication type selected in the combo box.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="src.ui.modify_device_dialog.AddDevicesDialog.init_ui.self.active">self.active</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Indicates if the device is active (default is True).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="src.ui.modify_device_dialog.AddDevicesDialog.init_ui.self.battery">self.battery</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Indicates if the device has a battery (default is True).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="src.ui.modify_device_dialog.AddDevicesDialog.init_ui.self.btn_add">self.btn_add</span></code></td>
            <td>
                  <code><span title="PyQt5.QtWidgets.QPushButton">QPushButton</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Button to confirm and accept the dialog.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\modify_device_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">init_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the user interface for the Modify Device Dialog.</span>
<span class="sd">    This method sets up the layout and widgets for the dialog, including input fields</span>
<span class="sd">    for district, model, point of marking, IP address, and communication type. It also</span>
<span class="sd">    includes a button to confirm the action.</span>

<span class="sd">    Widgets:</span>
<span class="sd">        - QLineEdit for district input.</span>
<span class="sd">        - QLineEdit for model input.</span>
<span class="sd">        - QLineEdit for point of marking input.</span>
<span class="sd">        - QLineEdit for IP address input.</span>
<span class="sd">        - QComboBox for selecting the communication type (TCP/UDP).</span>
<span class="sd">        - QPushButton for confirming the action.</span>

<span class="sd">    Layout:</span>
<span class="sd">        - Uses QVBoxLayout as the main layout.</span>
<span class="sd">        - Uses QFormLayout for organizing input fields and labels.</span>

<span class="sd">    Signals:</span>
<span class="sd">        - Connects the QComboBox `currentIndexChanged` signal to the `on_combobox_changed` slot.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        self.district_edit (QLineEdit): Input field for the district.</span>
<span class="sd">        self.model_edit (QLineEdit): Input field for the model.</span>
<span class="sd">        self.point_edit (QLineEdit): Input field for the point of marking.</span>
<span class="sd">        self.ip_edit (QLineEdit): Input field for the IP address.</span>
<span class="sd">        self.combo_box (QComboBox): Dropdown for selecting the communication type.</span>
<span class="sd">        self.communication (str): Stores the current communication type selected in the combo box.</span>
<span class="sd">        self.active (bool): Indicates if the device is active (default is True).</span>
<span class="sd">        self.battery (bool): Indicates if the device has a battery (default is True).</span>
<span class="sd">        self.btn_add (QPushButton): Button to confirm and accept the dialog.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="n">form_layout</span> <span class="o">=</span> <span class="n">QFormLayout</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">district_edit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">model_edit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">point_edit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ip_edit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="c1"># Create a QComboBox</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">combo_box</span> <span class="o">=</span> <span class="n">QComboBox</span><span class="p">()</span>
    <span class="c1"># Add items to the QComboBox</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">combo_box</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&quot;TCP&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">combo_box</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&quot;UDP&quot;</span><span class="p">)</span>
    <span class="c1"># Connect the QComboBox signal to a slot</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">combo_box</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_combobox_changed</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">communication</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">combo_box</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">battery</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">form_layout</span><span class="o">.</span><span class="n">addRow</span><span class="p">(</span><span class="s2">&quot;Distrito:&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">district_edit</span><span class="p">)</span>
    <span class="n">form_layout</span><span class="o">.</span><span class="n">addRow</span><span class="p">(</span><span class="s2">&quot;Modelo:&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_edit</span><span class="p">)</span>
    <span class="n">form_layout</span><span class="o">.</span><span class="n">addRow</span><span class="p">(</span><span class="s2">&quot;Punto de Marcación:&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">point_edit</span><span class="p">)</span>
    <span class="n">form_layout</span><span class="o">.</span><span class="n">addRow</span><span class="p">(</span><span class="s2">&quot;IP:&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ip_edit</span><span class="p">)</span>
    <span class="n">form_layout</span><span class="o">.</span><span class="n">addRow</span><span class="p">(</span><span class="s2">&quot;Comunicación:&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">combo_box</span><span class="p">)</span>

    <span class="n">layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">form_layout</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">btn_add</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Agregar&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">btn_add</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">accept</span><span class="p">)</span>
    <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">btn_add</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.modify_device_dialog.AddDevicesDialog.on_combobox_changed" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">on_combobox_changed</span><span class="p">(</span><span class="n">index</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Handles the event triggered when the selected index of the combo box changes.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>index</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The index of the newly selected item in the combo box.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<details class="side-effects" open>
  <summary>Side Effects</summary>
  <p>Updates the <code>self.communication</code> attribute with the text of the currently selected option
in the combo box.</p>
</details>

            <details class="quote">
              <summary>Source code in <code>src\ui\modify_device_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">on_combobox_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the event triggered when the selected index of the combo box changes.</span>

<span class="sd">    Args:</span>
<span class="sd">        index (int): The index of the newly selected item in the combo box.</span>

<span class="sd">    Side Effects:</span>
<span class="sd">        Updates the `self.communication` attribute with the text of the currently selected option</span>
<span class="sd">        in the combo box.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Get the text of the selected option</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">communication</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">combo_box</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="src.ui.modify_device_dialog.ModifyDevicesDialog" class="doc doc-heading">
            <code>ModifyDevicesDialog</code>


</h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseDialog (src.ui.base_dialog.BaseDialog)" href="#src.ui.base_dialog.BaseDialog">BaseDialog</a></code></p>








              <details class="quote">
                <summary>Source code in <code>src\ui\modify_device_dialog.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ModifyDevicesDialog</span><span class="p">(</span><span class="n">BaseDialog</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the ModifyDeviceDialog class.</span>

<span class="sd">        Args:</span>
<span class="sd">            parent (QWidget, optional): The parent widget for this dialog. Defaults to None.</span>

<span class="sd">        Attributes:</span>
<span class="sd">            file_path (str): The path to the &quot;info_devices.txt&quot; file, determined dynamically.</span>
<span class="sd">            data (list): A list to store device data.</span>
<span class="sd">            max_id (int): The maximum ID value among the devices.</span>

<span class="sd">        Raises:</span>
<span class="sd">            BaseError: If an exception occurs during initialization, it raises a BaseError with code 3501.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">window_title</span><span class="o">=</span><span class="s2">&quot;MODIFICAR DISPOSITIVOS&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">find_root_directory</span><span class="p">(),</span> <span class="s2">&quot;info_devices.txt&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">max_id</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">init_ui</span><span class="p">()</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">init_ui</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3501</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">init_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the user interface for the Modify Device Dialog.</span>
<span class="sd">        This method sets up the layout and widgets for the dialog, including a table</span>
<span class="sd">        for displaying device information and buttons for performing various actions</span>
<span class="sd">        such as loading, modifying, adding, activating, and deactivating devices.</span>

<span class="sd">        Widgets:</span>
<span class="sd">            - QTableWidget: Displays device information with 8 columns:</span>
<span class="sd">                [&quot;Distrito&quot;, &quot;Modelo&quot;, &quot;Punto de Marcación&quot;, &quot;IP&quot;, &quot;ID&quot;, &quot;Comunicación&quot;, </span>
<span class="sd">                &quot;Pila funcionando&quot;, &quot;Activado&quot;]. Columns are resizable, sortable, and editable on double-click.</span>
<span class="sd">            - QPushButton: Buttons for the following actions:</span>
<span class="sd">                - &quot;Cargar&quot;: Loads and displays data in the table.</span>
<span class="sd">                - &quot;Modificar&quot;: Saves modifications made to the data.</span>
<span class="sd">                - &quot;Agregar&quot;: Adds a new device entry.</span>
<span class="sd">                - &quot;Activar todo&quot;: Activates all devices.</span>
<span class="sd">                - &quot;Desactivar todo&quot;: Deactivates all devices.</span>

<span class="sd">        Layout:</span>
<span class="sd">            - QVBoxLayout: Main layout containing the table widget and button layout.</span>
<span class="sd">            - QHBoxLayout: Layout for arranging the action buttons horizontally.</span>

<span class="sd">        Notes:</span>
<span class="sd">            - Buttons are configured to not retain focus after being clicked.</span>
<span class="sd">            - The `load_data_and_show` method is called at the end to populate the table with initial data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span> <span class="o">=</span> <span class="n">QTableWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setColumnCount</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setHorizontalHeaderLabels</span><span class="p">([</span><span class="s2">&quot;Distrito&quot;</span><span class="p">,</span> <span class="s2">&quot;Modelo&quot;</span><span class="p">,</span> <span class="s2">&quot;Punto de Marcación&quot;</span><span class="p">,</span> <span class="s2">&quot;IP&quot;</span><span class="p">,</span> <span class="s2">&quot;ID&quot;</span><span class="p">,</span> <span class="s2">&quot;Comunicación&quot;</span><span class="p">,</span> <span class="s2">&quot;Pila funcionando&quot;</span><span class="p">,</span> <span class="s2">&quot;Activado&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">horizontalHeader</span><span class="p">()</span><span class="o">.</span><span class="n">setSectionResizeMode</span><span class="p">(</span><span class="n">QHeaderView</span><span class="o">.</span><span class="n">ResizeToContents</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">horizontalHeader</span><span class="p">()</span><span class="o">.</span><span class="n">setStretchLastSection</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setEditTriggers</span><span class="p">(</span><span class="n">QTableWidget</span><span class="o">.</span><span class="n">DoubleClicked</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setSortingEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="p">)</span>

        <span class="n">button_layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">btn_load_data</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Cargar&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_load_data</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">load_data_and_show</span><span class="p">)</span>
        <span class="n">button_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">btn_load_data</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">btn_save_data</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Modificar&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_save_data</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_data</span><span class="p">)</span>
        <span class="n">button_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">btn_save_data</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">btn_add_data</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Agregar&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_add_data</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">add_device</span><span class="p">)</span>
        <span class="n">button_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">btn_add_data</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">btn_activate_all</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Activar todo&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_activate_all</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">activate_all</span><span class="p">)</span>
        <span class="n">button_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">btn_activate_all</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">btn_deactivate_all</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Desactivar todo&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_deactivate_all</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deactivate_all</span><span class="p">)</span>
        <span class="n">button_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">btn_deactivate_all</span><span class="p">)</span>

        <span class="n">layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">button_layout</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

        <span class="c1"># Clear focus from buttons</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_load_data</span><span class="o">.</span><span class="n">setAutoDefault</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_load_data</span><span class="o">.</span><span class="n">setDefault</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_save_data</span><span class="o">.</span><span class="n">setAutoDefault</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_save_data</span><span class="o">.</span><span class="n">setDefault</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_add_data</span><span class="o">.</span><span class="n">setAutoDefault</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_add_data</span><span class="o">.</span><span class="n">setDefault</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_activate_all</span><span class="o">.</span><span class="n">setAutoDefault</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_activate_all</span><span class="o">.</span><span class="n">setDefault</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_deactivate_all</span><span class="o">.</span><span class="n">setAutoDefault</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_deactivate_all</span><span class="o">.</span><span class="n">setDefault</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">load_data_and_show</span><span class="p">()</span>

    <span class="c1"># Methods for selecting and deselecting &quot;Active&quot; checkboxes</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">activate_all</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Activates all checkboxes in the specified column of the table widget.</span>

<span class="sd">        This method iterates through all rows of the table widget and sets the </span>
<span class="sd">        checkbox in the 7th column (index 7) to a checked state.</span>

<span class="sd">        Note:</span>
<span class="sd">            - Assumes that the 7th column of the table widget contains checkboxes </span>
<span class="sd">              as cell widgets.</span>
<span class="sd">            - The table widget must be properly initialized and populated before </span>
<span class="sd">              calling this method.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()):</span>
            <span class="n">checkbox_delegate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">cellWidget</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
            <span class="n">checkbox_delegate</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">deactivate_all</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deactivates all checkboxes in the specified column of the table widget.</span>

<span class="sd">        This method iterates through all rows of the table widget and sets the </span>
<span class="sd">        checkbox in the specified column (column index 7) to an unchecked state.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()):</span>
            <span class="n">checkbox_delegate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">cellWidget</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
            <span class="n">checkbox_delegate</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_device</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a new device to the list of devices.</span>

<span class="sd">        This method calculates a new unique ID for the device, opens a dialog</span>
<span class="sd">        to collect the device&#39;s details, and appends the new device data to</span>
<span class="sd">        the internal data list if the dialog is accepted. It also updates the</span>
<span class="sd">        maximum ID and refreshes the data displayed in the table.</span>

<span class="sd">        Steps:</span>

<span class="sd">        1. Calculate a new unique ID for the device.</span>
<span class="sd">        2. Open the AddDevicesDialog to collect device details.</span>
<span class="sd">        3. If the dialog is accepted:</span>
<span class="sd">            - Retrieve the new device data from the dialog.</span>
<span class="sd">            - Append the new device data to the internal list.</span>
<span class="sd">            - Update the maximum ID.</span>
<span class="sd">            - Reload the data into the table.</span>

<span class="sd">        Note:</span>
<span class="sd">        - The dialog must return QDialog.Accepted for the new device data to be added.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_id</span> <span class="o">+</span> <span class="mi">1</span>  <span class="c1"># Calculate new ID</span>
        <span class="n">dialog</span> <span class="o">=</span> <span class="n">AddDevicesDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dialog</span><span class="o">.</span><span class="n">exec</span><span class="p">()</span> <span class="o">==</span> <span class="n">QDialog</span><span class="o">.</span><span class="n">Accepted</span><span class="p">:</span>
            <span class="n">new_device_data</span> <span class="o">=</span> <span class="n">dialog</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span>
            <span class="c1">#logging.debug(new_device_data)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_device_data</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">max_id</span> <span class="o">=</span> <span class="n">new_id</span>  <span class="c1"># Update max_id</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">load_data_into_table</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">load_data_and_show</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Loads data, processes it, and displays it in the UI.</span>

<span class="sd">        This method performs the following steps:</span>
<span class="sd">        1. Loads data by calling the `load_data` method.</span>
<span class="sd">        2. Populates the UI table with the loaded data by calling the `load_data_into_table` method.</span>

<span class="sd">        Ensure that the `load_data` and `load_data_into_table` methods are properly implemented</span>
<span class="sd">        for this method to function as expected.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_data</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_data_into_table</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">load_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Loads data from a file specified by `self.file_path`.</span>

<span class="sd">        The method reads each line of the file, splits it into parts, and processes</span>
<span class="sd">        the data if it matches the expected format. Each line is expected to have</span>
<span class="sd">        8 components separated by &#39; - &#39;. The components are:</span>
<span class="sd">        district, model, point, ip, id, communication, battery, and active.</span>

<span class="sd">        The method updates `self.max_id` with the maximum value of the `id` field</span>
<span class="sd">        encountered in the file. The `battery` and `active` fields are evaluated</span>
<span class="sd">        as Python literals using `literal_eval`.</span>

<span class="sd">        Returns:</span>
<span class="sd">            (list): A list of tuples containing the processed data. Each tuple has</span>
<span class="sd">                  the following structure:</span>
<span class="sd">                  (district, model, point, ip, id, communication, battery, active)</span>

<span class="sd">        Raises:</span>
<span class="sd">            BaseErrorWithMessageBox: If an exception occurs during file reading or</span>
<span class="sd">                                     processing, it raises this custom error with</span>
<span class="sd">                                     an error code (3001) and the exception message.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">file</span><span class="p">:</span>
                    <span class="n">parts</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; - &#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>
                        <span class="n">district</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">point</span><span class="p">,</span> <span class="n">ip</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">communication</span><span class="p">,</span> <span class="n">battery</span><span class="p">,</span> <span class="n">active</span> <span class="o">=</span> <span class="n">parts</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">max_id</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max_id</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="nb">id</span><span class="p">))</span>  <span class="c1"># Update max_id</span>
                        <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">district</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">point</span><span class="p">,</span> <span class="n">ip</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">communication</span><span class="p">,</span> <span class="n">literal_eval</span><span class="p">(</span><span class="n">battery</span><span class="p">),</span> <span class="n">literal_eval</span><span class="p">(</span><span class="n">active</span><span class="p">)))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BaseErrorWithMessageBox</span><span class="p">(</span><span class="mi">3001</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">data</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">load_data_into_table</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Populates the table widget with data from the `self.data` attribute.</span>
<span class="sd">        This method iterates over the rows of data and populates each row in the table widget.</span>

<span class="sd">        It sets up the following columns:</span>

<span class="sd">        - Column 0: District (string)</span>
<span class="sd">        - Column 1: Model (string)</span>
<span class="sd">        - Column 2: Point (string)</span>
<span class="sd">        - Column 3: IP Address (string)</span>
<span class="sd">        - Column 4: ID (integer, converted to string)</span>
<span class="sd">        - Column 5: Communication (string, with a ComboBoxDelegate)</span>
<span class="sd">        - Column 6: Battery (boolean, with a CheckBoxDelegate)</span>
<span class="sd">        - Column 7: Active (boolean, with a CheckBoxDelegate)</span>

<span class="sd">        Delegates are used for specific columns:</span>

<span class="sd">        - A ComboBoxDelegate is set for column 5 to allow selection of communication options.</span>
<span class="sd">        - CheckBoxDelegates are used for columns 6 and 7 to represent boolean values.</span>

<span class="sd">        After populating the table, the method adjusts the table size to fit the content.</span>

<span class="sd">        Raises:</span>
<span class="sd">            BaseErrorWithMessageBox: If an exception occurs during the execution, it raises</span>
<span class="sd">            a custom error with a message box displaying the error details.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setRowCount</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">row</span><span class="p">,</span> <span class="p">(</span><span class="n">district</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">point</span><span class="p">,</span> <span class="n">ip</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">communication</span><span class="p">,</span> <span class="n">battery</span><span class="p">,</span> <span class="n">active</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">insertRow</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">district</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">model</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">point</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">ip</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">id</span><span class="p">)))</span>
                <span class="c1"># Set ComboBoxDelegate for column 5</span>
                <span class="n">combo_box_delegate</span> <span class="o">=</span> <span class="n">ComboBoxDelegate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItemDelegateForColumn</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">combo_box_delegate</span><span class="p">)</span>
                <span class="c1"># Set the value in the model for column 5</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">communication</span><span class="p">))</span>
                <span class="c1"># Set CheckBoxDelegate for column 6</span>
                <span class="n">checkbox_battery</span> <span class="o">=</span> <span class="n">CheckBoxDelegate</span><span class="p">()</span>
                <span class="n">checkbox_battery</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">battery</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setCellWidget</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="n">checkbox_battery</span><span class="p">)</span>
                <span class="c1"># Set CheckBoxDelegate for column 7</span>
                <span class="n">checkbox_active</span> <span class="o">=</span> <span class="n">CheckBoxDelegate</span><span class="p">()</span>
                <span class="n">checkbox_active</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">active</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setCellWidget</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="n">checkbox_active</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">adjust_size_to_table</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BaseErrorWithMessageBox</span><span class="p">(</span><span class="mi">3500</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">save_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves the data from the table widget to a file.</span>

<span class="sd">        This method iterates through all rows of the table widget, retrieves the data</span>
<span class="sd">        from each cell, and writes it to a file specified by `self.file_path`. The data</span>
<span class="sd">        is saved in a formatted string with each row&#39;s values separated by &quot; - &quot;.</span>
<span class="sd">        Boolean values from checkboxes in the table are also included.</span>

<span class="sd">        Raises:</span>
<span class="sd">            BaseErrorWithMessageBox: If an exception occurs during the file writing process,</span>
<span class="sd">            it raises a custom error with a message box displaying the error details.</span>

<span class="sd">        Side Effects:</span>
<span class="sd">            - Writes data to the file specified by `self.file_path`.</span>
<span class="sd">            - Displays a success message box upon successful save.</span>
<span class="sd">            - Displays an error message box if an exception occurs.</span>

<span class="sd">        Notes:</span>
<span class="sd">            - The `district` and `point` values are converted to uppercase before saving.</span>
<span class="sd">            - The `battery` and `active` values are retrieved from checkbox widgets in the table.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_path</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()):</span>
                    <span class="n">district</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
                    <span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
                    <span class="n">point</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
                    <span class="n">ip</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
                    <span class="nb">id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
                    <span class="n">communication</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
                    <span class="n">battery</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">cellWidget</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span>
                    <span class="n">active</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">cellWidget</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span>
                    <span class="c1">#logging.debug(f&quot;{district} - {model} - {point} - {ip} - {id} - {communication} - {battery} - {active}&quot;)</span>
                    <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">district</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">point</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">ip</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">communication</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">battery</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">active</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Éxito&quot;</span><span class="p">,</span> <span class="s2">&quot;Datos guardados correctamente.&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BaseErrorWithMessageBox</span><span class="p">(</span><span class="mi">3001</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h5 id="src.ui.modify_device_dialog.ModifyDevicesDialog.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Initializes the ModifyDeviceDialog class.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>parent</code>
            </td>
            <td>
                  <code><span title="QWidget">QWidget</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The parent widget for this dialog. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="src.ui.modify_device_dialog.ModifyDevicesDialog.__init__.file_path">file_path</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The path to the "info_devices.txt" file, determined dynamically.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="src.ui.modify_device_dialog.ModifyDevicesDialog.__init__.data">data</span></code></td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list to store device data.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="src.ui.modify_device_dialog.ModifyDevicesDialog.__init__.max_id">max_id</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The maximum ID value among the devices.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseError">BaseError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an exception occurs during initialization, it raises a BaseError with code 3501.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\modify_device_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the ModifyDeviceDialog class.</span>

<span class="sd">    Args:</span>
<span class="sd">        parent (QWidget, optional): The parent widget for this dialog. Defaults to None.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        file_path (str): The path to the &quot;info_devices.txt&quot; file, determined dynamically.</span>
<span class="sd">        data (list): A list to store device data.</span>
<span class="sd">        max_id (int): The maximum ID value among the devices.</span>

<span class="sd">    Raises:</span>
<span class="sd">        BaseError: If an exception occurs during initialization, it raises a BaseError with code 3501.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">window_title</span><span class="o">=</span><span class="s2">&quot;MODIFICAR DISPOSITIVOS&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">find_root_directory</span><span class="p">(),</span> <span class="s2">&quot;info_devices.txt&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_id</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_ui</span><span class="p">()</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">init_ui</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3501</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.modify_device_dialog.ModifyDevicesDialog.activate_all" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">activate_all</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Activates all checkboxes in the specified column of the table widget.</p>
<p>This method iterates through all rows of the table widget and sets the 
checkbox in the 7th column (index 7) to a checked state.</p>


<details class="note" open>
  <summary>Note</summary>
  <ul>
<li>Assumes that the 7th column of the table widget contains checkboxes 
  as cell widgets.</li>
<li>The table widget must be properly initialized and populated before 
  calling this method.</li>
</ul>
</details>

            <details class="quote">
              <summary>Source code in <code>src\ui\modify_device_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">activate_all</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Activates all checkboxes in the specified column of the table widget.</span>

<span class="sd">    This method iterates through all rows of the table widget and sets the </span>
<span class="sd">    checkbox in the 7th column (index 7) to a checked state.</span>

<span class="sd">    Note:</span>
<span class="sd">        - Assumes that the 7th column of the table widget contains checkboxes </span>
<span class="sd">          as cell widgets.</span>
<span class="sd">        - The table widget must be properly initialized and populated before </span>
<span class="sd">          calling this method.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()):</span>
        <span class="n">checkbox_delegate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">cellWidget</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
        <span class="n">checkbox_delegate</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.modify_device_dialog.ModifyDevicesDialog.add_device" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_device</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Adds a new device to the list of devices.</p>
<p>This method calculates a new unique ID for the device, opens a dialog
to collect the device's details, and appends the new device data to
the internal data list if the dialog is accepted. It also updates the
maximum ID and refreshes the data displayed in the table.</p>
<p>Steps:</p>
<ol>
<li>Calculate a new unique ID for the device.</li>
<li>Open the AddDevicesDialog to collect device details.</li>
<li>If the dialog is accepted:<ul>
<li>Retrieve the new device data from the dialog.</li>
<li>Append the new device data to the internal list.</li>
<li>Update the maximum ID.</li>
<li>Reload the data into the table.</li>
</ul>
</li>
</ol>
<p>Note:
- The dialog must return QDialog.Accepted for the new device data to be added.</p>


            <details class="quote">
              <summary>Source code in <code>src\ui\modify_device_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_device</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a new device to the list of devices.</span>

<span class="sd">    This method calculates a new unique ID for the device, opens a dialog</span>
<span class="sd">    to collect the device&#39;s details, and appends the new device data to</span>
<span class="sd">    the internal data list if the dialog is accepted. It also updates the</span>
<span class="sd">    maximum ID and refreshes the data displayed in the table.</span>

<span class="sd">    Steps:</span>

<span class="sd">    1. Calculate a new unique ID for the device.</span>
<span class="sd">    2. Open the AddDevicesDialog to collect device details.</span>
<span class="sd">    3. If the dialog is accepted:</span>
<span class="sd">        - Retrieve the new device data from the dialog.</span>
<span class="sd">        - Append the new device data to the internal list.</span>
<span class="sd">        - Update the maximum ID.</span>
<span class="sd">        - Reload the data into the table.</span>

<span class="sd">    Note:</span>
<span class="sd">    - The dialog must return QDialog.Accepted for the new device data to be added.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">new_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_id</span> <span class="o">+</span> <span class="mi">1</span>  <span class="c1"># Calculate new ID</span>
    <span class="n">dialog</span> <span class="o">=</span> <span class="n">AddDevicesDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_id</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">dialog</span><span class="o">.</span><span class="n">exec</span><span class="p">()</span> <span class="o">==</span> <span class="n">QDialog</span><span class="o">.</span><span class="n">Accepted</span><span class="p">:</span>
        <span class="n">new_device_data</span> <span class="o">=</span> <span class="n">dialog</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span>
        <span class="c1">#logging.debug(new_device_data)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_device_data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_id</span> <span class="o">=</span> <span class="n">new_id</span>  <span class="c1"># Update max_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_data_into_table</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.modify_device_dialog.ModifyDevicesDialog.deactivate_all" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">deactivate_all</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Deactivates all checkboxes in the specified column of the table widget.</p>
<p>This method iterates through all rows of the table widget and sets the 
checkbox in the specified column (column index 7) to an unchecked state.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\modify_device_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">deactivate_all</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deactivates all checkboxes in the specified column of the table widget.</span>

<span class="sd">    This method iterates through all rows of the table widget and sets the </span>
<span class="sd">    checkbox in the specified column (column index 7) to an unchecked state.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()):</span>
        <span class="n">checkbox_delegate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">cellWidget</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
        <span class="n">checkbox_delegate</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.modify_device_dialog.ModifyDevicesDialog.init_ui" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">init_ui</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Initializes the user interface for the Modify Device Dialog.
This method sets up the layout and widgets for the dialog, including a table
for displaying device information and buttons for performing various actions
such as loading, modifying, adding, activating, and deactivating devices.</p>


<details class="widgets" open>
  <summary>Widgets</summary>
  <ul>
<li>QTableWidget: Displays device information with 8 columns:
    ["Distrito", "Modelo", "Punto de Marcación", "IP", "ID", "Comunicación", 
    "Pila funcionando", "Activado"]. Columns are resizable, sortable, and editable on double-click.</li>
<li>QPushButton: Buttons for the following actions:<ul>
<li>"Cargar": Loads and displays data in the table.</li>
<li>"Modificar": Saves modifications made to the data.</li>
<li>"Agregar": Adds a new device entry.</li>
<li>"Activar todo": Activates all devices.</li>
<li>"Desactivar todo": Deactivates all devices.</li>
</ul>
</li>
</ul>
</details>

<details class="layout" open>
  <summary>Layout</summary>
  <ul>
<li>QVBoxLayout: Main layout containing the table widget and button layout.</li>
<li>QHBoxLayout: Layout for arranging the action buttons horizontally.</li>
</ul>
</details>

<details class="notes" open>
  <summary>Notes</summary>
  <ul>
<li>Buttons are configured to not retain focus after being clicked.</li>
<li>The <code>load_data_and_show</code> method is called at the end to populate the table with initial data.</li>
</ul>
</details>

            <details class="quote">
              <summary>Source code in <code>src\ui\modify_device_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">init_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the user interface for the Modify Device Dialog.</span>
<span class="sd">    This method sets up the layout and widgets for the dialog, including a table</span>
<span class="sd">    for displaying device information and buttons for performing various actions</span>
<span class="sd">    such as loading, modifying, adding, activating, and deactivating devices.</span>

<span class="sd">    Widgets:</span>
<span class="sd">        - QTableWidget: Displays device information with 8 columns:</span>
<span class="sd">            [&quot;Distrito&quot;, &quot;Modelo&quot;, &quot;Punto de Marcación&quot;, &quot;IP&quot;, &quot;ID&quot;, &quot;Comunicación&quot;, </span>
<span class="sd">            &quot;Pila funcionando&quot;, &quot;Activado&quot;]. Columns are resizable, sortable, and editable on double-click.</span>
<span class="sd">        - QPushButton: Buttons for the following actions:</span>
<span class="sd">            - &quot;Cargar&quot;: Loads and displays data in the table.</span>
<span class="sd">            - &quot;Modificar&quot;: Saves modifications made to the data.</span>
<span class="sd">            - &quot;Agregar&quot;: Adds a new device entry.</span>
<span class="sd">            - &quot;Activar todo&quot;: Activates all devices.</span>
<span class="sd">            - &quot;Desactivar todo&quot;: Deactivates all devices.</span>

<span class="sd">    Layout:</span>
<span class="sd">        - QVBoxLayout: Main layout containing the table widget and button layout.</span>
<span class="sd">        - QHBoxLayout: Layout for arranging the action buttons horizontally.</span>

<span class="sd">    Notes:</span>
<span class="sd">        - Buttons are configured to not retain focus after being clicked.</span>
<span class="sd">        - The `load_data_and_show` method is called at the end to populate the table with initial data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span> <span class="o">=</span> <span class="n">QTableWidget</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setColumnCount</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setHorizontalHeaderLabels</span><span class="p">([</span><span class="s2">&quot;Distrito&quot;</span><span class="p">,</span> <span class="s2">&quot;Modelo&quot;</span><span class="p">,</span> <span class="s2">&quot;Punto de Marcación&quot;</span><span class="p">,</span> <span class="s2">&quot;IP&quot;</span><span class="p">,</span> <span class="s2">&quot;ID&quot;</span><span class="p">,</span> <span class="s2">&quot;Comunicación&quot;</span><span class="p">,</span> <span class="s2">&quot;Pila funcionando&quot;</span><span class="p">,</span> <span class="s2">&quot;Activado&quot;</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">horizontalHeader</span><span class="p">()</span><span class="o">.</span><span class="n">setSectionResizeMode</span><span class="p">(</span><span class="n">QHeaderView</span><span class="o">.</span><span class="n">ResizeToContents</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">horizontalHeader</span><span class="p">()</span><span class="o">.</span><span class="n">setStretchLastSection</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setEditTriggers</span><span class="p">(</span><span class="n">QTableWidget</span><span class="o">.</span><span class="n">DoubleClicked</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setSortingEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="p">)</span>

    <span class="n">button_layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">btn_load_data</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Cargar&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">btn_load_data</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">load_data_and_show</span><span class="p">)</span>
    <span class="n">button_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">btn_load_data</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">btn_save_data</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Modificar&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">btn_save_data</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_data</span><span class="p">)</span>
    <span class="n">button_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">btn_save_data</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">btn_add_data</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Agregar&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">btn_add_data</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">add_device</span><span class="p">)</span>
    <span class="n">button_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">btn_add_data</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">btn_activate_all</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Activar todo&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">btn_activate_all</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">activate_all</span><span class="p">)</span>
    <span class="n">button_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">btn_activate_all</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">btn_deactivate_all</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Desactivar todo&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">btn_deactivate_all</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deactivate_all</span><span class="p">)</span>
    <span class="n">button_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">btn_deactivate_all</span><span class="p">)</span>

    <span class="n">layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">button_layout</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

    <span class="c1"># Clear focus from buttons</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">btn_load_data</span><span class="o">.</span><span class="n">setAutoDefault</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">btn_load_data</span><span class="o">.</span><span class="n">setDefault</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">btn_save_data</span><span class="o">.</span><span class="n">setAutoDefault</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">btn_save_data</span><span class="o">.</span><span class="n">setDefault</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">btn_add_data</span><span class="o">.</span><span class="n">setAutoDefault</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">btn_add_data</span><span class="o">.</span><span class="n">setDefault</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">btn_activate_all</span><span class="o">.</span><span class="n">setAutoDefault</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">btn_activate_all</span><span class="o">.</span><span class="n">setDefault</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">btn_deactivate_all</span><span class="o">.</span><span class="n">setAutoDefault</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">btn_deactivate_all</span><span class="o">.</span><span class="n">setDefault</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">load_data_and_show</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.modify_device_dialog.ModifyDevicesDialog.load_data" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_data</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Loads data from a file specified by <code>self.file_path</code>.</p>
<p>The method reads each line of the file, splits it into parts, and processes
the data if it matches the expected format. Each line is expected to have
8 components separated by ' - '. The components are:
district, model, point, ip, id, communication, battery, and active.</p>
<p>The method updates <code>self.max_id</code> with the maximum value of the <code>id</code> field
encountered in the file. The <code>battery</code> and <code>active</code> fields are evaluated
as Python literals using <code>literal_eval</code>.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of tuples containing the processed data. Each tuple has
  the following structure:
  (district, model, point, ip, id, communication, battery, active)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseErrorWithMessageBox">BaseErrorWithMessageBox</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an exception occurs during file reading or
                     processing, it raises this custom error with
                     an error code (3001) and the exception message.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\modify_device_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Loads data from a file specified by `self.file_path`.</span>

<span class="sd">    The method reads each line of the file, splits it into parts, and processes</span>
<span class="sd">    the data if it matches the expected format. Each line is expected to have</span>
<span class="sd">    8 components separated by &#39; - &#39;. The components are:</span>
<span class="sd">    district, model, point, ip, id, communication, battery, and active.</span>

<span class="sd">    The method updates `self.max_id` with the maximum value of the `id` field</span>
<span class="sd">    encountered in the file. The `battery` and `active` fields are evaluated</span>
<span class="sd">    as Python literals using `literal_eval`.</span>

<span class="sd">    Returns:</span>
<span class="sd">        (list): A list of tuples containing the processed data. Each tuple has</span>
<span class="sd">              the following structure:</span>
<span class="sd">              (district, model, point, ip, id, communication, battery, active)</span>

<span class="sd">    Raises:</span>
<span class="sd">        BaseErrorWithMessageBox: If an exception occurs during file reading or</span>
<span class="sd">                                 processing, it raises this custom error with</span>
<span class="sd">                                 an error code (3001) and the exception message.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">file</span><span class="p">:</span>
                <span class="n">parts</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; - &#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>
                    <span class="n">district</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">point</span><span class="p">,</span> <span class="n">ip</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">communication</span><span class="p">,</span> <span class="n">battery</span><span class="p">,</span> <span class="n">active</span> <span class="o">=</span> <span class="n">parts</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">max_id</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max_id</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="nb">id</span><span class="p">))</span>  <span class="c1"># Update max_id</span>
                    <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">district</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">point</span><span class="p">,</span> <span class="n">ip</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">communication</span><span class="p">,</span> <span class="n">literal_eval</span><span class="p">(</span><span class="n">battery</span><span class="p">),</span> <span class="n">literal_eval</span><span class="p">(</span><span class="n">active</span><span class="p">)))</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BaseErrorWithMessageBox</span><span class="p">(</span><span class="mi">3001</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.modify_device_dialog.ModifyDevicesDialog.load_data_and_show" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_data_and_show</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Loads data, processes it, and displays it in the UI.</p>
<p>This method performs the following steps:
1. Loads data by calling the <code>load_data</code> method.
2. Populates the UI table with the loaded data by calling the <code>load_data_into_table</code> method.</p>
<p>Ensure that the <code>load_data</code> and <code>load_data_into_table</code> methods are properly implemented
for this method to function as expected.</p>


            <details class="quote">
              <summary>Source code in <code>src\ui\modify_device_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_data_and_show</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Loads data, processes it, and displays it in the UI.</span>

<span class="sd">    This method performs the following steps:</span>
<span class="sd">    1. Loads data by calling the `load_data` method.</span>
<span class="sd">    2. Populates the UI table with the loaded data by calling the `load_data_into_table` method.</span>

<span class="sd">    Ensure that the `load_data` and `load_data_into_table` methods are properly implemented</span>
<span class="sd">    for this method to function as expected.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_data</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">load_data_into_table</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.modify_device_dialog.ModifyDevicesDialog.load_data_into_table" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_data_into_table</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Populates the table widget with data from the <code>self.data</code> attribute.
This method iterates over the rows of data and populates each row in the table widget.</p>
<p>It sets up the following columns:</p>
<ul>
<li>Column 0: District (string)</li>
<li>Column 1: Model (string)</li>
<li>Column 2: Point (string)</li>
<li>Column 3: IP Address (string)</li>
<li>Column 4: ID (integer, converted to string)</li>
<li>Column 5: Communication (string, with a ComboBoxDelegate)</li>
<li>Column 6: Battery (boolean, with a CheckBoxDelegate)</li>
<li>Column 7: Active (boolean, with a CheckBoxDelegate)</li>
</ul>
<p>Delegates are used for specific columns:</p>
<ul>
<li>A ComboBoxDelegate is set for column 5 to allow selection of communication options.</li>
<li>CheckBoxDelegates are used for columns 6 and 7 to represent boolean values.</li>
</ul>
<p>After populating the table, the method adjusts the table size to fit the content.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseErrorWithMessageBox">BaseErrorWithMessageBox</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an exception occurs during the execution, it raises</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\modify_device_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_data_into_table</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Populates the table widget with data from the `self.data` attribute.</span>
<span class="sd">    This method iterates over the rows of data and populates each row in the table widget.</span>

<span class="sd">    It sets up the following columns:</span>

<span class="sd">    - Column 0: District (string)</span>
<span class="sd">    - Column 1: Model (string)</span>
<span class="sd">    - Column 2: Point (string)</span>
<span class="sd">    - Column 3: IP Address (string)</span>
<span class="sd">    - Column 4: ID (integer, converted to string)</span>
<span class="sd">    - Column 5: Communication (string, with a ComboBoxDelegate)</span>
<span class="sd">    - Column 6: Battery (boolean, with a CheckBoxDelegate)</span>
<span class="sd">    - Column 7: Active (boolean, with a CheckBoxDelegate)</span>

<span class="sd">    Delegates are used for specific columns:</span>

<span class="sd">    - A ComboBoxDelegate is set for column 5 to allow selection of communication options.</span>
<span class="sd">    - CheckBoxDelegates are used for columns 6 and 7 to represent boolean values.</span>

<span class="sd">    After populating the table, the method adjusts the table size to fit the content.</span>

<span class="sd">    Raises:</span>
<span class="sd">        BaseErrorWithMessageBox: If an exception occurs during the execution, it raises</span>
<span class="sd">        a custom error with a message box displaying the error details.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setRowCount</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">row</span><span class="p">,</span> <span class="p">(</span><span class="n">district</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">point</span><span class="p">,</span> <span class="n">ip</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">communication</span><span class="p">,</span> <span class="n">battery</span><span class="p">,</span> <span class="n">active</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">insertRow</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">district</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">model</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">point</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">ip</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">id</span><span class="p">)))</span>
            <span class="c1"># Set ComboBoxDelegate for column 5</span>
            <span class="n">combo_box_delegate</span> <span class="o">=</span> <span class="n">ComboBoxDelegate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItemDelegateForColumn</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">combo_box_delegate</span><span class="p">)</span>
            <span class="c1"># Set the value in the model for column 5</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">communication</span><span class="p">))</span>
            <span class="c1"># Set CheckBoxDelegate for column 6</span>
            <span class="n">checkbox_battery</span> <span class="o">=</span> <span class="n">CheckBoxDelegate</span><span class="p">()</span>
            <span class="n">checkbox_battery</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">battery</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setCellWidget</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="n">checkbox_battery</span><span class="p">)</span>
            <span class="c1"># Set CheckBoxDelegate for column 7</span>
            <span class="n">checkbox_active</span> <span class="o">=</span> <span class="n">CheckBoxDelegate</span><span class="p">()</span>
            <span class="n">checkbox_active</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">active</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setCellWidget</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="n">checkbox_active</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">adjust_size_to_table</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BaseErrorWithMessageBox</span><span class="p">(</span><span class="mi">3500</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.modify_device_dialog.ModifyDevicesDialog.save_data" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">save_data</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Saves the data from the table widget to a file.</p>
<p>This method iterates through all rows of the table widget, retrieves the data
from each cell, and writes it to a file specified by <code>self.file_path</code>. The data
is saved in a formatted string with each row's values separated by " - ".
Boolean values from checkboxes in the table are also included.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseErrorWithMessageBox">BaseErrorWithMessageBox</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an exception occurs during the file writing process,</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="side-effects" open>
  <summary>Side Effects</summary>
  <ul>
<li>Writes data to the file specified by <code>self.file_path</code>.</li>
<li>Displays a success message box upon successful save.</li>
<li>Displays an error message box if an exception occurs.</li>
</ul>
</details>

<details class="notes" open>
  <summary>Notes</summary>
  <ul>
<li>The <code>district</code> and <code>point</code> values are converted to uppercase before saving.</li>
<li>The <code>battery</code> and <code>active</code> values are retrieved from checkbox widgets in the table.</li>
</ul>
</details>

            <details class="quote">
              <summary>Source code in <code>src\ui\modify_device_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">save_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Saves the data from the table widget to a file.</span>

<span class="sd">    This method iterates through all rows of the table widget, retrieves the data</span>
<span class="sd">    from each cell, and writes it to a file specified by `self.file_path`. The data</span>
<span class="sd">    is saved in a formatted string with each row&#39;s values separated by &quot; - &quot;.</span>
<span class="sd">    Boolean values from checkboxes in the table are also included.</span>

<span class="sd">    Raises:</span>
<span class="sd">        BaseErrorWithMessageBox: If an exception occurs during the file writing process,</span>
<span class="sd">        it raises a custom error with a message box displaying the error details.</span>

<span class="sd">    Side Effects:</span>
<span class="sd">        - Writes data to the file specified by `self.file_path`.</span>
<span class="sd">        - Displays a success message box upon successful save.</span>
<span class="sd">        - Displays an error message box if an exception occurs.</span>

<span class="sd">    Notes:</span>
<span class="sd">        - The `district` and `point` values are converted to uppercase before saving.</span>
<span class="sd">        - The `battery` and `active` values are retrieved from checkbox widgets in the table.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_path</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()):</span>
                <span class="n">district</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
                <span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
                <span class="n">point</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
                <span class="n">ip</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
                <span class="nb">id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
                <span class="n">communication</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
                <span class="n">battery</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">cellWidget</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span>
                <span class="n">active</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">cellWidget</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span>
                <span class="c1">#logging.debug(f&quot;{district} - {model} - {point} - {ip} - {id} - {communication} - {battery} - {active}&quot;)</span>
                <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">district</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">point</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">ip</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">communication</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">battery</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">active</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Éxito&quot;</span><span class="p">,</span> <span class="s2">&quot;Datos guardados correctamente.&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BaseErrorWithMessageBox</span><span class="p">(</span><span class="mi">3001</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="src.ui.obtain_attendances_devices_dialog" class="doc doc-heading">
            <code>obtain_attendances_devices_dialog</code>


</h3>

    <div class="doc doc-contents ">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h4 id="src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog" class="doc doc-heading">
            <code>ObtainAttendancesDevicesDialog</code>


</h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="SelectDevicesDialog (src.ui.base_select_devices_dialog.SelectDevicesDialog)" href="#src.ui.base_select_devices_dialog.SelectDevicesDialog">SelectDevicesDialog</a></code></p>








              <details class="quote">
                <summary>Source code in <code>src\ui\obtain_attendances_devices_dialog.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ObtainAttendancesDevicesDialog</span><span class="p">(</span><span class="n">SelectDevicesDialog</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the ObtainAttendancesDevicesDialog class.</span>

<span class="sd">        Args:</span>
<span class="sd">            parent (Optional[QWidget]): The parent widget for this dialog. Defaults to None.</span>

<span class="sd">        Attributes:</span>
<span class="sd">            failed_devices (list[str]): A list to store devices that failed during the operation.</span>
<span class="sd">            attendances_manager (AttendancesManager): An instance of AttendancesManager to handle attendance management.</span>

<span class="sd">        Raises:</span>
<span class="sd">            BaseError: If an exception occurs during initialization, it raises a BaseError with code 3501 and the exception message.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">failed_devices</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">attendances_manager</span> <span class="o">=</span> <span class="n">AttendancesManager</span><span class="p">()</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">op_function</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">attendances_manager</span><span class="o">.</span><span class="n">manage_devices_attendances</span><span class="p">,</span> <span class="n">window_title</span><span class="o">=</span><span class="s2">&quot;OBTENER MARCACIONES&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">init_ui</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3501</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">init_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the user interface for the attendance devices dialog.</span>

<span class="sd">        This method sets up the UI components, including labels, buttons, and layouts,</span>
<span class="sd">        to display and manage attendance device information. It also configures event</span>
<span class="sd">        handlers for user interactions.</span>

<span class="sd">        Raises:</span>
<span class="sd">            BaseError: If an exception occurs during the initialization process, it</span>
<span class="sd">                       raises a BaseError with code 3501 and the exception message.</span>

<span class="sd">        UI Components:</span>
<span class="sd">            - Header Labels: [&quot;Distrito&quot;, &quot;Modelo&quot;, &quot;Punto de Marcación&quot;, &quot;IP&quot;, &quot;ID&quot;, &quot;Comunicación&quot;]</span>
<span class="sd">            - QPushButton: A button to retry failed connections, initially hidden.</span>
<span class="sd">            - QPushButton: A button to update and obtain attendance records, with updated text.</span>
<span class="sd">            - QLabel: A label to display the total number of attendances, initially hidden.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">header_labels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Distrito&quot;</span><span class="p">,</span> <span class="s2">&quot;Modelo&quot;</span><span class="p">,</span> <span class="s2">&quot;Punto de Marcación&quot;</span><span class="p">,</span> <span class="s2">&quot;IP&quot;</span><span class="p">,</span> <span class="s2">&quot;ID&quot;</span><span class="p">,</span> <span class="s2">&quot;Comunicación&quot;</span><span class="p">]</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">init_ui</span><span class="p">(</span><span class="n">header_labels</span><span class="o">=</span><span class="n">header_labels</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">btn_retry_failed_connection</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Reintentar fallidos&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">btn_retry_failed_connection</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_retry_failed_connection_clicked</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">btn_retry_failed_connection</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">btn_retry_failed_connection</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">btn_update</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Obtener marcaciones&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">label_total_attendances</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Total de Marcaciones: 0&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">label_total_attendances</span><span class="o">.</span><span class="n">setAlignment</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="p">()</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label_total_attendances</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">label_total_attendances</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3501</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">operation_with_selected_ips</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Executes an operation with the selected IP addresses.</span>

<span class="sd">        This method hides the retry button and the total attendances label before</span>
<span class="sd">        attempting to perform the operation. It calls the parent class&#39;s </span>
<span class="sd">        `operation_with_selected_ips` method to execute the operation. If an </span>
<span class="sd">        exception occurs during the execution, it displays the retry button </span>
<span class="sd">        for failed connections.</span>

<span class="sd">        Exceptions:</span>
<span class="sd">            Exception: Catches any exception that occurs during the operation </span>
<span class="sd">            and triggers the display of the retry button.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_retry_failed_connection</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_total_attendances</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">operation_with_selected_ips</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_btn_retry_failed_connection</span><span class="p">()</span>
        <span class="k">return</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">op_terminate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">devices</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Finalizes the operation of obtaining attendance data from devices and updates the UI accordingly.</span>

<span class="sd">        Args:</span>
<span class="sd">            devices (dict[str, dict[str, str]]): A dictionary where the keys are device IPs and the values are dictionaries </span>
<span class="sd">                containing device-specific information, such as &quot;connection failed&quot; status and &quot;attendance count&quot;.</span>

<span class="sd">        Functionality:</span>
<span class="sd">            - Iterates through the rows of the table widget to update attendance data for each device.</span>
<span class="sd">            - Checks if the device IP is in the list of selected IPs and updates the corresponding table cell:</span>
<span class="sd">                - Marks devices with failed connections in red and adds them to the failed devices list.</span>
<span class="sd">                - Updates the attendance count for devices with successful connections and marks them in green.</span>
<span class="sd">            - Ensures the &quot;Cant. de Marcaciones&quot; column exists in the table and updates it with attendance data.</span>
<span class="sd">            - Calculates the total number of attendances across all devices.</span>
<span class="sd">            - Adjusts the table size, enables sorting, and sorts the table by a specific column in descending order.</span>
<span class="sd">            - Deselects all rows in the table and centers the window.</span>
<span class="sd">            - Attempts to check attendance files and handles any exceptions with a warning-level error.</span>
<span class="sd">            - Displays a retry button for failed connections and updates the total attendance label.</span>

<span class="sd">        Raises:</span>
<span class="sd">            BaseErrorWithMessageBox: If an unexpected exception occurs during the operation, it is raised with an error message box.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">failed_devices</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="c1">#logging.debug(f&#39;selected devices: {self.selected_ips} - devices from operation: {devices} - failed devices: {self.failed_devices}&#39;)</span>

            <span class="n">actual_column</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ensure_column_exists</span><span class="p">(</span><span class="s2">&quot;Cant. de Marcaciones&quot;</span><span class="p">)</span>

            <span class="n">total_marcaciones</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()):</span>
                <span class="n">ip_selected</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>  <span class="c1"># Column 3 holds the IP</span>
                <span class="n">attendances_count_item</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">ip_selected</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_ips</span><span class="p">:</span>
                    <span class="n">attendances_count_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">white</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">device</span> <span class="o">=</span> <span class="n">devices</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ip_selected</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">device</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">device</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;connection failed&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
                            <span class="n">attendances_count_item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Conexión fallida&quot;</span><span class="p">)</span>
                            <span class="n">attendances_count_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">red</span><span class="p">))</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">failed_devices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ip_selected</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">attendance_count</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;attendance count&quot;</span><span class="p">)</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">total_marcaciones</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">attendance_count</span><span class="p">)</span>
                            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                                <span class="n">attendance_count</span> <span class="o">=</span> <span class="mi">0</span>
                                <span class="n">BaseError</span><span class="p">(</span><span class="mi">3500</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Error al obtener la cantidad de marcaciones del dispositivo </span><span class="si">{</span><span class="n">ip_selected</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                            <span class="n">attendances_count_item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">attendance_count</span><span class="p">))</span>
                            <span class="n">attendances_count_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">green</span><span class="p">))</span>
                <span class="n">attendances_count_item</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="n">attendances_count_item</span><span class="o">.</span><span class="n">flags</span><span class="p">()</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsEditable</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">actual_column</span><span class="p">,</span> <span class="n">attendances_count_item</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">adjust_size_to_table</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setSortingEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">sortByColumn</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">DescendingOrder</span><span class="p">)</span>  
            <span class="bp">self</span><span class="o">.</span><span class="n">deselect_all_rows</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">center_window</span><span class="p">()</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">check_attendance_files</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">BaseError</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="n">level</span><span class="o">=</span><span class="s2">&quot;warning&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_btn_retry_failed_connection</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">label_total_attendances</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total de Marcaciones: </span><span class="si">{</span><span class="n">total_marcaciones</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">label_total_attendances</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">op_terminate</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BaseErrorWithMessageBox</span><span class="p">(</span><span class="mi">3500</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">parse_attendance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parses a line of attendance data and extracts the timestamp.</span>

<span class="sd">        Args:</span>
<span class="sd">            line (str): A string containing attendance data, expected to have at least</span>
<span class="sd">                        three parts separated by spaces, where the second and third parts</span>
<span class="sd">                        represent the date and time respectively.</span>

<span class="sd">        Returns:</span>
<span class="sd">            (datetime or None): A datetime object representing the parsed timestamp if the</span>
<span class="sd">                              line is well-formed and the date and time are valid.</span>
<span class="sd">                              Returns None if the line is malformed or the date/time</span>
<span class="sd">                              cannot be parsed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">parts</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">date_str</span><span class="p">,</span> <span class="n">time_str</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">parts</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">timestamp</span><span class="p">:</span> <span class="n">datetime</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">date_str</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">time_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="s2">/%m/%Y %H:%M&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">timestamp</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">check_attendance_files</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks attendance files in the &quot;devices&quot; directory for errors.</span>
<span class="sd">        A daily record (in a temporary file) is kept of each already reported incorrect check‑in,</span>
<span class="sd">        so that new ones are only reported once. For reporting, information is grouped by file,</span>
<span class="sd">        displaying each error only once (by file_path) as in the original version.</span>

<span class="sd">        Raises:</span>
<span class="sd">            BaseError: if the &#39;devices&#39; folder is not found or if attendance errors are detected.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span><span class="w"> </span><span class="nn">tempfile</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">timedelta</span>

        <span class="c1"># Get today&#39;s and yesterday&#39;s dates</span>
        <span class="n">today_str</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">yesterday_str</span> <span class="o">=</span> <span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">devices_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">find_root_directory</span><span class="p">(),</span> <span class="s2">&quot;devices&quot;</span><span class="p">)</span>
        <span class="n">temp_dir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">gettempdir</span><span class="p">()</span>
        <span class="c1"># logging.debug(f&quot;Directorio temporal: {temp_dir}&quot;)</span>

        <span class="c1"># Temporary file for today and yesterday</span>
        <span class="n">temp_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="n">temp_dir</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;reported_incorrect_attendances_</span><span class="si">{</span><span class="n">today_str</span><span class="si">}</span><span class="s2">.tmp&quot;</span>
        <span class="p">)</span>
        <span class="n">temp_file_yesterday</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="n">temp_dir</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;reported_incorrect_attendances_</span><span class="si">{</span><span class="n">yesterday_str</span><span class="si">}</span><span class="s2">.tmp&quot;</span>
        <span class="p">)</span>

        <span class="c1"># Remove yesterday&#39;s file if it exists</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">temp_file_yesterday</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">temp_file_yesterday</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No se pudo eliminar el archivo de ayer: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Load errors already reported today: each line is a unique error identifier (file_path + line)</span>
        <span class="n">reported_errors</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">temp_file_path</span><span class="p">):</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">temp_file_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">tf</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">tf</span><span class="p">:</span>
                    <span class="n">reported_errors</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>

        <span class="n">new_reported</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>            <span class="c1"># Newly found errors (by line)</span>
        <span class="n">files_with_new_errors</span> <span class="o">=</span> <span class="p">{}</span>      <span class="c1"># Grouped by file: key = file.path, value = info for report</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">devices_path</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="s2">&quot;No se encontró la carpeta &#39;devices&#39;&quot;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s2">&quot;warning&quot;</span><span class="p">)</span>

        <span class="c1"># Traverse the devices directory</span>
        <span class="k">with</span> <span class="n">os</span><span class="o">.</span><span class="n">scandir</span><span class="p">(</span><span class="n">devices_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">entries</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">subfolder</span> <span class="ow">in</span> <span class="n">entries</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">subfolder</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
                    <span class="k">continue</span>

                <span class="n">subfolder_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">devices_path</span><span class="p">,</span> <span class="n">subfolder</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="k">with</span> <span class="n">os</span><span class="o">.</span><span class="n">scandir</span><span class="p">(</span><span class="n">subfolder_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">sub_entries</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">sub_entry</span> <span class="ow">in</span> <span class="n">sub_entries</span><span class="p">:</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">sub_entry</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
                            <span class="k">continue</span>

                        <span class="k">with</span> <span class="n">os</span><span class="o">.</span><span class="n">scandir</span><span class="p">(</span><span class="n">sub_entry</span><span class="o">.</span><span class="n">path</span><span class="p">)</span> <span class="k">as</span> <span class="n">files</span><span class="p">:</span>
                            <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
                                <span class="k">if</span> <span class="n">today_str</span> <span class="ow">in</span> <span class="n">file</span><span class="o">.</span><span class="n">name</span> <span class="ow">and</span> <span class="n">file</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.cro&quot;</span><span class="p">):</span>
                                    <span class="n">file_has_new_error</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># Flag for new errors in this file</span>

                                    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                                        <span class="c1"># Check each line for attendance errors</span>
                                        <span class="k">for</span> <span class="n">line_number</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
                                            <span class="n">attendance</span> <span class="o">=</span> <span class="n">Attendance</span><span class="p">(</span><span class="n">timestamp</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parse_attendance</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>
                                            <span class="k">if</span> <span class="n">attendance</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="p">(</span>
                                                <span class="n">attendance</span><span class="o">.</span><span class="n">is_three_months_old</span><span class="p">()</span> <span class="ow">or</span> <span class="n">attendance</span><span class="o">.</span><span class="n">is_in_the_future</span><span class="p">()</span>
                                            <span class="p">):</span>
                                                <span class="c1"># Create a unique identifier for this error line</span>
                                                <span class="n">error_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
                                                <span class="k">if</span> <span class="n">error_id</span> <span class="ow">in</span> <span class="n">reported_errors</span><span class="p">:</span>
                                                    <span class="k">continue</span>  <span class="c1"># This error was already reported</span>

                                                <span class="c1"># New error found</span>
                                                <span class="n">new_reported</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">error_id</span><span class="p">)</span>
                                                <span class="n">file_has_new_error</span> <span class="o">=</span> <span class="kc">True</span>
                                                <span class="c1"># To continue scanning the file for all new errors (even though only one link per file is shown),</span>
                                                <span class="c1"># do not break here. Uncomment the next line to only report the first occurrence per file.</span>
                                                <span class="c1"># break</span>

                                    <span class="k">if</span> <span class="n">file_has_new_error</span><span class="p">:</span>
                                        <span class="c1"># Add one entry per file, as in the original version</span>
                                        <span class="k">if</span> <span class="n">file</span><span class="o">.</span><span class="n">path</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">files_with_new_errors</span><span class="p">:</span>
                                            <span class="n">files_with_new_errors</span><span class="p">[</span><span class="n">file</span><span class="o">.</span><span class="n">path</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                                                <span class="s2">&quot;ip&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_ip</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
                                                <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_date</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
                                                <span class="s2">&quot;file_path&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_file_uri</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
                                            <span class="p">}</span>

        <span class="c1"># Append newly found errors to the temporary file</span>
        <span class="k">if</span> <span class="n">new_reported</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">temp_file_path</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">tf</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">err</span> <span class="ow">in</span> <span class="n">new_reported</span><span class="p">:</span>
                    <span class="n">tf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">err</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Build report from files that have new errors</span>
        <span class="n">devices_with_error</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">files_with_new_errors</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">devices_with_error</span><span class="p">:</span>
            <span class="n">error_info</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot;&lt;html&gt;&lt;br&gt;&quot;</span> <span class="o">+</span>
                <span class="s2">&quot;&lt;br&gt;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                    <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;- &lt;a href=&#39;</span><span class="si">{</span><span class="n">device</span><span class="p">[</span><span class="s1">&#39;file_path&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;&gt;</span><span class="si">{</span><span class="n">device</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">device</span><span class="p">[</span><span class="s1">&#39;ip&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&lt;/a&gt;&quot;</span>
                    <span class="k">for</span> <span class="n">device</span> <span class="ow">in</span> <span class="n">devices_with_error</span><span class="p">]</span>
                <span class="p">)</span> <span class="o">+</span>
                <span class="s2">&quot;&lt;/html&gt;&quot;</span>
            <span class="p">)</span>
            <span class="n">error_code</span> <span class="o">=</span> <span class="mi">2003</span>
            <span class="n">error</span> <span class="o">=</span> <span class="n">BaseError</span><span class="p">(</span><span class="n">error_code</span><span class="p">,</span> <span class="n">error_info</span><span class="p">)</span>

            <span class="n">config</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">find_root_directory</span><span class="p">(),</span> <span class="s1">&#39;config.ini&#39;</span><span class="p">))</span>
            <span class="n">clear_attendance</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">getboolean</span><span class="p">(</span><span class="s1">&#39;Device_config&#39;</span><span class="p">,</span> <span class="s1">&#39;clear_attendance&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">clear_attendance</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ask_force_clear_attendances</span><span class="p">(</span><span class="n">error_code</span><span class="p">,</span> <span class="n">error_info</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">error</span><span class="o">.</span><span class="n">show_message_box_html</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">ask_force_clear_attendances</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error_code</span><span class="p">,</span> <span class="n">error_info</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="n">msg_box</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="n">msg_box</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Warning</span><span class="p">)</span>
        <span class="n">msg_box</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error </span><span class="si">{</span><span class="n">error_code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">msg_box</span><span class="o">.</span><span class="n">setTextFormat</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">RichText</span><span class="p">)</span>
        <span class="n">msg_box</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">error_info</span><span class="p">)</span>
        <span class="n">msg_box</span><span class="o">.</span><span class="n">setInformativeText</span><span class="p">(</span><span class="s2">&quot;¿Desea habilitar el forzado de eliminado de marcaciones en su proxima obtencion de marcaciones?&quot;</span><span class="p">)</span>
        <span class="n">msg_box</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span> <span class="o">|</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">No</span><span class="p">)</span>
        <span class="n">msg_box</span><span class="o">.</span><span class="n">setDefaultButton</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">No</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">msg_box</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">result</span> <span class="o">==</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">:</span>
            <span class="n">config</span><span class="p">[</span><span class="s1">&#39;Device_config&#39;</span><span class="p">][</span><span class="s1">&#39;force_clear_attendance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;True&#39;</span>

            <span class="c1"># Write the changes back to the configuration file</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;config.ini&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">config_file</span><span class="p">:</span>
                    <span class="n">config</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">BaseError</span><span class="p">(</span><span class="mi">3001</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Se ha habilitado el forzado de eliminacion de marcaciones&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">format_file_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Converts a local file path to a file URI.</span>

<span class="sd">        This method takes a file path as input, replaces backslashes with forward slashes</span>
<span class="sd">        (to ensure compatibility across different operating systems), and encodes special</span>
<span class="sd">        characters to make the path safe for use in a URI. It then constructs a file URI</span>
<span class="sd">        by prefixing the encoded path with &#39;file:&#39;.</span>

<span class="sd">        Args:</span>
<span class="sd">            file_path (str): The local file path to be converted into a file URI.</span>

<span class="sd">        Returns:</span>
<span class="sd">            (str): The formatted file URI.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">file_url</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">urljoin</span><span class="p">(</span><span class="s1">&#39;file:&#39;</span><span class="p">,</span> <span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">quote</span><span class="p">(</span><span class="n">file_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span><span class="p">)))</span>
        <span class="c1"># logging.debug(file_url)</span>
        <span class="k">return</span> <span class="n">file_url</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">extract_ip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extracts an IP address from a given filename.</span>

<span class="sd">        The method uses a regular expression to match filenames that follow the</span>
<span class="sd">        pattern: `&lt;IP_ADDRESS&gt;_&lt;DATE&gt;_file.cro`, where:</span>

<span class="sd">        - `&lt;IP_ADDRESS&gt;` is a valid IPv4 address (e.g., 192.168.1.1).</span>
<span class="sd">        - `&lt;DATE&gt;` is in the format YYYY-MM-DD.</span>

<span class="sd">        Args:</span>
<span class="sd">            filename (str): The filename to extract the IP address from.</span>

<span class="sd">        Returns:</span>
<span class="sd">            (str): The extracted IP address if the filename matches the pattern, </span>
<span class="sd">                 otherwise None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^(\d+\.\d+\.\d+\.\d+)_\d</span><span class="si">{4}</span><span class="s2">-\d</span><span class="si">{2}</span><span class="s2">-\d</span><span class="si">{2}</span><span class="s2">_file\.cro$&quot;</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="n">match</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">extract_date</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extracts a date string from a given filename if it matches a specific pattern.</span>

<span class="sd">        The method uses a regular expression to identify filenames that follow the</span>
<span class="sd">        pattern: `&lt;IP_ADDRESS&gt;_&lt;YYYY-MM-DD&gt;_file.cro`, where:</span>

<span class="sd">        - `&lt;IP_ADDRESS&gt;` is a sequence of four groups of digits separated by dots.</span>
<span class="sd">        - `&lt;YYYY-MM-DD&gt;` is a date in the format year-month-day.</span>

<span class="sd">        Args:</span>
<span class="sd">            filename (str): The filename to extract the date from.</span>

<span class="sd">        Returns:</span>
<span class="sd">            (str or None): The extracted date string in the format &#39;YYYY-MM-DD&#39; if the</span>
<span class="sd">                        filename matches the pattern; otherwise, None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^\d+\.\d+\.\d+\.\d+_(\d</span><span class="si">{4}</span><span class="s2">-\d</span><span class="si">{2}</span><span class="s2">-\d</span><span class="si">{2}</span><span class="s2">)_file\.cro$&quot;</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="n">match</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">show_btn_retry_failed_connection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays the &quot;Retry Failed Connection&quot; button if there are failed devices.</span>

<span class="sd">        This method checks if the `failed_devices` attribute exists and contains </span>
<span class="sd">        one or more entries. If so, it makes the `btn_retry_failed_connection` </span>
<span class="sd">        button visible. If an exception occurs during execution, it raises a </span>
<span class="sd">        `BaseError` with an appropriate error code and message.</span>

<span class="sd">        Raises:</span>
<span class="sd">            BaseError: If an exception occurs, it is wrapped in a `BaseError` </span>
<span class="sd">                       with code 3500 and the exception message.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>            
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">failed_devices</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">failed_devices</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">btn_retry_failed_connection</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3500</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">on_retry_failed_connection_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles the retry action for failed device connections.</span>

<span class="sd">        This method is triggered when the &quot;Retry Failed Connection&quot; button is clicked.</span>
<span class="sd">        It attempts to reconnect to the devices that previously failed to connect and</span>
<span class="sd">        updates the UI to reflect the retry process. A separate thread is used to manage</span>
<span class="sd">        the reconnection attempts and progress updates.</span>

<span class="sd">        Steps performed:</span>

<span class="sd">        - Hides certain UI elements (e.g., table widget, buttons) and updates labels.</span>
<span class="sd">        - Initializes and starts an `OperationThread` to handle the reconnection logic.</span>
<span class="sd">        - Connects thread signals to appropriate methods for progress updates and cleanup.</span>
<span class="sd">        - Hides the retry button after it is clicked.</span>

<span class="sd">        Raises:</span>
<span class="sd">            BaseError: If an exception occurs during the execution of the method.</span>

<span class="sd">        Attributes:</span>
<span class="sd">            self.failed_devices (list): List of devices that failed to connect.</span>
<span class="sd">            self.attendances_manager (object): Manager responsible for handling device attendances.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">sortByColumn</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">DescendingOrder</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">label_total_attendances</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">label_updating</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Reintentando conexiones...&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">btn_update</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">btn_activate_all</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">btn_deactivate_all</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">label_updating</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="c1"># logging.debug(f&quot;Dispositivos seleccionados: {self.failed_devices}&quot;)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">op_thread</span> <span class="o">=</span> <span class="n">OperationThread</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attendances_manager</span><span class="o">.</span><span class="n">manage_devices_attendances</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">failed_devices</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">op_thread</span><span class="o">.</span><span class="n">progress_updated</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update_progress</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">op_thread</span><span class="o">.</span><span class="n">op_terminate</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">op_terminate</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">op_thread</span><span class="o">.</span><span class="n">finished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cleanup_thread</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">op_thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">btn_retry_failed_connection</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># Hide the button after clicking</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3500</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h5 id="src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Initializes the ObtainAttendancesDevicesDialog class.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>parent</code>
            </td>
            <td>
                  <code><span title="Optional">Optional</span>[<span title="QWidget">QWidget</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The parent widget for this dialog. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.__init__.failed_devices">failed_devices</span></code></td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list to store devices that failed during the operation.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.__init__.attendances_manager">attendances_manager</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="AttendancesManager (src.business_logic.program_manager.AttendancesManager)" href="#src.business_logic.program_manager.AttendancesManager">AttendancesManager</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An instance of AttendancesManager to handle attendance management.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseError">BaseError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an exception occurs during initialization, it raises a BaseError with code 3501 and the exception message.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\obtain_attendances_devices_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the ObtainAttendancesDevicesDialog class.</span>

<span class="sd">    Args:</span>
<span class="sd">        parent (Optional[QWidget]): The parent widget for this dialog. Defaults to None.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        failed_devices (list[str]): A list to store devices that failed during the operation.</span>
<span class="sd">        attendances_manager (AttendancesManager): An instance of AttendancesManager to handle attendance management.</span>

<span class="sd">    Raises:</span>
<span class="sd">        BaseError: If an exception occurs during initialization, it raises a BaseError with code 3501 and the exception message.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">failed_devices</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attendances_manager</span> <span class="o">=</span> <span class="n">AttendancesManager</span><span class="p">()</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">op_function</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">attendances_manager</span><span class="o">.</span><span class="n">manage_devices_attendances</span><span class="p">,</span> <span class="n">window_title</span><span class="o">=</span><span class="s2">&quot;OBTENER MARCACIONES&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_ui</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3501</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.check_attendance_files" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">check_attendance_files</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Checks attendance files in the "devices" directory for errors.
A daily record (in a temporary file) is kept of each already reported incorrect check‑in,
so that new ones are only reported once. For reporting, information is grouped by file,
displaying each error only once (by file_path) as in the original version.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseError">BaseError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if the 'devices' folder is not found or if attendance errors are detected.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\obtain_attendances_devices_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">check_attendance_files</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks attendance files in the &quot;devices&quot; directory for errors.</span>
<span class="sd">    A daily record (in a temporary file) is kept of each already reported incorrect check‑in,</span>
<span class="sd">    so that new ones are only reported once. For reporting, information is grouped by file,</span>
<span class="sd">    displaying each error only once (by file_path) as in the original version.</span>

<span class="sd">    Raises:</span>
<span class="sd">        BaseError: if the &#39;devices&#39; folder is not found or if attendance errors are detected.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">tempfile</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">timedelta</span>

    <span class="c1"># Get today&#39;s and yesterday&#39;s dates</span>
    <span class="n">today_str</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">yesterday_str</span> <span class="o">=</span> <span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">devices_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">find_root_directory</span><span class="p">(),</span> <span class="s2">&quot;devices&quot;</span><span class="p">)</span>
    <span class="n">temp_dir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">gettempdir</span><span class="p">()</span>
    <span class="c1"># logging.debug(f&quot;Directorio temporal: {temp_dir}&quot;)</span>

    <span class="c1"># Temporary file for today and yesterday</span>
    <span class="n">temp_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="n">temp_dir</span><span class="p">,</span>
        <span class="sa">f</span><span class="s2">&quot;reported_incorrect_attendances_</span><span class="si">{</span><span class="n">today_str</span><span class="si">}</span><span class="s2">.tmp&quot;</span>
    <span class="p">)</span>
    <span class="n">temp_file_yesterday</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="n">temp_dir</span><span class="p">,</span>
        <span class="sa">f</span><span class="s2">&quot;reported_incorrect_attendances_</span><span class="si">{</span><span class="n">yesterday_str</span><span class="si">}</span><span class="s2">.tmp&quot;</span>
    <span class="p">)</span>

    <span class="c1"># Remove yesterday&#39;s file if it exists</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">temp_file_yesterday</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">temp_file_yesterday</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No se pudo eliminar el archivo de ayer: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Load errors already reported today: each line is a unique error identifier (file_path + line)</span>
    <span class="n">reported_errors</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">temp_file_path</span><span class="p">):</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">temp_file_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">tf</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">tf</span><span class="p">:</span>
                <span class="n">reported_errors</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>

    <span class="n">new_reported</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>            <span class="c1"># Newly found errors (by line)</span>
    <span class="n">files_with_new_errors</span> <span class="o">=</span> <span class="p">{}</span>      <span class="c1"># Grouped by file: key = file.path, value = info for report</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">devices_path</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="s2">&quot;No se encontró la carpeta &#39;devices&#39;&quot;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s2">&quot;warning&quot;</span><span class="p">)</span>

    <span class="c1"># Traverse the devices directory</span>
    <span class="k">with</span> <span class="n">os</span><span class="o">.</span><span class="n">scandir</span><span class="p">(</span><span class="n">devices_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">entries</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">subfolder</span> <span class="ow">in</span> <span class="n">entries</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">subfolder</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
                <span class="k">continue</span>

            <span class="n">subfolder_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">devices_path</span><span class="p">,</span> <span class="n">subfolder</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">os</span><span class="o">.</span><span class="n">scandir</span><span class="p">(</span><span class="n">subfolder_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">sub_entries</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">sub_entry</span> <span class="ow">in</span> <span class="n">sub_entries</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">sub_entry</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
                        <span class="k">continue</span>

                    <span class="k">with</span> <span class="n">os</span><span class="o">.</span><span class="n">scandir</span><span class="p">(</span><span class="n">sub_entry</span><span class="o">.</span><span class="n">path</span><span class="p">)</span> <span class="k">as</span> <span class="n">files</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">today_str</span> <span class="ow">in</span> <span class="n">file</span><span class="o">.</span><span class="n">name</span> <span class="ow">and</span> <span class="n">file</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.cro&quot;</span><span class="p">):</span>
                                <span class="n">file_has_new_error</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># Flag for new errors in this file</span>

                                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                                    <span class="c1"># Check each line for attendance errors</span>
                                    <span class="k">for</span> <span class="n">line_number</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
                                        <span class="n">attendance</span> <span class="o">=</span> <span class="n">Attendance</span><span class="p">(</span><span class="n">timestamp</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parse_attendance</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>
                                        <span class="k">if</span> <span class="n">attendance</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="p">(</span>
                                            <span class="n">attendance</span><span class="o">.</span><span class="n">is_three_months_old</span><span class="p">()</span> <span class="ow">or</span> <span class="n">attendance</span><span class="o">.</span><span class="n">is_in_the_future</span><span class="p">()</span>
                                        <span class="p">):</span>
                                            <span class="c1"># Create a unique identifier for this error line</span>
                                            <span class="n">error_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
                                            <span class="k">if</span> <span class="n">error_id</span> <span class="ow">in</span> <span class="n">reported_errors</span><span class="p">:</span>
                                                <span class="k">continue</span>  <span class="c1"># This error was already reported</span>

                                            <span class="c1"># New error found</span>
                                            <span class="n">new_reported</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">error_id</span><span class="p">)</span>
                                            <span class="n">file_has_new_error</span> <span class="o">=</span> <span class="kc">True</span>
                                            <span class="c1"># To continue scanning the file for all new errors (even though only one link per file is shown),</span>
                                            <span class="c1"># do not break here. Uncomment the next line to only report the first occurrence per file.</span>
                                            <span class="c1"># break</span>

                                <span class="k">if</span> <span class="n">file_has_new_error</span><span class="p">:</span>
                                    <span class="c1"># Add one entry per file, as in the original version</span>
                                    <span class="k">if</span> <span class="n">file</span><span class="o">.</span><span class="n">path</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">files_with_new_errors</span><span class="p">:</span>
                                        <span class="n">files_with_new_errors</span><span class="p">[</span><span class="n">file</span><span class="o">.</span><span class="n">path</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                                            <span class="s2">&quot;ip&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_ip</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
                                            <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_date</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
                                            <span class="s2">&quot;file_path&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_file_uri</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
                                        <span class="p">}</span>

    <span class="c1"># Append newly found errors to the temporary file</span>
    <span class="k">if</span> <span class="n">new_reported</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">temp_file_path</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">tf</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">err</span> <span class="ow">in</span> <span class="n">new_reported</span><span class="p">:</span>
                <span class="n">tf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">err</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Build report from files that have new errors</span>
    <span class="n">devices_with_error</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">files_with_new_errors</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">devices_with_error</span><span class="p">:</span>
        <span class="n">error_info</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;&lt;html&gt;&lt;br&gt;&quot;</span> <span class="o">+</span>
            <span class="s2">&quot;&lt;br&gt;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;- &lt;a href=&#39;</span><span class="si">{</span><span class="n">device</span><span class="p">[</span><span class="s1">&#39;file_path&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;&gt;</span><span class="si">{</span><span class="n">device</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">device</span><span class="p">[</span><span class="s1">&#39;ip&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&lt;/a&gt;&quot;</span>
                <span class="k">for</span> <span class="n">device</span> <span class="ow">in</span> <span class="n">devices_with_error</span><span class="p">]</span>
            <span class="p">)</span> <span class="o">+</span>
            <span class="s2">&quot;&lt;/html&gt;&quot;</span>
        <span class="p">)</span>
        <span class="n">error_code</span> <span class="o">=</span> <span class="mi">2003</span>
        <span class="n">error</span> <span class="o">=</span> <span class="n">BaseError</span><span class="p">(</span><span class="n">error_code</span><span class="p">,</span> <span class="n">error_info</span><span class="p">)</span>

        <span class="n">config</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">find_root_directory</span><span class="p">(),</span> <span class="s1">&#39;config.ini&#39;</span><span class="p">))</span>
        <span class="n">clear_attendance</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">getboolean</span><span class="p">(</span><span class="s1">&#39;Device_config&#39;</span><span class="p">,</span> <span class="s1">&#39;clear_attendance&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">clear_attendance</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ask_force_clear_attendances</span><span class="p">(</span><span class="n">error_code</span><span class="p">,</span> <span class="n">error_info</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">error</span><span class="o">.</span><span class="n">show_message_box_html</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.extract_date" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">extract_date</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Extracts a date string from a given filename if it matches a specific pattern.</p>
<p>The method uses a regular expression to identify filenames that follow the
pattern: <code>&lt;IP_ADDRESS&gt;_&lt;YYYY-MM-DD&gt;_file.cro</code>, where:</p>
<ul>
<li><code>&lt;IP_ADDRESS&gt;</code> is a sequence of four groups of digits separated by dots.</li>
<li><code>&lt;YYYY-MM-DD&gt;</code> is a date in the format year-month-day.</li>
</ul>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>filename</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The filename to extract the date from.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span> or None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The extracted date string in the format 'YYYY-MM-DD' if the
        filename matches the pattern; otherwise, None.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\obtain_attendances_devices_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">extract_date</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extracts a date string from a given filename if it matches a specific pattern.</span>

<span class="sd">    The method uses a regular expression to identify filenames that follow the</span>
<span class="sd">    pattern: `&lt;IP_ADDRESS&gt;_&lt;YYYY-MM-DD&gt;_file.cro`, where:</span>

<span class="sd">    - `&lt;IP_ADDRESS&gt;` is a sequence of four groups of digits separated by dots.</span>
<span class="sd">    - `&lt;YYYY-MM-DD&gt;` is a date in the format year-month-day.</span>

<span class="sd">    Args:</span>
<span class="sd">        filename (str): The filename to extract the date from.</span>

<span class="sd">    Returns:</span>
<span class="sd">        (str or None): The extracted date string in the format &#39;YYYY-MM-DD&#39; if the</span>
<span class="sd">                    filename matches the pattern; otherwise, None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^\d+\.\d+\.\d+\.\d+_(\d</span><span class="si">{4}</span><span class="s2">-\d</span><span class="si">{2}</span><span class="s2">-\d</span><span class="si">{2}</span><span class="s2">)_file\.cro$&quot;</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="n">match</span> <span class="k">else</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.extract_ip" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">extract_ip</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Extracts an IP address from a given filename.</p>
<p>The method uses a regular expression to match filenames that follow the
pattern: <code>&lt;IP_ADDRESS&gt;_&lt;DATE&gt;_file.cro</code>, where:</p>
<ul>
<li><code>&lt;IP_ADDRESS&gt;</code> is a valid IPv4 address (e.g., 192.168.1.1).</li>
<li><code>&lt;DATE&gt;</code> is in the format YYYY-MM-DD.</li>
</ul>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>filename</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The filename to extract the IP address from.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The extracted IP address if the filename matches the pattern, 
 otherwise None.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\obtain_attendances_devices_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">extract_ip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extracts an IP address from a given filename.</span>

<span class="sd">    The method uses a regular expression to match filenames that follow the</span>
<span class="sd">    pattern: `&lt;IP_ADDRESS&gt;_&lt;DATE&gt;_file.cro`, where:</span>

<span class="sd">    - `&lt;IP_ADDRESS&gt;` is a valid IPv4 address (e.g., 192.168.1.1).</span>
<span class="sd">    - `&lt;DATE&gt;` is in the format YYYY-MM-DD.</span>

<span class="sd">    Args:</span>
<span class="sd">        filename (str): The filename to extract the IP address from.</span>

<span class="sd">    Returns:</span>
<span class="sd">        (str): The extracted IP address if the filename matches the pattern, </span>
<span class="sd">             otherwise None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^(\d+\.\d+\.\d+\.\d+)_\d</span><span class="si">{4}</span><span class="s2">-\d</span><span class="si">{2}</span><span class="s2">-\d</span><span class="si">{2}</span><span class="s2">_file\.cro$&quot;</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="n">match</span> <span class="k">else</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.format_file_uri" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">format_file_uri</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Converts a local file path to a file URI.</p>
<p>This method takes a file path as input, replaces backslashes with forward slashes
(to ensure compatibility across different operating systems), and encodes special
characters to make the path safe for use in a URI. It then constructs a file URI
by prefixing the encoded path with 'file:'.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>file_path</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The local file path to be converted into a file URI.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The formatted file URI.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\obtain_attendances_devices_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">format_file_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts a local file path to a file URI.</span>

<span class="sd">    This method takes a file path as input, replaces backslashes with forward slashes</span>
<span class="sd">    (to ensure compatibility across different operating systems), and encodes special</span>
<span class="sd">    characters to make the path safe for use in a URI. It then constructs a file URI</span>
<span class="sd">    by prefixing the encoded path with &#39;file:&#39;.</span>

<span class="sd">    Args:</span>
<span class="sd">        file_path (str): The local file path to be converted into a file URI.</span>

<span class="sd">    Returns:</span>
<span class="sd">        (str): The formatted file URI.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">file_url</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">urljoin</span><span class="p">(</span><span class="s1">&#39;file:&#39;</span><span class="p">,</span> <span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">quote</span><span class="p">(</span><span class="n">file_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span><span class="p">)))</span>
    <span class="c1"># logging.debug(file_url)</span>
    <span class="k">return</span> <span class="n">file_url</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.init_ui" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">init_ui</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Initializes the user interface for the attendance devices dialog.</p>
<p>This method sets up the UI components, including labels, buttons, and layouts,
to display and manage attendance device information. It also configures event
handlers for user interactions.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseError">BaseError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an exception occurs during the initialization process, it
       raises a BaseError with code 3501 and the exception message.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="ui-components" open>
  <summary>UI Components</summary>
  <ul>
<li>Header Labels: ["Distrito", "Modelo", "Punto de Marcación", "IP", "ID", "Comunicación"]</li>
<li>QPushButton: A button to retry failed connections, initially hidden.</li>
<li>QPushButton: A button to update and obtain attendance records, with updated text.</li>
<li>QLabel: A label to display the total number of attendances, initially hidden.</li>
</ul>
</details>

            <details class="quote">
              <summary>Source code in <code>src\ui\obtain_attendances_devices_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">init_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the user interface for the attendance devices dialog.</span>

<span class="sd">    This method sets up the UI components, including labels, buttons, and layouts,</span>
<span class="sd">    to display and manage attendance device information. It also configures event</span>
<span class="sd">    handlers for user interactions.</span>

<span class="sd">    Raises:</span>
<span class="sd">        BaseError: If an exception occurs during the initialization process, it</span>
<span class="sd">                   raises a BaseError with code 3501 and the exception message.</span>

<span class="sd">    UI Components:</span>
<span class="sd">        - Header Labels: [&quot;Distrito&quot;, &quot;Modelo&quot;, &quot;Punto de Marcación&quot;, &quot;IP&quot;, &quot;ID&quot;, &quot;Comunicación&quot;]</span>
<span class="sd">        - QPushButton: A button to retry failed connections, initially hidden.</span>
<span class="sd">        - QPushButton: A button to update and obtain attendance records, with updated text.</span>
<span class="sd">        - QLabel: A label to display the total number of attendances, initially hidden.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">header_labels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Distrito&quot;</span><span class="p">,</span> <span class="s2">&quot;Modelo&quot;</span><span class="p">,</span> <span class="s2">&quot;Punto de Marcación&quot;</span><span class="p">,</span> <span class="s2">&quot;IP&quot;</span><span class="p">,</span> <span class="s2">&quot;ID&quot;</span><span class="p">,</span> <span class="s2">&quot;Comunicación&quot;</span><span class="p">]</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">init_ui</span><span class="p">(</span><span class="n">header_labels</span><span class="o">=</span><span class="n">header_labels</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_retry_failed_connection</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Reintentar fallidos&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_retry_failed_connection</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_retry_failed_connection_clicked</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">button_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">btn_retry_failed_connection</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_retry_failed_connection</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_update</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Obtener marcaciones&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_total_attendances</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Total de Marcaciones: 0&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_total_attendances</span><span class="o">.</span><span class="n">setAlignment</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="p">()</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label_total_attendances</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_total_attendances</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3501</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.on_retry_failed_connection_clicked" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">on_retry_failed_connection_clicked</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Handles the retry action for failed device connections.</p>
<p>This method is triggered when the "Retry Failed Connection" button is clicked.
It attempts to reconnect to the devices that previously failed to connect and
updates the UI to reflect the retry process. A separate thread is used to manage
the reconnection attempts and progress updates.</p>
<p>Steps performed:</p>
<ul>
<li>Hides certain UI elements (e.g., table widget, buttons) and updates labels.</li>
<li>Initializes and starts an <code>OperationThread</code> to handle the reconnection logic.</li>
<li>Connects thread signals to appropriate methods for progress updates and cleanup.</li>
<li>Hides the retry button after it is clicked.</li>
</ul>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseError">BaseError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an exception occurs during the execution of the method.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.on_retry_failed_connection_clicked.self.failed_devices">self.failed_devices</span></code></td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of devices that failed to connect.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.on_retry_failed_connection_clicked.self.attendances_manager">self.attendances_manager</span></code></td>
            <td>
                  <code><span title="object">object</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Manager responsible for handling device attendances.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\obtain_attendances_devices_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">on_retry_failed_connection_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the retry action for failed device connections.</span>

<span class="sd">    This method is triggered when the &quot;Retry Failed Connection&quot; button is clicked.</span>
<span class="sd">    It attempts to reconnect to the devices that previously failed to connect and</span>
<span class="sd">    updates the UI to reflect the retry process. A separate thread is used to manage</span>
<span class="sd">    the reconnection attempts and progress updates.</span>

<span class="sd">    Steps performed:</span>

<span class="sd">    - Hides certain UI elements (e.g., table widget, buttons) and updates labels.</span>
<span class="sd">    - Initializes and starts an `OperationThread` to handle the reconnection logic.</span>
<span class="sd">    - Connects thread signals to appropriate methods for progress updates and cleanup.</span>
<span class="sd">    - Hides the retry button after it is clicked.</span>

<span class="sd">    Raises:</span>
<span class="sd">        BaseError: If an exception occurs during the execution of the method.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        self.failed_devices (list): List of devices that failed to connect.</span>
<span class="sd">        self.attendances_manager (object): Manager responsible for handling device attendances.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">sortByColumn</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">DescendingOrder</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_total_attendances</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_updating</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Reintentando conexiones...&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_update</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_activate_all</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_deactivate_all</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_updating</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="c1"># logging.debug(f&quot;Dispositivos seleccionados: {self.failed_devices}&quot;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">op_thread</span> <span class="o">=</span> <span class="n">OperationThread</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attendances_manager</span><span class="o">.</span><span class="n">manage_devices_attendances</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">failed_devices</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">op_thread</span><span class="o">.</span><span class="n">progress_updated</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update_progress</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">op_thread</span><span class="o">.</span><span class="n">op_terminate</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">op_terminate</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">op_thread</span><span class="o">.</span><span class="n">finished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cleanup_thread</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">op_thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_retry_failed_connection</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># Hide the button after clicking</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3500</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.op_terminate" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">op_terminate</span><span class="p">(</span><span class="n">devices</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Finalizes the operation of obtaining attendance data from devices and updates the UI accordingly.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>devices</code>
            </td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="dict">dict</span>[<span title="str">str</span>, <span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary where the keys are device IPs and the values are dictionaries 
containing device-specific information, such as "connection failed" status and "attendance count".</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


<details class="functionality" open>
  <summary>Functionality</summary>
  <ul>
<li>Iterates through the rows of the table widget to update attendance data for each device.</li>
<li>Checks if the device IP is in the list of selected IPs and updates the corresponding table cell:<ul>
<li>Marks devices with failed connections in red and adds them to the failed devices list.</li>
<li>Updates the attendance count for devices with successful connections and marks them in green.</li>
</ul>
</li>
<li>Ensures the "Cant. de Marcaciones" column exists in the table and updates it with attendance data.</li>
<li>Calculates the total number of attendances across all devices.</li>
<li>Adjusts the table size, enables sorting, and sorts the table by a specific column in descending order.</li>
<li>Deselects all rows in the table and centers the window.</li>
<li>Attempts to check attendance files and handles any exceptions with a warning-level error.</li>
<li>Displays a retry button for failed connections and updates the total attendance label.</li>
</ul>
</details>

<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseErrorWithMessageBox">BaseErrorWithMessageBox</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an unexpected exception occurs during the operation, it is raised with an error message box.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\obtain_attendances_devices_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">op_terminate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">devices</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Finalizes the operation of obtaining attendance data from devices and updates the UI accordingly.</span>

<span class="sd">    Args:</span>
<span class="sd">        devices (dict[str, dict[str, str]]): A dictionary where the keys are device IPs and the values are dictionaries </span>
<span class="sd">            containing device-specific information, such as &quot;connection failed&quot; status and &quot;attendance count&quot;.</span>

<span class="sd">    Functionality:</span>
<span class="sd">        - Iterates through the rows of the table widget to update attendance data for each device.</span>
<span class="sd">        - Checks if the device IP is in the list of selected IPs and updates the corresponding table cell:</span>
<span class="sd">            - Marks devices with failed connections in red and adds them to the failed devices list.</span>
<span class="sd">            - Updates the attendance count for devices with successful connections and marks them in green.</span>
<span class="sd">        - Ensures the &quot;Cant. de Marcaciones&quot; column exists in the table and updates it with attendance data.</span>
<span class="sd">        - Calculates the total number of attendances across all devices.</span>
<span class="sd">        - Adjusts the table size, enables sorting, and sorts the table by a specific column in descending order.</span>
<span class="sd">        - Deselects all rows in the table and centers the window.</span>
<span class="sd">        - Attempts to check attendance files and handles any exceptions with a warning-level error.</span>
<span class="sd">        - Displays a retry button for failed connections and updates the total attendance label.</span>

<span class="sd">    Raises:</span>
<span class="sd">        BaseErrorWithMessageBox: If an unexpected exception occurs during the operation, it is raised with an error message box.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">failed_devices</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1">#logging.debug(f&#39;selected devices: {self.selected_ips} - devices from operation: {devices} - failed devices: {self.failed_devices}&#39;)</span>

        <span class="n">actual_column</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ensure_column_exists</span><span class="p">(</span><span class="s2">&quot;Cant. de Marcaciones&quot;</span><span class="p">)</span>

        <span class="n">total_marcaciones</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()):</span>
            <span class="n">ip_selected</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>  <span class="c1"># Column 3 holds the IP</span>
            <span class="n">attendances_count_item</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ip_selected</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_ips</span><span class="p">:</span>
                <span class="n">attendances_count_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">white</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">device</span> <span class="o">=</span> <span class="n">devices</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ip_selected</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">device</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">device</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;connection failed&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
                        <span class="n">attendances_count_item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Conexión fallida&quot;</span><span class="p">)</span>
                        <span class="n">attendances_count_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">red</span><span class="p">))</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">failed_devices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ip_selected</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">attendance_count</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;attendance count&quot;</span><span class="p">)</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">total_marcaciones</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">attendance_count</span><span class="p">)</span>
                        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                            <span class="n">attendance_count</span> <span class="o">=</span> <span class="mi">0</span>
                            <span class="n">BaseError</span><span class="p">(</span><span class="mi">3500</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Error al obtener la cantidad de marcaciones del dispositivo </span><span class="si">{</span><span class="n">ip_selected</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                        <span class="n">attendances_count_item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">attendance_count</span><span class="p">))</span>
                        <span class="n">attendances_count_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">green</span><span class="p">))</span>
            <span class="n">attendances_count_item</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="n">attendances_count_item</span><span class="o">.</span><span class="n">flags</span><span class="p">()</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsEditable</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">actual_column</span><span class="p">,</span> <span class="n">attendances_count_item</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">adjust_size_to_table</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setSortingEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">sortByColumn</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">DescendingOrder</span><span class="p">)</span>  
        <span class="bp">self</span><span class="o">.</span><span class="n">deselect_all_rows</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">center_window</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">check_attendance_files</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">BaseError</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="n">level</span><span class="o">=</span><span class="s2">&quot;warning&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_btn_retry_failed_connection</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_total_attendances</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total de Marcaciones: </span><span class="si">{</span><span class="n">total_marcaciones</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_total_attendances</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">op_terminate</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BaseErrorWithMessageBox</span><span class="p">(</span><span class="mi">3500</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.operation_with_selected_ips" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">operation_with_selected_ips</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Executes an operation with the selected IP addresses.</p>
<p>This method hides the retry button and the total attendances label before
attempting to perform the operation. It calls the parent class's 
<code>operation_with_selected_ips</code> method to execute the operation. If an 
exception occurs during the execution, it displays the retry button 
for failed connections.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Catches any exception that occurs during the operation </p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\obtain_attendances_devices_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">operation_with_selected_ips</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Executes an operation with the selected IP addresses.</span>

<span class="sd">    This method hides the retry button and the total attendances label before</span>
<span class="sd">    attempting to perform the operation. It calls the parent class&#39;s </span>
<span class="sd">    `operation_with_selected_ips` method to execute the operation. If an </span>
<span class="sd">    exception occurs during the execution, it displays the retry button </span>
<span class="sd">    for failed connections.</span>

<span class="sd">    Exceptions:</span>
<span class="sd">        Exception: Catches any exception that occurs during the operation </span>
<span class="sd">        and triggers the display of the retry button.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">btn_retry_failed_connection</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">label_total_attendances</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">operation_with_selected_ips</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_btn_retry_failed_connection</span><span class="p">()</span>
    <span class="k">return</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.parse_attendance" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">parse_attendance</span><span class="p">(</span><span class="n">line</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Parses a line of attendance data and extracts the timestamp.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>line</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A string containing attendance data, expected to have at least
        three parts separated by spaces, where the second and third parts
        represent the date and time respectively.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="datetime.datetime">datetime</span> or None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A datetime object representing the parsed timestamp if the
              line is well-formed and the date and time are valid.
              Returns None if the line is malformed or the date/time
              cannot be parsed.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\obtain_attendances_devices_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">parse_attendance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parses a line of attendance data and extracts the timestamp.</span>

<span class="sd">    Args:</span>
<span class="sd">        line (str): A string containing attendance data, expected to have at least</span>
<span class="sd">                    three parts separated by spaces, where the second and third parts</span>
<span class="sd">                    represent the date and time respectively.</span>

<span class="sd">    Returns:</span>
<span class="sd">        (datetime or None): A datetime object representing the parsed timestamp if the</span>
<span class="sd">                          line is well-formed and the date and time are valid.</span>
<span class="sd">                          Returns None if the line is malformed or the date/time</span>
<span class="sd">                          cannot be parsed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parts</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">date_str</span><span class="p">,</span> <span class="n">time_str</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">parts</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">timestamp</span><span class="p">:</span> <span class="n">datetime</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">date_str</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">time_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="s2">/%m/%Y %H:%M&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">timestamp</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.obtain_attendances_devices_dialog.ObtainAttendancesDevicesDialog.show_btn_retry_failed_connection" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">show_btn_retry_failed_connection</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Displays the "Retry Failed Connection" button if there are failed devices.</p>
<p>This method checks if the <code>failed_devices</code> attribute exists and contains 
one or more entries. If so, it makes the <code>btn_retry_failed_connection</code> 
button visible. If an exception occurs during execution, it raises a 
<code>BaseError</code> with an appropriate error code and message.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseError">BaseError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an exception occurs, it is wrapped in a <code>BaseError</code> 
       with code 3500 and the exception message.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\obtain_attendances_devices_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">show_btn_retry_failed_connection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Displays the &quot;Retry Failed Connection&quot; button if there are failed devices.</span>

<span class="sd">    This method checks if the `failed_devices` attribute exists and contains </span>
<span class="sd">    one or more entries. If so, it makes the `btn_retry_failed_connection` </span>
<span class="sd">    button visible. If an exception occurs during execution, it raises a </span>
<span class="sd">    `BaseError` with an appropriate error code and message.</span>

<span class="sd">    Raises:</span>
<span class="sd">        BaseError: If an exception occurs, it is wrapped in a `BaseError` </span>
<span class="sd">                   with code 3500 and the exception message.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>            
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">failed_devices</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">failed_devices</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">btn_retry_failed_connection</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3500</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="src.ui.operation_thread" class="doc doc-heading">
            <code>operation_thread</code>


</h3>

    <div class="doc doc-contents ">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h4 id="src.ui.operation_thread.OperationThread" class="doc doc-heading">
            <code>OperationThread</code>


</h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="PyQt5.QtCore.QThread">QThread</span></code></p>








              <details class="quote">
                <summary>Source code in <code>src\ui\operation_thread.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">OperationThread</span><span class="p">(</span><span class="n">QThread</span><span class="p">):</span>
    <span class="n">op_terminate</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">op_start_time</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">progress_updated</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>  <span class="c1"># Signal for progress</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op_func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">selected_ips</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">parent</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the OperationThread instance.</span>

<span class="sd">        Args:</span>
<span class="sd">            op_func (Callable): The operation function to be executed in the thread.</span>
<span class="sd">            selected_ips (list[str], optional): A list of selected IP addresses. Defaults to None.</span>
<span class="sd">            parent (QObject, optional): The parent object for the thread. Defaults to None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">op_func</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="n">op_func</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selected_ips</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">selected_ips</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Executes the operation function (`op_func`) with the selected IPs or without them,</span>
<span class="sd">        handles the result, and emits appropriate signals.</span>

<span class="sd">        This method is designed to run in a separate thread to perform operations</span>
<span class="sd">        asynchronously. It captures any exceptions raised during execution and</span>
<span class="sd">        raises a `BaseError` with a specific error code and message.</span>

<span class="sd">        Attributes:</span>
<span class="sd">            selected_ips (list): A list of selected IP addresses to pass to the operation</span>
<span class="sd">                function. If not provided, the operation function is called without IPs.</span>
<span class="sd">            result (dict): The result of the operation function execution.</span>

<span class="sd">        Emits:</span>
<span class="sd">            op_terminate (dict): Signal emitted with the result of the operation function</span>
<span class="sd">                or an empty dictionary if the result is `None`.</span>

<span class="sd">        Raises:</span>
<span class="sd">            BaseError: If an exception occurs during the execution of the operation</span>
<span class="sd">                function, a `BaseError` is raised with error code 3000 and the exception</span>
<span class="sd">                message.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1">#import time</span>
            <span class="c1">#start_time: float = time.time()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_ips</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">op_func</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">selected_ips</span><span class="p">,</span> <span class="n">emit_progress</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">emit_progress</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">op_func</span><span class="p">(</span><span class="n">emit_progress</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">emit_progress</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">result</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">op_terminate</span><span class="o">.</span><span class="n">emit</span><span class="p">({})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">op_terminate</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="p">)</span>
            <span class="c1">#self.op_start_time.emit(start_time)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="s2">&quot;critical&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">emit_progress</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">percent_progress</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">device_progress</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">processed_devices</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">total_devices</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Emits a progress update signal with the provided progress details.</span>

<span class="sd">        Args:</span>
<span class="sd">            percent_progress (int, optional): The overall percentage of progress completed. Defaults to None.</span>
<span class="sd">            device_progress (str, optional): A string describing the progress of the current device. Defaults to None.</span>
<span class="sd">            processed_devices (int, optional): The number of devices that have been processed so far. Defaults to None.</span>
<span class="sd">            total_devices (int, optional): The total number of devices to be processed. Defaults to None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">progress_updated</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">percent_progress</span><span class="p">,</span> <span class="n">device_progress</span><span class="p">,</span> <span class="n">processed_devices</span><span class="p">,</span> <span class="n">total_devices</span><span class="p">)</span>  <span class="c1"># Emit the progress signal</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h5 id="src.ui.operation_thread.OperationThread.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">op_func</span><span class="p">,</span> <span class="n">selected_ips</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Initializes the OperationThread instance.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>op_func</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The operation function to be executed in the thread.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>selected_ips</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of selected IP addresses. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>parent</code>
            </td>
            <td>
                  <code><span title="QObject">QObject</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The parent object for the thread. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\operation_thread.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op_func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">selected_ips</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">parent</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the OperationThread instance.</span>

<span class="sd">    Args:</span>
<span class="sd">        op_func (Callable): The operation function to be executed in the thread.</span>
<span class="sd">        selected_ips (list[str], optional): A list of selected IP addresses. Defaults to None.</span>
<span class="sd">        parent (QObject, optional): The parent object for the thread. Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">op_func</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="n">op_func</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">selected_ips</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">selected_ips</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.operation_thread.OperationThread.emit_progress" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">emit_progress</span><span class="p">(</span><span class="n">percent_progress</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">device_progress</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">processed_devices</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">total_devices</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Emits a progress update signal with the provided progress details.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>percent_progress</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The overall percentage of progress completed. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>device_progress</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A string describing the progress of the current device. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>processed_devices</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The number of devices that have been processed so far. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>total_devices</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The total number of devices to be processed. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\operation_thread.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">emit_progress</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">percent_progress</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">device_progress</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">processed_devices</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">total_devices</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Emits a progress update signal with the provided progress details.</span>

<span class="sd">    Args:</span>
<span class="sd">        percent_progress (int, optional): The overall percentage of progress completed. Defaults to None.</span>
<span class="sd">        device_progress (str, optional): A string describing the progress of the current device. Defaults to None.</span>
<span class="sd">        processed_devices (int, optional): The number of devices that have been processed so far. Defaults to None.</span>
<span class="sd">        total_devices (int, optional): The total number of devices to be processed. Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">progress_updated</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">percent_progress</span><span class="p">,</span> <span class="n">device_progress</span><span class="p">,</span> <span class="n">processed_devices</span><span class="p">,</span> <span class="n">total_devices</span><span class="p">)</span>  <span class="c1"># Emit the progress signal</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.operation_thread.OperationThread.run" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Executes the operation function (<code>op_func</code>) with the selected IPs or without them,
handles the result, and emits appropriate signals.</p>
<p>This method is designed to run in a separate thread to perform operations
asynchronously. It captures any exceptions raised during execution and
raises a <code>BaseError</code> with a specific error code and message.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="src.ui.operation_thread.OperationThread.run.selected_ips">selected_ips</span></code></td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of selected IP addresses to pass to the operation
function. If not provided, the operation function is called without IPs.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="src.ui.operation_thread.OperationThread.run.result">result</span></code></td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The result of the operation function execution.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="emits" open>
  <summary>Emits</summary>
  <p>op_terminate (dict): Signal emitted with the result of the operation function
    or an empty dictionary if the result is <code>None</code>.</p>
</details>

<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseError">BaseError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an exception occurs during the execution of the operation
function, a <code>BaseError</code> is raised with error code 3000 and the exception
message.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\operation_thread.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Executes the operation function (`op_func`) with the selected IPs or without them,</span>
<span class="sd">    handles the result, and emits appropriate signals.</span>

<span class="sd">    This method is designed to run in a separate thread to perform operations</span>
<span class="sd">    asynchronously. It captures any exceptions raised during execution and</span>
<span class="sd">    raises a `BaseError` with a specific error code and message.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        selected_ips (list): A list of selected IP addresses to pass to the operation</span>
<span class="sd">            function. If not provided, the operation function is called without IPs.</span>
<span class="sd">        result (dict): The result of the operation function execution.</span>

<span class="sd">    Emits:</span>
<span class="sd">        op_terminate (dict): Signal emitted with the result of the operation function</span>
<span class="sd">            or an empty dictionary if the result is `None`.</span>

<span class="sd">    Raises:</span>
<span class="sd">        BaseError: If an exception occurs during the execution of the operation</span>
<span class="sd">            function, a `BaseError` is raised with error code 3000 and the exception</span>
<span class="sd">            message.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1">#import time</span>
        <span class="c1">#start_time: float = time.time()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_ips</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">op_func</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">selected_ips</span><span class="p">,</span> <span class="n">emit_progress</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">emit_progress</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">op_func</span><span class="p">(</span><span class="n">emit_progress</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">emit_progress</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">result</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">op_terminate</span><span class="o">.</span><span class="n">emit</span><span class="p">({})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">op_terminate</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="p">)</span>
        <span class="c1">#self.op_start_time.emit(start_time)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="s2">&quot;critical&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="src.ui.ping_devices_dialog" class="doc doc-heading">
            <code>ping_devices_dialog</code>


</h3>

    <div class="doc doc-contents ">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h4 id="src.ui.ping_devices_dialog.PingDevicesDialog" class="doc doc-heading">
            <code>PingDevicesDialog</code>


</h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="SelectDevicesDialog (src.ui.base_select_devices_dialog.SelectDevicesDialog)" href="#src.ui.base_select_devices_dialog.SelectDevicesDialog">SelectDevicesDialog</a></code></p>








              <details class="quote">
                <summary>Source code in <code>src\ui\ping_devices_dialog.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PingDevicesDialog</span><span class="p">(</span><span class="n">SelectDevicesDialog</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the PingDevicesDialog class.</span>

<span class="sd">        This constructor sets up the dialog window for testing device connections.</span>
<span class="sd">        It initializes the user interface and sets the operation function to obtain</span>
<span class="sd">        connection information.</span>

<span class="sd">        Args:</span>
<span class="sd">            parent (QWidget, optional): The parent widget for this dialog. Defaults to None.</span>

<span class="sd">        Raises:</span>
<span class="sd">            BaseError: If an exception occurs during initialization, it raises a BaseError</span>
<span class="sd">                       with code 3501 and the exception message.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">connection_info</span> <span class="o">=</span> <span class="n">ConnectionsInfo</span><span class="p">()</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">op_function</span><span class="o">=</span><span class="n">connection_info</span><span class="o">.</span><span class="n">obtain_connections_info</span><span class="p">,</span> <span class="n">window_title</span><span class="o">=</span><span class="s2">&quot;PROBAR CONEXIONES&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">init_ui</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3501</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">init_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the user interface for the ping devices dialog.</span>

<span class="sd">        This method sets up the table headers and updates the text of the </span>
<span class="sd">        update button to &quot;Probar conexiones&quot; (Test connections).</span>

<span class="sd">        Header Labels:</span>
<span class="sd">            - Distrito: Represents the district or region.</span>
<span class="sd">            - Modelo: Represents the device model.</span>
<span class="sd">            - Punto de Marcación: Represents the marking point.</span>
<span class="sd">            - IP: Represents the IP address of the device.</span>
<span class="sd">            - ID: Represents the device identifier.</span>
<span class="sd">            - Comunicación: Represents the communication status.</span>

<span class="sd">        Overrides:</span>
<span class="sd">            This method overrides the `init_ui` method from the parent class</span>
<span class="sd">            and passes the custom header labels to it.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">header_labels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Distrito&quot;</span><span class="p">,</span> <span class="s2">&quot;Modelo&quot;</span><span class="p">,</span> <span class="s2">&quot;Punto de Marcación&quot;</span><span class="p">,</span> <span class="s2">&quot;IP&quot;</span><span class="p">,</span> <span class="s2">&quot;ID&quot;</span><span class="p">,</span> <span class="s2">&quot;Comunicación&quot;</span><span class="p">]</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">init_ui</span><span class="p">(</span><span class="n">header_labels</span><span class="o">=</span><span class="n">header_labels</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_update</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Probar conexiones&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">op_terminate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">devices</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the table widget with the connection status and device information for a list of devices.</span>
<span class="sd">        This method iterates through the rows of the table widget and updates the columns with information</span>
<span class="sd">        such as connection status, attendance count, serial number, platform, and firmware version for each device.</span>
<span class="sd">        The information is retrieved from the `devices` dictionary, which maps IP addresses to device data.</span>

<span class="sd">        Args:</span>
<span class="sd">            devices (dict, optional): A dictionary where keys are IP addresses (str) and values are dictionaries</span>
<span class="sd">                                      containing device information. Each device dictionary may include:</span>

<span class="sd">                - &quot;connection_failed&quot; (bool): Indicates if the connection failed.</span>
<span class="sd">                - &quot;device_info&quot; (dict): Contains device-specific information such as:</span>
<span class="sd">                    - &quot;attendance_count&quot; (int or str): The number of attendance records.</span>
<span class="sd">                    - &quot;serial_number&quot; (str): The serial number of the device.</span>
<span class="sd">                    - &quot;platform&quot; (str): The platform of the device.</span>
<span class="sd">                    - &quot;firmware_version&quot; (str): The firmware version of the device.</span>

<span class="sd">        Raises:</span>
<span class="sd">            BaseErrorWithMessageBox: If an exception occurs during the operation, it raises a custom error</span>
<span class="sd">                                     with a message box displaying the error details.</span>

<span class="sd">        Notes:</span>
<span class="sd">            - The method ensures that specific columns (&quot;Estado de Conexión&quot;, &quot;Cant. de Marcaciones&quot;,</span>
<span class="sd">              &quot;Número de Serie&quot;, &quot;Plataforma&quot;, &quot;Firmware&quot;) exist in the table widget before updating.</span>
<span class="sd">            - The background color of each cell is updated based on the device&#39;s connection status and</span>
<span class="sd">              availability of information.</span>
<span class="sd">            - The table widget is resized and sorted by the 6th column in descending order after updates.</span>
<span class="sd">            - All rows are deselected at the end of the operation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1">#logging.debug(devices)</span>

            <span class="c1"># Ensure the &quot;Estado de Conexión&quot; column exists</span>
            <span class="n">connection_column</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ensure_column_exists</span><span class="p">(</span><span class="s2">&quot;Estado de Conexión&quot;</span><span class="p">)</span>
            <span class="n">attendance_count_column</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ensure_column_exists</span><span class="p">(</span><span class="s2">&quot;Cant. de Marcaciones&quot;</span><span class="p">)</span>            
            <span class="n">serial_number_column</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ensure_column_exists</span><span class="p">(</span><span class="s2">&quot;Número de Serie&quot;</span><span class="p">)</span>            
            <span class="n">platform_column</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ensure_column_exists</span><span class="p">(</span><span class="s2">&quot;Plataforma&quot;</span><span class="p">)</span>
            <span class="n">firmware_version_column</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ensure_column_exists</span><span class="p">(</span><span class="s2">&quot;Firmware&quot;</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()):</span>
                <span class="n">ip_selected</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>  <span class="c1"># Column 3 holds the IP</span>
                <span class="n">connection_item</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
                <span class="n">attendance_count_item</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
                <span class="n">serial_number_item</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
                <span class="n">platform_item</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
                <span class="n">firmware_version_item</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">ip_selected</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_ips</span><span class="p">:</span>
                    <span class="n">connection_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">white</span><span class="p">))</span>
                    <span class="n">attendance_count_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">white</span><span class="p">))</span>
                    <span class="n">serial_number_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">white</span><span class="p">))</span>
                    <span class="n">platform_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">white</span><span class="p">))</span>
                    <span class="n">firmware_version_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">white</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">device</span> <span class="o">=</span> <span class="n">devices</span><span class="p">[</span><span class="n">ip_selected</span><span class="p">]</span>

                    <span class="k">if</span> <span class="n">device</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">device</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;connection_failed&quot;</span><span class="p">):</span>
                            <span class="n">connection_item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Conexión fallida&quot;</span><span class="p">)</span>
                            <span class="n">connection_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">red</span><span class="p">))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">connection_item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Conexión exitosa&quot;</span><span class="p">)</span>
                            <span class="n">connection_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">green</span><span class="p">))</span>

                        <span class="c1">#logging.debug(str(device))</span>
                        <span class="c1">#logging.debug(str(device.get(&quot;device_info&quot;, &quot;&quot;)))</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">device</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;device_info&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">device</span><span class="p">[</span><span class="s2">&quot;device_info&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;attendance_count&quot;</span><span class="p">):</span>
                            <span class="n">attendance_count_item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;No aplica&quot;</span><span class="p">)</span>
                            <span class="n">attendance_count_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">gray</span><span class="p">))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">attendance_count_item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;device_info&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;attendance_count&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)))</span>
                            <span class="n">attendance_count_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">green</span><span class="p">))</span>

                        <span class="k">if</span> <span class="ow">not</span> <span class="n">device</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;device_info&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">device</span><span class="p">[</span><span class="s2">&quot;device_info&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;serial_number&quot;</span><span class="p">):</span>
                            <span class="n">serial_number_item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;No aplica&quot;</span><span class="p">)</span>
                            <span class="n">serial_number_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">gray</span><span class="p">))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">serial_number_item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;device_info&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;serial_number&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)))</span>
                            <span class="n">serial_number_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">green</span><span class="p">))</span>

                        <span class="k">if</span> <span class="ow">not</span> <span class="n">device</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;device_info&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">device</span><span class="p">[</span><span class="s2">&quot;device_info&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;platform&quot;</span><span class="p">):</span>
                            <span class="n">platform_item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;No aplica&quot;</span><span class="p">)</span>
                            <span class="n">platform_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">gray</span><span class="p">))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">platform_item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;device_info&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;platform&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)))</span>
                            <span class="n">platform_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">green</span><span class="p">))</span>

                        <span class="k">if</span> <span class="ow">not</span> <span class="n">device</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;device_info&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">device</span><span class="p">[</span><span class="s2">&quot;device_info&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;firmware_version&quot;</span><span class="p">):</span>
                            <span class="n">firmware_version_item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;No aplica&quot;</span><span class="p">)</span>
                            <span class="n">firmware_version_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">gray</span><span class="p">))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">firmware_version_item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;device_info&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;firmware_version&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)))</span>
                            <span class="n">firmware_version_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">green</span><span class="p">))</span>

                <span class="n">connection_item</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="n">connection_item</span><span class="o">.</span><span class="n">flags</span><span class="p">()</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsEditable</span><span class="p">)</span>
                <span class="n">attendance_count_item</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="n">attendance_count_item</span><span class="o">.</span><span class="n">flags</span><span class="p">()</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsEditable</span><span class="p">)</span>
                <span class="n">serial_number_item</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="n">serial_number_item</span><span class="o">.</span><span class="n">flags</span><span class="p">()</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsEditable</span><span class="p">)</span>
                <span class="n">platform_item</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="n">platform_item</span><span class="o">.</span><span class="n">flags</span><span class="p">()</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsEditable</span><span class="p">)</span>
                <span class="n">firmware_version_item</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="n">firmware_version_item</span><span class="o">.</span><span class="n">flags</span><span class="p">()</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsEditable</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">connection_column</span><span class="p">,</span> <span class="n">connection_item</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">attendance_count_column</span><span class="p">,</span> <span class="n">attendance_count_item</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">serial_number_column</span><span class="p">,</span> <span class="n">serial_number_item</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">platform_column</span><span class="p">,</span> <span class="n">platform_item</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">firmware_version_column</span><span class="p">,</span> <span class="n">firmware_version_item</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">adjust_size_to_table</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setSortingEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">sortByColumn</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">DescendingOrder</span><span class="p">)</span>  

            <span class="bp">self</span><span class="o">.</span><span class="n">deselect_all_rows</span><span class="p">()</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">op_terminate</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BaseErrorWithMessageBox</span><span class="p">(</span><span class="mi">3500</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h5 id="src.ui.ping_devices_dialog.PingDevicesDialog.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Initializes the PingDevicesDialog class.</p>
<p>This constructor sets up the dialog window for testing device connections.
It initializes the user interface and sets the operation function to obtain
connection information.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>parent</code>
            </td>
            <td>
                  <code><span title="QWidget">QWidget</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The parent widget for this dialog. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseError">BaseError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an exception occurs during initialization, it raises a BaseError
       with code 3501 and the exception message.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\ping_devices_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the PingDevicesDialog class.</span>

<span class="sd">    This constructor sets up the dialog window for testing device connections.</span>
<span class="sd">    It initializes the user interface and sets the operation function to obtain</span>
<span class="sd">    connection information.</span>

<span class="sd">    Args:</span>
<span class="sd">        parent (QWidget, optional): The parent widget for this dialog. Defaults to None.</span>

<span class="sd">    Raises:</span>
<span class="sd">        BaseError: If an exception occurs during initialization, it raises a BaseError</span>
<span class="sd">                   with code 3501 and the exception message.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">connection_info</span> <span class="o">=</span> <span class="n">ConnectionsInfo</span><span class="p">()</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">op_function</span><span class="o">=</span><span class="n">connection_info</span><span class="o">.</span><span class="n">obtain_connections_info</span><span class="p">,</span> <span class="n">window_title</span><span class="o">=</span><span class="s2">&quot;PROBAR CONEXIONES&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_ui</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3501</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.ping_devices_dialog.PingDevicesDialog.init_ui" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">init_ui</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Initializes the user interface for the ping devices dialog.</p>
<p>This method sets up the table headers and updates the text of the 
update button to "Probar conexiones" (Test connections).</p>


<details class="header-labels" open>
  <summary>Header Labels</summary>
  <ul>
<li>Distrito: Represents the district or region.</li>
<li>Modelo: Represents the device model.</li>
<li>Punto de Marcación: Represents the marking point.</li>
<li>IP: Represents the IP address of the device.</li>
<li>ID: Represents the device identifier.</li>
<li>Comunicación: Represents the communication status.</li>
</ul>
</details>

<details class="overrides" open>
  <summary>Overrides</summary>
  <p>This method overrides the <code>init_ui</code> method from the parent class
and passes the custom header labels to it.</p>
</details>

            <details class="quote">
              <summary>Source code in <code>src\ui\ping_devices_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">init_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the user interface for the ping devices dialog.</span>

<span class="sd">    This method sets up the table headers and updates the text of the </span>
<span class="sd">    update button to &quot;Probar conexiones&quot; (Test connections).</span>

<span class="sd">    Header Labels:</span>
<span class="sd">        - Distrito: Represents the district or region.</span>
<span class="sd">        - Modelo: Represents the device model.</span>
<span class="sd">        - Punto de Marcación: Represents the marking point.</span>
<span class="sd">        - IP: Represents the IP address of the device.</span>
<span class="sd">        - ID: Represents the device identifier.</span>
<span class="sd">        - Comunicación: Represents the communication status.</span>

<span class="sd">    Overrides:</span>
<span class="sd">        This method overrides the `init_ui` method from the parent class</span>
<span class="sd">        and passes the custom header labels to it.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">header_labels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Distrito&quot;</span><span class="p">,</span> <span class="s2">&quot;Modelo&quot;</span><span class="p">,</span> <span class="s2">&quot;Punto de Marcación&quot;</span><span class="p">,</span> <span class="s2">&quot;IP&quot;</span><span class="p">,</span> <span class="s2">&quot;ID&quot;</span><span class="p">,</span> <span class="s2">&quot;Comunicación&quot;</span><span class="p">]</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">init_ui</span><span class="p">(</span><span class="n">header_labels</span><span class="o">=</span><span class="n">header_labels</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">btn_update</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Probar conexiones&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.ping_devices_dialog.PingDevicesDialog.op_terminate" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">op_terminate</span><span class="p">(</span><span class="n">devices</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Updates the table widget with the connection status and device information for a list of devices.
This method iterates through the rows of the table widget and updates the columns with information
such as connection status, attendance count, serial number, platform, and firmware version for each device.
The information is retrieved from the <code>devices</code> dictionary, which maps IP addresses to device data.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>devices</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary where keys are IP addresses (str) and values are dictionaries
                      containing device information. Each device dictionary may include:</p>
<ul>
<li>"connection_failed" (bool): Indicates if the connection failed.</li>
<li>"device_info" (dict): Contains device-specific information such as:<ul>
<li>"attendance_count" (int or str): The number of attendance records.</li>
<li>"serial_number" (str): The serial number of the device.</li>
<li>"platform" (str): The platform of the device.</li>
<li>"firmware_version" (str): The firmware version of the device.</li>
</ul>
</li>
</ul>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseErrorWithMessageBox">BaseErrorWithMessageBox</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an exception occurs during the operation, it raises a custom error
                     with a message box displaying the error details.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="notes" open>
  <summary>Notes</summary>
  <ul>
<li>The method ensures that specific columns ("Estado de Conexión", "Cant. de Marcaciones",
  "Número de Serie", "Plataforma", "Firmware") exist in the table widget before updating.</li>
<li>The background color of each cell is updated based on the device's connection status and
  availability of information.</li>
<li>The table widget is resized and sorted by the 6th column in descending order after updates.</li>
<li>All rows are deselected at the end of the operation.</li>
</ul>
</details>

            <details class="quote">
              <summary>Source code in <code>src\ui\ping_devices_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">op_terminate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">devices</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Updates the table widget with the connection status and device information for a list of devices.</span>
<span class="sd">    This method iterates through the rows of the table widget and updates the columns with information</span>
<span class="sd">    such as connection status, attendance count, serial number, platform, and firmware version for each device.</span>
<span class="sd">    The information is retrieved from the `devices` dictionary, which maps IP addresses to device data.</span>

<span class="sd">    Args:</span>
<span class="sd">        devices (dict, optional): A dictionary where keys are IP addresses (str) and values are dictionaries</span>
<span class="sd">                                  containing device information. Each device dictionary may include:</span>

<span class="sd">            - &quot;connection_failed&quot; (bool): Indicates if the connection failed.</span>
<span class="sd">            - &quot;device_info&quot; (dict): Contains device-specific information such as:</span>
<span class="sd">                - &quot;attendance_count&quot; (int or str): The number of attendance records.</span>
<span class="sd">                - &quot;serial_number&quot; (str): The serial number of the device.</span>
<span class="sd">                - &quot;platform&quot; (str): The platform of the device.</span>
<span class="sd">                - &quot;firmware_version&quot; (str): The firmware version of the device.</span>

<span class="sd">    Raises:</span>
<span class="sd">        BaseErrorWithMessageBox: If an exception occurs during the operation, it raises a custom error</span>
<span class="sd">                                 with a message box displaying the error details.</span>

<span class="sd">    Notes:</span>
<span class="sd">        - The method ensures that specific columns (&quot;Estado de Conexión&quot;, &quot;Cant. de Marcaciones&quot;,</span>
<span class="sd">          &quot;Número de Serie&quot;, &quot;Plataforma&quot;, &quot;Firmware&quot;) exist in the table widget before updating.</span>
<span class="sd">        - The background color of each cell is updated based on the device&#39;s connection status and</span>
<span class="sd">          availability of information.</span>
<span class="sd">        - The table widget is resized and sorted by the 6th column in descending order after updates.</span>
<span class="sd">        - All rows are deselected at the end of the operation.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1">#logging.debug(devices)</span>

        <span class="c1"># Ensure the &quot;Estado de Conexión&quot; column exists</span>
        <span class="n">connection_column</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ensure_column_exists</span><span class="p">(</span><span class="s2">&quot;Estado de Conexión&quot;</span><span class="p">)</span>
        <span class="n">attendance_count_column</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ensure_column_exists</span><span class="p">(</span><span class="s2">&quot;Cant. de Marcaciones&quot;</span><span class="p">)</span>            
        <span class="n">serial_number_column</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ensure_column_exists</span><span class="p">(</span><span class="s2">&quot;Número de Serie&quot;</span><span class="p">)</span>            
        <span class="n">platform_column</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ensure_column_exists</span><span class="p">(</span><span class="s2">&quot;Plataforma&quot;</span><span class="p">)</span>
        <span class="n">firmware_version_column</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ensure_column_exists</span><span class="p">(</span><span class="s2">&quot;Firmware&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()):</span>
            <span class="n">ip_selected</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>  <span class="c1"># Column 3 holds the IP</span>
            <span class="n">connection_item</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">attendance_count_item</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">serial_number_item</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">platform_item</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">firmware_version_item</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">ip_selected</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_ips</span><span class="p">:</span>
                <span class="n">connection_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">white</span><span class="p">))</span>
                <span class="n">attendance_count_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">white</span><span class="p">))</span>
                <span class="n">serial_number_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">white</span><span class="p">))</span>
                <span class="n">platform_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">white</span><span class="p">))</span>
                <span class="n">firmware_version_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">white</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">device</span> <span class="o">=</span> <span class="n">devices</span><span class="p">[</span><span class="n">ip_selected</span><span class="p">]</span>

                <span class="k">if</span> <span class="n">device</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">device</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;connection_failed&quot;</span><span class="p">):</span>
                        <span class="n">connection_item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Conexión fallida&quot;</span><span class="p">)</span>
                        <span class="n">connection_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">red</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">connection_item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Conexión exitosa&quot;</span><span class="p">)</span>
                        <span class="n">connection_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">green</span><span class="p">))</span>

                    <span class="c1">#logging.debug(str(device))</span>
                    <span class="c1">#logging.debug(str(device.get(&quot;device_info&quot;, &quot;&quot;)))</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">device</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;device_info&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">device</span><span class="p">[</span><span class="s2">&quot;device_info&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;attendance_count&quot;</span><span class="p">):</span>
                        <span class="n">attendance_count_item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;No aplica&quot;</span><span class="p">)</span>
                        <span class="n">attendance_count_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">gray</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">attendance_count_item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;device_info&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;attendance_count&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)))</span>
                        <span class="n">attendance_count_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">green</span><span class="p">))</span>

                    <span class="k">if</span> <span class="ow">not</span> <span class="n">device</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;device_info&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">device</span><span class="p">[</span><span class="s2">&quot;device_info&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;serial_number&quot;</span><span class="p">):</span>
                        <span class="n">serial_number_item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;No aplica&quot;</span><span class="p">)</span>
                        <span class="n">serial_number_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">gray</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">serial_number_item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;device_info&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;serial_number&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)))</span>
                        <span class="n">serial_number_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">green</span><span class="p">))</span>

                    <span class="k">if</span> <span class="ow">not</span> <span class="n">device</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;device_info&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">device</span><span class="p">[</span><span class="s2">&quot;device_info&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;platform&quot;</span><span class="p">):</span>
                        <span class="n">platform_item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;No aplica&quot;</span><span class="p">)</span>
                        <span class="n">platform_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">gray</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">platform_item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;device_info&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;platform&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)))</span>
                        <span class="n">platform_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">green</span><span class="p">))</span>

                    <span class="k">if</span> <span class="ow">not</span> <span class="n">device</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;device_info&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">device</span><span class="p">[</span><span class="s2">&quot;device_info&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;firmware_version&quot;</span><span class="p">):</span>
                        <span class="n">firmware_version_item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;No aplica&quot;</span><span class="p">)</span>
                        <span class="n">firmware_version_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">gray</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">firmware_version_item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;device_info&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;firmware_version&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)))</span>
                        <span class="n">firmware_version_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">green</span><span class="p">))</span>

            <span class="n">connection_item</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="n">connection_item</span><span class="o">.</span><span class="n">flags</span><span class="p">()</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsEditable</span><span class="p">)</span>
            <span class="n">attendance_count_item</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="n">attendance_count_item</span><span class="o">.</span><span class="n">flags</span><span class="p">()</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsEditable</span><span class="p">)</span>
            <span class="n">serial_number_item</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="n">serial_number_item</span><span class="o">.</span><span class="n">flags</span><span class="p">()</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsEditable</span><span class="p">)</span>
            <span class="n">platform_item</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="n">platform_item</span><span class="o">.</span><span class="n">flags</span><span class="p">()</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsEditable</span><span class="p">)</span>
            <span class="n">firmware_version_item</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="n">firmware_version_item</span><span class="o">.</span><span class="n">flags</span><span class="p">()</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsEditable</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">connection_column</span><span class="p">,</span> <span class="n">connection_item</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">attendance_count_column</span><span class="p">,</span> <span class="n">attendance_count_item</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">serial_number_column</span><span class="p">,</span> <span class="n">serial_number_item</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">platform_column</span><span class="p">,</span> <span class="n">platform_item</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">firmware_version_column</span><span class="p">,</span> <span class="n">firmware_version_item</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">adjust_size_to_table</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setSortingEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">sortByColumn</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">DescendingOrder</span><span class="p">)</span>  

        <span class="bp">self</span><span class="o">.</span><span class="n">deselect_all_rows</span><span class="p">()</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">op_terminate</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BaseErrorWithMessageBox</span><span class="p">(</span><span class="mi">3500</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="src.ui.restart_devices_dialog" class="doc doc-heading">
            <code>restart_devices_dialog</code>


</h3>

    <div class="doc doc-contents ">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h4 id="src.ui.restart_devices_dialog.RestartDevicesDialog" class="doc doc-heading">
            <code>RestartDevicesDialog</code>


</h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="SelectDevicesDialog (src.ui.base_select_devices_dialog.SelectDevicesDialog)" href="#src.ui.base_select_devices_dialog.SelectDevicesDialog">SelectDevicesDialog</a></code></p>








              <details class="quote">
                <summary>Source code in <code>src\ui\restart_devices_dialog.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">RestartDevicesDialog</span><span class="p">(</span><span class="n">SelectDevicesDialog</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the RestartDevicesDialog class.</span>

<span class="sd">        Args:</span>
<span class="sd">            parent (QWidget, optional): The parent widget for this dialog. Defaults to None.</span>

<span class="sd">        Raises:</span>
<span class="sd">            BaseError: If an exception occurs during initialization, it raises a BaseError</span>
<span class="sd">                       with code 3501 and the exception message.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">restart_manager</span><span class="p">:</span> <span class="n">RestartManager</span> <span class="o">=</span> <span class="n">RestartManager</span><span class="p">()</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">op_function</span><span class="o">=</span><span class="n">restart_manager</span><span class="o">.</span><span class="n">restart_devices</span><span class="p">,</span> <span class="n">window_title</span><span class="o">=</span><span class="s2">&quot;REINICIAR DISPOSITIVOS&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">init_ui</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3501</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">init_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the user interface for the restart devices dialog.</span>

<span class="sd">        This method sets up the table headers with predefined labels and updates</span>
<span class="sd">        the text of the update button to indicate its purpose as restarting devices.</span>

<span class="sd">        Header Labels:</span>
<span class="sd">            - &quot;Distrito&quot;: Represents the district information.</span>
<span class="sd">            - &quot;Modelo&quot;: Represents the device model.</span>
<span class="sd">            - &quot;Punto de Marcación&quot;: Represents the marking point.</span>
<span class="sd">            - &quot;IP&quot;: Represents the IP address of the device.</span>
<span class="sd">            - &quot;ID&quot;: Represents the device ID.</span>
<span class="sd">            - &quot;Comunicación&quot;: Represents the communication status of the device.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">header_labels</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Distrito&quot;</span><span class="p">,</span> <span class="s2">&quot;Modelo&quot;</span><span class="p">,</span> <span class="s2">&quot;Punto de Marcación&quot;</span><span class="p">,</span> <span class="s2">&quot;IP&quot;</span><span class="p">,</span> <span class="s2">&quot;ID&quot;</span><span class="p">,</span> <span class="s2">&quot;Comunicación&quot;</span><span class="p">]</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">init_ui</span><span class="p">(</span><span class="n">header_labels</span><span class="o">=</span><span class="n">header_labels</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_update</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Reiniciar dispositivos&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">op_terminate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">devices_errors</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles the termination operation for devices, displaying appropriate messages</span>
<span class="sd">        based on the presence of errors.</span>

<span class="sd">        Args:</span>
<span class="sd">            devices_errors (dict[str, dict[str, bool]]): A dictionary containing device error</span>
<span class="sd">                information. The keys are device identifiers, and the values are dictionaries</span>
<span class="sd">                with error details. Defaults to None.</span>

<span class="sd">        Behavior:</span>
<span class="sd">            - If `devices_errors` contains entries, an error message box is displayed with</span>
<span class="sd">              the list of problematic devices.</span>
<span class="sd">            - If `devices_errors` is empty or None, an information message box is displayed</span>
<span class="sd">              indicating successful device restarts.</span>
<span class="sd">            - Logs the `devices_errors` dictionary for debugging purposes.</span>
<span class="sd">            - Calls the parent class&#39;s `op_terminate` method after handling the operation.</span>

<span class="sd">        Exceptions:</span>
<span class="sd">            - Logs any exceptions that occur during the execution of the method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1">#logging.debug(devices_errors)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">devices_errors</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">error</span><span class="p">:</span> <span class="n">BaseError</span> <span class="o">=</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">devices_errors</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">error</span><span class="o">.</span><span class="n">show_message_box</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Éxito&quot;</span><span class="p">,</span> <span class="s2">&quot;Dispositivos reiniciados correctamente&quot;</span><span class="p">)</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">op_terminate</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h5 id="src.ui.restart_devices_dialog.RestartDevicesDialog.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Initializes the RestartDevicesDialog class.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>parent</code>
            </td>
            <td>
                  <code><span title="QWidget">QWidget</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The parent widget for this dialog. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseError">BaseError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an exception occurs during initialization, it raises a BaseError
       with code 3501 and the exception message.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\restart_devices_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the RestartDevicesDialog class.</span>

<span class="sd">    Args:</span>
<span class="sd">        parent (QWidget, optional): The parent widget for this dialog. Defaults to None.</span>

<span class="sd">    Raises:</span>
<span class="sd">        BaseError: If an exception occurs during initialization, it raises a BaseError</span>
<span class="sd">                   with code 3501 and the exception message.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">restart_manager</span><span class="p">:</span> <span class="n">RestartManager</span> <span class="o">=</span> <span class="n">RestartManager</span><span class="p">()</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">op_function</span><span class="o">=</span><span class="n">restart_manager</span><span class="o">.</span><span class="n">restart_devices</span><span class="p">,</span> <span class="n">window_title</span><span class="o">=</span><span class="s2">&quot;REINICIAR DISPOSITIVOS&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_ui</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3501</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.restart_devices_dialog.RestartDevicesDialog.init_ui" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">init_ui</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Initializes the user interface for the restart devices dialog.</p>
<p>This method sets up the table headers with predefined labels and updates
the text of the update button to indicate its purpose as restarting devices.</p>


<details class="header-labels" open>
  <summary>Header Labels</summary>
  <ul>
<li>"Distrito": Represents the district information.</li>
<li>"Modelo": Represents the device model.</li>
<li>"Punto de Marcación": Represents the marking point.</li>
<li>"IP": Represents the IP address of the device.</li>
<li>"ID": Represents the device ID.</li>
<li>"Comunicación": Represents the communication status of the device.</li>
</ul>
</details>

            <details class="quote">
              <summary>Source code in <code>src\ui\restart_devices_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">init_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the user interface for the restart devices dialog.</span>

<span class="sd">    This method sets up the table headers with predefined labels and updates</span>
<span class="sd">    the text of the update button to indicate its purpose as restarting devices.</span>

<span class="sd">    Header Labels:</span>
<span class="sd">        - &quot;Distrito&quot;: Represents the district information.</span>
<span class="sd">        - &quot;Modelo&quot;: Represents the device model.</span>
<span class="sd">        - &quot;Punto de Marcación&quot;: Represents the marking point.</span>
<span class="sd">        - &quot;IP&quot;: Represents the IP address of the device.</span>
<span class="sd">        - &quot;ID&quot;: Represents the device ID.</span>
<span class="sd">        - &quot;Comunicación&quot;: Represents the communication status of the device.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">header_labels</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Distrito&quot;</span><span class="p">,</span> <span class="s2">&quot;Modelo&quot;</span><span class="p">,</span> <span class="s2">&quot;Punto de Marcación&quot;</span><span class="p">,</span> <span class="s2">&quot;IP&quot;</span><span class="p">,</span> <span class="s2">&quot;ID&quot;</span><span class="p">,</span> <span class="s2">&quot;Comunicación&quot;</span><span class="p">]</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">init_ui</span><span class="p">(</span><span class="n">header_labels</span><span class="o">=</span><span class="n">header_labels</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">btn_update</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Reiniciar dispositivos&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.restart_devices_dialog.RestartDevicesDialog.op_terminate" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">op_terminate</span><span class="p">(</span><span class="n">devices_errors</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Handles the termination operation for devices, displaying appropriate messages
based on the presence of errors.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>devices_errors</code>
            </td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="dict">dict</span>[<span title="str">str</span>, <span title="bool">bool</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary containing device error
information. The keys are device identifiers, and the values are dictionaries
with error details. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


<details class="behavior" open>
  <summary>Behavior</summary>
  <ul>
<li>If <code>devices_errors</code> contains entries, an error message box is displayed with
  the list of problematic devices.</li>
<li>If <code>devices_errors</code> is empty or None, an information message box is displayed
  indicating successful device restarts.</li>
<li>Logs the <code>devices_errors</code> dictionary for debugging purposes.</li>
<li>Calls the parent class's <code>op_terminate</code> method after handling the operation.</li>
</ul>
</details>

            <details class="quote">
              <summary>Source code in <code>src\ui\restart_devices_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">op_terminate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">devices_errors</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the termination operation for devices, displaying appropriate messages</span>
<span class="sd">    based on the presence of errors.</span>

<span class="sd">    Args:</span>
<span class="sd">        devices_errors (dict[str, dict[str, bool]]): A dictionary containing device error</span>
<span class="sd">            information. The keys are device identifiers, and the values are dictionaries</span>
<span class="sd">            with error details. Defaults to None.</span>

<span class="sd">    Behavior:</span>
<span class="sd">        - If `devices_errors` contains entries, an error message box is displayed with</span>
<span class="sd">          the list of problematic devices.</span>
<span class="sd">        - If `devices_errors` is empty or None, an information message box is displayed</span>
<span class="sd">          indicating successful device restarts.</span>
<span class="sd">        - Logs the `devices_errors` dictionary for debugging purposes.</span>
<span class="sd">        - Calls the parent class&#39;s `op_terminate` method after handling the operation.</span>

<span class="sd">    Exceptions:</span>
<span class="sd">        - Logs any exceptions that occur during the execution of the method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1">#logging.debug(devices_errors)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">devices_errors</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">error</span><span class="p">:</span> <span class="n">BaseError</span> <span class="o">=</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">devices_errors</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">error</span><span class="o">.</span><span class="n">show_message_box</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Éxito&quot;</span><span class="p">,</span> <span class="s2">&quot;Dispositivos reiniciados correctamente&quot;</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">op_terminate</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="src.ui.update_time_device_dialog" class="doc doc-heading">
            <code>update_time_device_dialog</code>


</h3>

    <div class="doc doc-contents ">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h4 id="src.ui.update_time_device_dialog.UpdateTimeDeviceDialog" class="doc doc-heading">
            <code>UpdateTimeDeviceDialog</code>


</h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="SelectDevicesDialog (src.ui.base_select_devices_dialog.SelectDevicesDialog)" href="#src.ui.base_select_devices_dialog.SelectDevicesDialog">SelectDevicesDialog</a></code></p>








              <details class="quote">
                <summary>Source code in <code>src\ui\update_time_device_dialog.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">UpdateTimeDeviceDialog</span><span class="p">(</span><span class="n">SelectDevicesDialog</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the UpdateTimeDeviceDialog class.</span>

<span class="sd">        Args:</span>
<span class="sd">            parent (Optional[QWidget]): The parent widget for this dialog. Defaults to None.</span>

<span class="sd">        Attributes:</span>
<span class="sd">            device_info (dict[str, bool]): A dictionary containing device information loaded from `load_device_info()`.</span>

<span class="sd">        Raises:</span>
<span class="sd">            BaseError: If an exception occurs during initialization, it raises a BaseError with code 3501 and the exception message.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">hour_manager</span> <span class="o">=</span> <span class="n">HourManager</span><span class="p">()</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">op_function</span><span class="o">=</span><span class="n">hour_manager</span><span class="o">.</span><span class="n">manage_hour_devices</span><span class="p">,</span> <span class="n">window_title</span><span class="o">=</span><span class="s2">&quot;ACTUALIZAR HORA&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">device_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_device_info</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">init_ui</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3501</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">init_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the user interface for the update time device dialog.</span>

<span class="sd">        This method sets up the table headers with predefined labels and updates</span>
<span class="sd">        the text of the update button to &quot;Actualizar hora&quot;.</span>

<span class="sd">        Header Labels:</span>
<span class="sd">            - Distrito</span>
<span class="sd">            - Modelo</span>
<span class="sd">            - Punto de Marcación</span>
<span class="sd">            - IP</span>
<span class="sd">            - ID</span>
<span class="sd">            - Comunicación</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">header_labels</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Distrito&quot;</span><span class="p">,</span> <span class="s2">&quot;Modelo&quot;</span><span class="p">,</span> <span class="s2">&quot;Punto de Marcación&quot;</span><span class="p">,</span> <span class="s2">&quot;IP&quot;</span><span class="p">,</span> <span class="s2">&quot;ID&quot;</span><span class="p">,</span> <span class="s2">&quot;Comunicación&quot;</span><span class="p">]</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">init_ui</span><span class="p">(</span><span class="n">header_labels</span><span class="o">=</span><span class="n">header_labels</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_update</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Actualizar hora&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">load_device_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Loads device information from a file and returns it as a dictionary.</span>

<span class="sd">        The method reads the file &quot;info_devices.txt&quot; line by line, extracts the IP address</span>
<span class="sd">        and battery status from each line, and stores them in a dictionary. The IP address</span>
<span class="sd">        is used as the key, and the battery status (a boolean) is used as the value.</span>

<span class="sd">        Returns:</span>
<span class="sd">            (dict[str, bool]): A dictionary where the keys are IP addresses (str) and the</span>
<span class="sd">                            values are battery statuses (bool).</span>

<span class="sd">        Raises:</span>
<span class="sd">            BaseErrorWithMessageBox: If an error occurs while reading the file, an exception</span>
<span class="sd">            is raised with an error code and the exception message.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">device_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;info_devices.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">file</span><span class="p">:</span>
                    <span class="n">parts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; - &quot;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>
                        <span class="n">ip</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
                        <span class="n">battery_status</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;True&quot;</span>
                        <span class="n">device_info</span><span class="p">[</span><span class="n">ip</span><span class="p">]</span> <span class="o">=</span> <span class="n">battery_status</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BaseErrorWithMessageBox</span><span class="p">(</span><span class="mi">3001</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">device_info</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">op_terminate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">devices_errors</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the table widget with the connection and battery status of devices.</span>
<span class="sd">        This method processes the `devices_errors` dictionary to update the table widget</span>
<span class="sd">        with the connection and battery status for each device. It ensures that the required</span>
<span class="sd">        columns exist in the table, updates the rows with the appropriate status and colors,</span>
<span class="sd">        and adjusts the table&#39;s size and sorting.</span>

<span class="sd">        Args:</span>
<span class="sd">            devices_errors (dict[str, dict[str, bool]], optional): A dictionary where the keys</span>
<span class="sd">                are device IP addresses, and the values are dictionaries containing error</span>
<span class="sd">                statuses for the device. The inner dictionary can have the following keys:</span>

<span class="sd">                - &quot;connection failed&quot; (bool): Indicates if the connection to the device failed.</span>
<span class="sd">                - &quot;battery failing&quot; (bool): Indicates if the device&#39;s battery is failing.</span>

<span class="sd">                Defaults to None.</span>

<span class="sd">        Raises:</span>
<span class="sd">            BaseErrorWithMessageBox: If an exception occurs during the operation, it raises</span>
<span class="sd">                a custom error with a message box displaying the error details.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#logging.debug(devices_errors)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">connection_column</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ensure_column_exists</span><span class="p">(</span><span class="s2">&quot;Estado de Conexión&quot;</span><span class="p">)</span>
            <span class="n">battery_column</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ensure_column_exists</span><span class="p">(</span><span class="s2">&quot;Estado de Pila&quot;</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()):</span>
                <span class="n">ip_selected</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>  <span class="c1"># Column 3 holds the IP</span>
                <span class="n">connection_item</span><span class="p">:</span> <span class="n">QTableWidgetItem</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
                <span class="n">battery_item</span><span class="p">:</span> <span class="n">QTableWidgetItem</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">ip_selected</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_ips</span><span class="p">:</span>
                    <span class="n">connection_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">white</span><span class="p">))</span>
                    <span class="n">battery_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">white</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">device</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">devices_errors</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ip_selected</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">device</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">device</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;connection failed&quot;</span><span class="p">):</span>
                            <span class="n">connection_item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Conexión fallida&quot;</span><span class="p">)</span>
                            <span class="n">connection_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">red</span><span class="p">))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">connection_item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Conexión exitosa&quot;</span><span class="p">)</span>
                            <span class="n">connection_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">green</span><span class="p">))</span>
                        <span class="k">if</span> <span class="n">device</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;connection failed&quot;</span><span class="p">):</span>
                            <span class="n">battery_item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;No aplica&quot;</span><span class="p">)</span>
                            <span class="n">battery_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">gray</span><span class="p">))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">battery_failing</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;battery failing&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">device_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ip_selected</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">battery_failing</span><span class="p">:</span>
                                <span class="n">battery_item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Pila fallando&quot;</span><span class="p">)</span>
                                <span class="n">battery_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">red</span><span class="p">))</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">battery_item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Pila funcionando&quot;</span><span class="p">)</span>
                                <span class="n">battery_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">green</span><span class="p">))</span>
                <span class="n">connection_item</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="n">connection_item</span><span class="o">.</span><span class="n">flags</span><span class="p">()</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsEditable</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">connection_column</span><span class="p">,</span> <span class="n">connection_item</span><span class="p">)</span>
                <span class="n">battery_item</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="n">battery_item</span><span class="o">.</span><span class="n">flags</span><span class="p">()</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsEditable</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">battery_column</span><span class="p">,</span> <span class="n">battery_item</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">adjust_size_to_table</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setSortingEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">sortByColumn</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">DescendingOrder</span><span class="p">)</span>    

            <span class="bp">self</span><span class="o">.</span><span class="n">deselect_all_rows</span><span class="p">()</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">op_terminate</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BaseErrorWithMessageBox</span><span class="p">(</span><span class="mi">3500</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h5 id="src.ui.update_time_device_dialog.UpdateTimeDeviceDialog.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Initializes the UpdateTimeDeviceDialog class.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>parent</code>
            </td>
            <td>
                  <code><span title="Optional">Optional</span>[<span title="QWidget">QWidget</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The parent widget for this dialog. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="src.ui.update_time_device_dialog.UpdateTimeDeviceDialog.__init__.device_info">device_info</span></code></td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="bool">bool</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary containing device information loaded from <code>load_device_info()</code>.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseError">BaseError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an exception occurs during initialization, it raises a BaseError with code 3501 and the exception message.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\update_time_device_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the UpdateTimeDeviceDialog class.</span>

<span class="sd">    Args:</span>
<span class="sd">        parent (Optional[QWidget]): The parent widget for this dialog. Defaults to None.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        device_info (dict[str, bool]): A dictionary containing device information loaded from `load_device_info()`.</span>

<span class="sd">    Raises:</span>
<span class="sd">        BaseError: If an exception occurs during initialization, it raises a BaseError with code 3501 and the exception message.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">hour_manager</span> <span class="o">=</span> <span class="n">HourManager</span><span class="p">()</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">op_function</span><span class="o">=</span><span class="n">hour_manager</span><span class="o">.</span><span class="n">manage_hour_devices</span><span class="p">,</span> <span class="n">window_title</span><span class="o">=</span><span class="s2">&quot;ACTUALIZAR HORA&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">device_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_device_info</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_ui</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BaseError</span><span class="p">(</span><span class="mi">3501</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.update_time_device_dialog.UpdateTimeDeviceDialog.init_ui" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">init_ui</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Initializes the user interface for the update time device dialog.</p>
<p>This method sets up the table headers with predefined labels and updates
the text of the update button to "Actualizar hora".</p>


<details class="header-labels" open>
  <summary>Header Labels</summary>
  <ul>
<li>Distrito</li>
<li>Modelo</li>
<li>Punto de Marcación</li>
<li>IP</li>
<li>ID</li>
<li>Comunicación</li>
</ul>
</details>

            <details class="quote">
              <summary>Source code in <code>src\ui\update_time_device_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">init_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the user interface for the update time device dialog.</span>

<span class="sd">    This method sets up the table headers with predefined labels and updates</span>
<span class="sd">    the text of the update button to &quot;Actualizar hora&quot;.</span>

<span class="sd">    Header Labels:</span>
<span class="sd">        - Distrito</span>
<span class="sd">        - Modelo</span>
<span class="sd">        - Punto de Marcación</span>
<span class="sd">        - IP</span>
<span class="sd">        - ID</span>
<span class="sd">        - Comunicación</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">header_labels</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Distrito&quot;</span><span class="p">,</span> <span class="s2">&quot;Modelo&quot;</span><span class="p">,</span> <span class="s2">&quot;Punto de Marcación&quot;</span><span class="p">,</span> <span class="s2">&quot;IP&quot;</span><span class="p">,</span> <span class="s2">&quot;ID&quot;</span><span class="p">,</span> <span class="s2">&quot;Comunicación&quot;</span><span class="p">]</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">init_ui</span><span class="p">(</span><span class="n">header_labels</span><span class="o">=</span><span class="n">header_labels</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">btn_update</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Actualizar hora&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.update_time_device_dialog.UpdateTimeDeviceDialog.load_device_info" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_device_info</span><span class="p">()</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Loads device information from a file and returns it as a dictionary.</p>
<p>The method reads the file "info_devices.txt" line by line, extracts the IP address
and battery status from each line, and stores them in a dictionary. The IP address
is used as the key, and the battery status (a boolean) is used as the value.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="bool">bool</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary where the keys are IP addresses (str) and the
            values are battery statuses (bool).</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseErrorWithMessageBox">BaseErrorWithMessageBox</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an error occurs while reading the file, an exception</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\update_time_device_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_device_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Loads device information from a file and returns it as a dictionary.</span>

<span class="sd">    The method reads the file &quot;info_devices.txt&quot; line by line, extracts the IP address</span>
<span class="sd">    and battery status from each line, and stores them in a dictionary. The IP address</span>
<span class="sd">    is used as the key, and the battery status (a boolean) is used as the value.</span>

<span class="sd">    Returns:</span>
<span class="sd">        (dict[str, bool]): A dictionary where the keys are IP addresses (str) and the</span>
<span class="sd">                        values are battery statuses (bool).</span>

<span class="sd">    Raises:</span>
<span class="sd">        BaseErrorWithMessageBox: If an error occurs while reading the file, an exception</span>
<span class="sd">        is raised with an error code and the exception message.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">device_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;info_devices.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">file</span><span class="p">:</span>
                <span class="n">parts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; - &quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>
                    <span class="n">ip</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
                    <span class="n">battery_status</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;True&quot;</span>
                    <span class="n">device_info</span><span class="p">[</span><span class="n">ip</span><span class="p">]</span> <span class="o">=</span> <span class="n">battery_status</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BaseErrorWithMessageBox</span><span class="p">(</span><span class="mi">3001</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">device_info</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="src.ui.update_time_device_dialog.UpdateTimeDeviceDialog.op_terminate" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">op_terminate</span><span class="p">(</span><span class="n">devices_errors</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Updates the table widget with the connection and battery status of devices.
This method processes the <code>devices_errors</code> dictionary to update the table widget
with the connection and battery status for each device. It ensures that the required
columns exist in the table, updates the rows with the appropriate status and colors,
and adjusts the table's size and sorting.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>devices_errors</code>
            </td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="dict">dict</span>[<span title="str">str</span>, <span title="bool">bool</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary where the keys
are device IP addresses, and the values are dictionaries containing error
statuses for the device. The inner dictionary can have the following keys:</p>
<ul>
<li>"connection failed" (bool): Indicates if the connection to the device failed.</li>
<li>"battery failing" (bool): Indicates if the device's battery is failing.</li>
</ul>
<p>Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="src.common.utils.errors.BaseErrorWithMessageBox">BaseErrorWithMessageBox</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an exception occurs during the operation, it raises
a custom error with a message box displaying the error details.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src\ui\update_time_device_dialog.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">op_terminate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">devices_errors</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Updates the table widget with the connection and battery status of devices.</span>
<span class="sd">    This method processes the `devices_errors` dictionary to update the table widget</span>
<span class="sd">    with the connection and battery status for each device. It ensures that the required</span>
<span class="sd">    columns exist in the table, updates the rows with the appropriate status and colors,</span>
<span class="sd">    and adjusts the table&#39;s size and sorting.</span>

<span class="sd">    Args:</span>
<span class="sd">        devices_errors (dict[str, dict[str, bool]], optional): A dictionary where the keys</span>
<span class="sd">            are device IP addresses, and the values are dictionaries containing error</span>
<span class="sd">            statuses for the device. The inner dictionary can have the following keys:</span>

<span class="sd">            - &quot;connection failed&quot; (bool): Indicates if the connection to the device failed.</span>
<span class="sd">            - &quot;battery failing&quot; (bool): Indicates if the device&#39;s battery is failing.</span>

<span class="sd">            Defaults to None.</span>

<span class="sd">    Raises:</span>
<span class="sd">        BaseErrorWithMessageBox: If an exception occurs during the operation, it raises</span>
<span class="sd">            a custom error with a message box displaying the error details.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">#logging.debug(devices_errors)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">connection_column</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ensure_column_exists</span><span class="p">(</span><span class="s2">&quot;Estado de Conexión&quot;</span><span class="p">)</span>
        <span class="n">battery_column</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ensure_column_exists</span><span class="p">(</span><span class="s2">&quot;Estado de Pila&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()):</span>
            <span class="n">ip_selected</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>  <span class="c1"># Column 3 holds the IP</span>
            <span class="n">connection_item</span><span class="p">:</span> <span class="n">QTableWidgetItem</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">battery_item</span><span class="p">:</span> <span class="n">QTableWidgetItem</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ip_selected</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_ips</span><span class="p">:</span>
                <span class="n">connection_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">white</span><span class="p">))</span>
                <span class="n">battery_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">white</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">device</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">devices_errors</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ip_selected</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">device</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">device</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;connection failed&quot;</span><span class="p">):</span>
                        <span class="n">connection_item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Conexión fallida&quot;</span><span class="p">)</span>
                        <span class="n">connection_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">red</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">connection_item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Conexión exitosa&quot;</span><span class="p">)</span>
                        <span class="n">connection_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">green</span><span class="p">))</span>
                    <span class="k">if</span> <span class="n">device</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;connection failed&quot;</span><span class="p">):</span>
                        <span class="n">battery_item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;No aplica&quot;</span><span class="p">)</span>
                        <span class="n">battery_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">gray</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">battery_failing</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;battery failing&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">device_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ip_selected</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">battery_failing</span><span class="p">:</span>
                            <span class="n">battery_item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Pila fallando&quot;</span><span class="p">)</span>
                            <span class="n">battery_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">red</span><span class="p">))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">battery_item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Pila funcionando&quot;</span><span class="p">)</span>
                            <span class="n">battery_item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">green</span><span class="p">))</span>
            <span class="n">connection_item</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="n">connection_item</span><span class="o">.</span><span class="n">flags</span><span class="p">()</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsEditable</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">connection_column</span><span class="p">,</span> <span class="n">connection_item</span><span class="p">)</span>
            <span class="n">battery_item</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="n">battery_item</span><span class="o">.</span><span class="n">flags</span><span class="p">()</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsEditable</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">battery_column</span><span class="p">,</span> <span class="n">battery_item</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">adjust_size_to_table</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setSortingEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">sortByColumn</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">DescendingOrder</span><span class="p">)</span>    

        <span class="bp">self</span><span class="o">.</span><span class="n">deselect_all_rows</span><span class="p">()</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">op_terminate</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BaseErrorWithMessageBox</span><span class="p">(</span><span class="mi">3500</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>


  </div>

    </div>

</div>


  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>